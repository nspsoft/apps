import{m as u,C as oe,f as de,q as ie,c as i,a as p,u as l,h as ne,w as O,b as t,j as R,v as T,n as x,d as v,o as r,F as j,g as G,e as n,t as d,x as b,p as ce,M as ue,T as pe,s as xe,B as _}from"./app-BDCSmORV.js";import{z as be,h as M,_ as me}from"./AppLayout-D-MN9Clt.js";import{_ as ve}from"./Pagination-B2uIov2g.js";import{a as D}from"./helpers-DzPfLsau.js";import{C as ge,a as ke,L as fe,P as he,b as ye,B as we,p as _e,c as Ce,d as ze,i as Se,f as E}from"./index-WEVV8HnP.js";import{r as De}from"./MagnifyingGlassIcon-r3Oq-h5I.js";import{d as $e}from"./SunIcon-DIO3ajW4.js";import{r as J}from"./ArrowUpTrayIcon-SQRBv09T.js";import{r as Be}from"./ArrowLeftCircleIcon-C9x147S_.js";import{r as L}from"./ChevronUpIcon-B3EDgwZV.js";import{r as Ae}from"./UserIcon-CPdS8oRa.js";import{r as Fe}from"./XMarkIcon-CqC2ginv.js";/* empty css            */import"./WrenchScrewdriverIcon-Bcgjqimb.js";import"./DocumentPlusIcon-CeAHff71.js";import"./TruckIcon-KSIW3uKV.js";import"./DocumentTextIcon-D13MK6Zf.js";import"./ShoppingCartIcon-C570p5_n.js";import"./MapPinIcon-Bn_n6hkH.js";import"./SparklesIcon-CPtneXCC.js";import"./CubeIcon-D4nQSbpl.js";import"./ClockIcon-BiKs3xgx.js";import"./CheckCircleIcon-pchilZdj.js";import"./ShieldCheckIcon-BLDjUQQt.js";const Ie={class:"p-4 sm:p-6 lg:p-8"},Re={class:"glass-card rounded-2xl overflow-hidden p-6"},je={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},Me={class:"flex gap-4 w-full md:w-auto"},Le={class:"relative w-full md:w-64"},Ve={class:"flex items-center gap-3"},Ne={class:"flex items-center bg-slate-200 dark:bg-slate-700 rounded-lg p-0.5"},Oe=["href"],Te={key:0,class:"rounded-2xl p-6 mb-6 border border-slate-200 dark:border-slate-700/50 shadow-lg bg-white/50 dark:bg-slate-800/30"},Ee={class:"flex items-center gap-2 mb-4 text-sm"},Pe={key:0,class:"text-slate-400"},qe=["onClick"],Ue={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},He={class:"bg-violet-50 dark:bg-violet-900/30 border border-violet-200 dark:border-violet-800 rounded-xl p-4 text-center"},Qe={class:"text-2xl font-black text-violet-700 dark:text-violet-300 mt-1"},We={class:"bg-emerald-50 dark:bg-emerald-900/30 border border-emerald-200 dark:border-emerald-800 rounded-xl p-4 text-center"},Ge={class:"text-2xl font-black text-emerald-700 dark:text-emerald-300 mt-1"},Je={class:"relative",style:{height:"380px"}},Ke={key:0,class:"absolute inset-0 flex items-center justify-center bg-white/60 dark:bg-slate-900/60 z-10 rounded-xl"},Xe={key:4,class:"flex items-center justify-center h-full text-slate-400"},Ye={key:1,class:"text-center text-[10px] text-slate-400 mt-3 italic"},Ze={class:"rounded-2xl glass-card overflow-hidden"},et={class:"overflow-x-auto overflow-y-auto max-h-[600px]"},tt={class:"w-full text-left text-sm text-slate-600 dark:text-slate-400"},st={class:"bg-slate-50 dark:bg-slate-700/50 text-xs uppercase font-semibold text-slate-500 dark:text-slate-300"},at={class:"border-b border-slate-200 dark:border-slate-700"},lt={class:"flex items-center gap-1"},rt={key:0,class:"text-blue-600 dark:text-blue-400"},ot={class:"flex items-center gap-1"},dt={key:0,class:"text-blue-600 dark:text-blue-400"},it={class:"flex items-center gap-1"},nt={key:0,class:"text-blue-600 dark:text-blue-400"},ct={class:"flex items-center justify-end gap-1"},ut={key:0,class:"text-blue-600 dark:text-blue-400"},pt={class:"divide-y divide-slate-100 dark:divide-slate-800"},xt={class:"px-4 py-2 whitespace-nowrap text-sm text-slate-600 dark:text-slate-400 uppercase font-medium"},bt={class:"px-4 py-2"},mt={class:"text-sm font-semibold text-slate-900 dark:text-white"},vt={class:"text-[10px] text-slate-500 font-mono tracking-tight"},gt={class:"px-4 py-2"},kt={class:"text-sm font-medium text-slate-900 dark:text-white"},ft={class:"text-[10px] text-slate-500 font-mono tracking-tight"},ht={class:"px-4 py-2 text-right font-mono text-sm text-slate-900 dark:text-white"},yt={class:"px-4 py-2 text-right font-mono text-sm"},wt={class:"px-4 py-2 text-center"},_t={class:"flex flex-col items-center"},Ct={class:"w-12 h-1 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden mt-0.5"},zt={class:"px-4 py-2"},St=["title"],Dt={key:0,class:"text-[9px] text-slate-500 uppercase flex items-center gap-1"},$t={class:"px-4 py-2 text-sm text-slate-500 font-mono"},Bt=["title"],At={key:0},Ft={class:"mt-6"},It={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-sm"},Rt={class:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md p-6 shadow-2xl border border-slate-200 dark:border-slate-700"},jt={class:"flex items-center justify-between mb-6"},Mt={class:"mb-4"},Lt={class:"mb-6"},Vt={class:"flex flex-col items-center justify-center border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-xl p-8 hover:border-blue-500/50 transition-all relative group bg-slate-50/50 dark:bg-slate-900/50"},Nt={class:"flex flex-col items-center transition-transform group-hover:scale-105 duration-300"},Ot={class:"p-3 rounded-full bg-blue-50 dark:bg-blue-900/30 mb-3"},Tt={class:"text-sm text-slate-600 dark:text-slate-300 font-semibold mb-1"},Et={class:"mt-4 z-30 relative py-1 px-3 rounded-lg bg-blue-50 dark:bg-blue-900/40 border border-blue-100 dark:border-blue-800/50"},Pt=["href"],qt={key:0,class:"text-red-500 text-xs mt-2 font-medium"},Ut={class:"flex items-center gap-3"},Ht=["disabled"],gs={__name:"Index",props:{forecasts:Object,filters:Object},setup($){ge.register(ke,fe,he,ye,we,_e,Ce,ze,Se);const B=$,h=u(B.filters.search||""),C=u(B.filters.month||""),f=u(B.filters.sort||"period"),k=u(B.filters.direction||"desc"),V=u(!1),y=u("chart"),m=u("summary"),o=u(null),A=u(!1),g=u([{label:"All Customers",level:"summary"}]),z=u(null),w=u(null),S=async()=>{A.value=!0;try{const s=new URLSearchParams({search:h.value||"",level:m.value});z.value&&s.set("customer_id",z.value),w.value&&s.set("product_id",w.value);const e=await fetch(route("sales.planning.forecast.chart-data")+"?"+s.toString());o.value=await e.json()}catch(s){console.error("Chart fetch error:",s)}finally{A.value=!1}},P=s=>{m.value==="summary"?(m.value="customer",z.value=s.id,g.value.push({label:s.name,level:"customer",id:s.id}),S()):m.value==="customer"&&(m.value="item",w.value=s.id,g.value.push({label:s.name,level:"item",id:s.id}),S())},q=s=>{const e=g.value[s];g.value=g.value.slice(0,s+1),m.value=e.level,e.level==="summary"?(z.value=null,w.value=null):e.level==="customer"&&(w.value=null),S()};oe(()=>{S()});const U=_(()=>{if(!o.value||o.value.level!=="summary")return null;const s=o.value.data;return{labels:s.map(e=>e.name),datasets:[{label:"Forecast",data:s.map(e=>e.forecast),backgroundColor:"rgba(139,92,246,0.7)",borderRadius:4,barThickness:22},{label:"Actual (Order)",data:s.map(e=>e.actual),backgroundColor:"rgba(16,185,129,0.8)",borderRadius:4,barThickness:22}]}}),H=_(()=>{if(!o.value||o.value.level!=="customer")return null;const s=o.value.data;return{labels:s.map(e=>e.name),datasets:[{label:"Forecast",data:s.map(e=>e.forecast),backgroundColor:"rgba(139,92,246,0.7)",borderRadius:4},{label:"Actual (Order)",data:s.map(e=>e.actual),backgroundColor:"rgba(16,185,129,0.8)",borderRadius:4}]}}),Q=_(()=>{if(!o.value||o.value.level!=="item")return null;const s=o.value.data;return{labels:s.map(e=>e.label),datasets:[{type:"bar",label:"Forecast",data:s.map(e=>e.forecast),backgroundColor:"rgba(139,92,246,0.4)",borderRadius:3,order:2},{type:"bar",label:"Actual",data:s.map(e=>e.actual),backgroundColor:"rgba(16,185,129,0.7)",borderRadius:3,order:2},{type:"line",label:"Cum. Forecast",data:s.map(e=>e.cum_forecast),borderColor:"#8b5cf6",borderDash:[6,3],borderWidth:2,pointRadius:3,pointBackgroundColor:"#8b5cf6",fill:!1,tension:.3,order:1},{type:"line",label:"Cum. Actual",data:s.map(e=>e.cum_actual),borderColor:"#10b981",borderWidth:2.5,pointRadius:4,pointBackgroundColor:"#10b981",fill:!1,tension:.3,order:1}]}}),K=_(()=>({responsive:!0,maintainAspectRatio:!1,indexAxis:"y",onClick:(s,e)=>{e.length&&o.value&&P(o.value.data[e[0].index])},plugins:{legend:{position:"top",labels:{color:"#64748b",font:{size:11,weight:"bold"}}},tooltip:{padding:10}},scales:{x:{grid:{color:"rgba(0,0,0,0.06)"},ticks:{color:"#64748b",font:{size:10}}},y:{grid:{display:!1},ticks:{color:"#334155",font:{size:11,weight:"600"}}}}})),X=_(()=>({responsive:!0,maintainAspectRatio:!1,onClick:(s,e)=>{e.length&&o.value&&P(o.value.data[e[0].index])},plugins:{legend:{position:"top",labels:{color:"#64748b",font:{size:11,weight:"bold"}}},tooltip:{padding:10}},scales:{x:{grid:{display:!1},ticks:{color:"#334155",font:{size:10,weight:"600"},maxRotation:45}},y:{grid:{color:"rgba(0,0,0,0.06)"},ticks:{color:"#64748b",font:{size:10}}}}})),Y=_(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#64748b",font:{size:11,weight:"bold"}}},tooltip:{padding:10}},scales:{x:{grid:{display:!1},ticks:{color:"#334155",font:{size:10},maxRotation:45}},y:{grid:{color:"rgba(0,0,0,0.06)"},ticks:{color:"#64748b",font:{size:10}}}}})),Z=u(null),c=de({file:null,sales_name:""}),F=s=>{f.value===s?k.value=k.value==="asc"?"desc":"asc":(f.value=s,k.value="asc"),W()},W=()=>{xe.get(route("sales.planning.forecast.index"),{search:h.value,month:C.value,sort:f.value,direction:k.value},{preserveState:!0,replace:!0})};ie([h,C],()=>{W(),S()});const ee=()=>{V.value=!0},N=()=>{V.value=!1,c.reset()},te=()=>{c.file&&c.post(route("sales.planning.forecast.import"),{onSuccess:()=>N()})},se=s=>s>=90?"#10b981":s>=75?"#3b82f6":s>=50?"#f59e0b":"#ef4444",ae=s=>s>=90?"text-emerald-600 dark:text-emerald-400":s>=75?"text-blue-600 dark:text-blue-400":s>=50?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400",le=s=>s?new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"long"}):"",re=s=>s?new Date(s).toLocaleDateString("id-ID",{day:"2-digit",month:"short"}):"";return(s,e)=>(r(),i(j,null,[p(l(ne),{title:"Sales Forecast"}),p(me,{title:"Sales Forecast"},{header:O(()=>[...e[11]||(e[11]=[t("h2",{class:"font-semibold text-xl text-slate-800 dark:text-slate-200 leading-tight"}," Sales Forecast ",-1)])]),default:O(()=>[t("div",Ie,[t("div",Re,[t("div",je,[t("div",Me,[t("div",Le,[R(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>h.value=a),type:"text",placeholder:"Search Customer / Product...",class:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[T,h.value]]),p(l(De),{class:"w-5 h-5 text-slate-400 absolute left-3 top-2.5"})]),R(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>C.value=a),type:"month",class:"rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[T,C.value]])]),t("div",Ve,[t("div",Ne,[t("button",{onClick:e[2]||(e[2]=a=>y.value="chart"),class:x([y.value==="chart"?"bg-white dark:bg-slate-900 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700","px-3 py-1.5 rounded-md text-xs font-bold uppercase tracking-wider transition-all flex items-center gap-1"])},[p(l($e),{class:"w-3.5 h-3.5"}),e[12]||(e[12]=v(" Chart ",-1))],2),t("button",{onClick:e[3]||(e[3]=a=>y.value="table"),class:x([y.value==="table"?"bg-white dark:bg-slate-900 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700","px-3 py-1.5 rounded-md text-xs font-bold uppercase tracking-wider transition-all flex items-center gap-1"])},[p(l(be),{class:"w-3.5 h-3.5"}),e[13]||(e[13]=v(" Table ",-1))],2)]),t("a",{href:s.route("sales.planning.forecast.export",{search:h.value,month:C.value}),class:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors text-sm"},[...e[14]||(e[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),v(" Export ",-1)])],8,Oe),t("button",{onClick:ee,class:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors text-sm"},[p(l(J),{class:"w-4 h-4"}),e[15]||(e[15]=v(" Import ",-1))])])]),y.value==="chart"?(r(),i("div",Te,[t("div",Ee,[(r(!0),i(j,null,G(g.value,(a,I)=>(r(),i(j,{key:I},[I>0?(r(),i("span",Pe,"/")):n("",!0),t("button",{onClick:Qt=>q(I),class:x([I===g.value.length-1?"text-violet-600 dark:text-violet-400 font-bold":"text-slate-500 hover:text-violet-600 dark:hover:text-slate-300","transition-colors"])},d(a.label),11,qe)],64))),128)),g.value.length>1?(r(),i("button",{key:0,onClick:e[4]||(e[4]=a=>q(g.value.length-2)),class:"ml-2 p-1 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors"},[p(l(Be),{class:"w-5 h-5 text-slate-400"})])):n("",!0)]),o.value&&o.value.kpi?(r(),i("div",Ue,[t("div",He,[e[16]||(e[16]=t("p",{class:"text-[10px] text-violet-500 dark:text-violet-400 font-bold uppercase tracking-wider"},"Total Forecast",-1)),t("p",Qe,d(l(D)(o.value.kpi.total_forecast)),1)]),t("div",We,[e[17]||(e[17]=t("p",{class:"text-[10px] text-emerald-500 dark:text-emerald-400 font-bold uppercase tracking-wider"},"Total Actual (Order)",-1)),t("p",Ge,d(l(D)(o.value.kpi.total_actual)),1)]),t("div",{class:x(["border rounded-xl p-4 text-center",o.value.kpi.achievement>=90?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800":o.value.kpi.achievement>=70?"bg-amber-50 dark:bg-amber-900/30 border-amber-200 dark:border-amber-800":"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800"])},[t("p",{class:x(["text-[10px] font-bold uppercase tracking-wider",o.value.kpi.achievement>=90?"text-green-500":o.value.kpi.achievement>=70?"text-amber-500":"text-red-500"])},"Achievement",2),t("p",{class:x(["text-2xl font-black mt-1",o.value.kpi.achievement>=90?"text-green-700 dark:text-green-300":o.value.kpi.achievement>=70?"text-amber-700 dark:text-amber-300":"text-red-700 dark:text-red-300"])},d(o.value.kpi.achievement)+"%",3)],2),t("div",{class:x(["border rounded-xl p-4 text-center",o.value.kpi.gap<0?"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800":"bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700"])},[t("p",{class:x(["text-[10px] font-bold uppercase tracking-wider",o.value.kpi.gap<0?"text-red-500":"text-slate-500"])},"Gap",2),t("p",{class:x(["text-2xl font-black mt-1",o.value.kpi.gap<0?"text-red-700 dark:text-red-300":"text-slate-700 dark:text-slate-300"])},d(l(D)(o.value.kpi.gap)),3)],2)])):n("",!0),t("div",Je,[A.value?(r(),i("div",Ke,[...e[18]||(e[18]=[t("div",{class:"flex items-center gap-3 text-slate-500"},[t("svg",{class:"animate-spin h-6 w-6",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]),t("span",{class:"text-sm font-medium"},"Loading chart data...")],-1)])])):n("",!0),m.value==="summary"&&U.value?(r(),b(l(E),{key:"fc-summary",data:U.value,options:K.value},null,8,["data","options"])):m.value==="customer"&&H.value?(r(),b(l(E),{key:"fc-customer-"+z.value,data:H.value,options:X.value},null,8,["data","options"])):m.value==="item"&&Q.value?(r(),b(l(E),{key:"fc-item-"+w.value,data:Q.value,options:Y.value},null,8,["data","options"])):A.value?n("",!0):(r(),i("div",Xe,[...e[19]||(e[19]=[t("p",{class:"text-sm"},"No forecast data available.",-1)])]))]),m.value!=="item"?(r(),i("p",Ye,"Click a bar to drill down into details")):n("",!0)])):n("",!0),R(t("div",Ze,[t("div",et,[t("table",tt,[t("thead",st,[t("tr",at,[t("th",{onClick:e[5]||(e[5]=a=>F("period")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},[t("div",lt,[e[20]||(e[20]=v(" Period ",-1)),f.value==="period"?(r(),i("span",rt,[k.value==="asc"?(r(),b(l(L),{key:0,class:"h-3 w-3"})):(r(),b(l(M),{key:1,class:"h-3 w-3"}))])):n("",!0)])]),t("th",{onClick:e[6]||(e[6]=a=>F("customer_name")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},[t("div",ot,[e[21]||(e[21]=v(" Customer ",-1)),f.value==="customer_name"?(r(),i("span",dt,[k.value==="asc"?(r(),b(l(L),{key:0,class:"h-3 w-3"})):(r(),b(l(M),{key:1,class:"h-3 w-3"}))])):n("",!0)])]),t("th",{onClick:e[7]||(e[7]=a=>F("product_name")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},[t("div",it,[e[22]||(e[22]=v(" Product ",-1)),f.value==="product_name"?(r(),i("span",nt,[k.value==="asc"?(r(),b(l(L),{key:0,class:"h-3 w-3"})):(r(),b(l(M),{key:1,class:"h-3 w-3"}))])):n("",!0)])]),t("th",{onClick:e[8]||(e[8]=a=>F("qty_forecast")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 text-right cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},[t("div",ct,[e[23]||(e[23]=v(" Qty Forecast ",-1)),f.value==="qty_forecast"?(r(),i("span",ut,[k.value==="asc"?(r(),b(l(L),{key:0,class:"h-3 w-3"})):(r(),b(l(M),{key:1,class:"h-3 w-3"}))])):n("",!0)])]),e[24]||(e[24]=t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 text-right text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},"Qty PO (Actual)",-1)),e[25]||(e[25]=t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},"Accuracy",-1)),e[26]||(e[26]=t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},"Sales Name",-1)),e[27]||(e[27]=t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},"Unit",-1)),e[28]||(e[28]=t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},"Notes",-1))])]),t("tbody",pt,[(r(!0),i(j,null,G($.forecasts.data,a=>(r(),i("tr",{key:a.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30 transition-colors"},[t("td",xt,d(le(a.period)),1),t("td",bt,[t("div",mt,d(a.customer?.name),1),t("div",vt,d(a.customer?.code),1)]),t("td",gt,[t("div",kt,d(a.product?.name),1),t("div",ft,d(a.product?.sku),1)]),t("td",ht,d(l(D)(a.qty_forecast)),1),t("td",yt,[t("span",{class:x({"text-blue-500 font-bold":a.qty_actual>0,"text-slate-400":a.qty_actual===0})},d(l(D)(a.qty_actual)),3)]),t("td",wt,[t("div",_t,[t("span",{class:x([ae(a.accuracy),"font-bold text-[10px] tracking-tighter"])},d(a.accuracy)+"% ",3),t("div",Ct,[t("div",{class:"h-full transition-all duration-500",style:ce({width:a.accuracy+"%",backgroundColor:se(a.accuracy)})},null,4)])])]),t("td",zt,[t("div",{class:"text-sm font-medium text-slate-900 dark:text-white truncate max-w-[120px]",title:a.sales_name},d(a.sales_name||"-"),9,St),a.created_by?(r(),i("div",Dt,[p(l(Ae),{class:"w-2.5 h-2.5"}),v(" "+d(a.created_by_user?.name||"User")+" â€¢ "+d(re(a.created_at)),1)])):n("",!0)]),t("td",$t,d(a.product?.unit?.code),1),t("td",{class:"px-4 py-2 text-[11px] italic text-slate-500 dark:text-slate-400 line-clamp-1 truncate max-w-[150px]",title:a.notes},d(a.notes||"-"),9,Bt)]))),128)),$.forecasts.data.length===0?(r(),i("tr",At,[...e[29]||(e[29]=[t("td",{colspan:"9",class:"px-4 py-12 text-center text-slate-500 whitespace-nowrap"}," No forecast data found. Import Excel to get started. ",-1)])])):n("",!0)])])])],512),[[ue,y.value==="table"]]),t("div",Ft,[p(ve,{links:$.forecasts.links},null,8,["links"])])])]),p(pe,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:O(()=>[V.value?(r(),i("div",It,[t("div",Rt,[t("div",jt,[e[30]||(e[30]=t("h3",{class:"text-xl font-bold text-slate-900 dark:text-white"}," Import Forecast Data ",-1)),t("button",{onClick:N,class:"text-slate-500 hover:text-slate-900 dark:text-white transition-colors"},[p(l(Fe),{class:"h-6 w-6"})])]),t("div",Mt,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Sales Name",-1)),R(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>l(c).sales_name=a),type:"text",placeholder:"Enter salesperson name",class:"w-full rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[T,l(c).sales_name]])]),t("div",Lt,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-3"},"Excel/CSV File",-1)),t("div",Vt,[t("input",{type:"file",ref_key:"fileInput",ref:Z,onChange:e[10]||(e[10]=a=>l(c).file=a.target.files[0]),class:"absolute inset-0 opacity-0 cursor-pointer z-20",accept:".xlsx,.xls,.csv"},null,544),t("div",Nt,[t("div",Ot,[p(l(J),{class:"h-8 w-8 text-blue-600 dark:text-blue-400"})]),t("p",Tt,d(l(c).file?l(c).file.name:"Click or drag file to upload"),1),e[32]||(e[32]=t("p",{class:"text-xs text-slate-500"},"Maximum size: 2MB",-1))]),t("div",Et,[t("a",{href:s.route("sales.planning.forecast.template"),class:"flex items-center gap-1.5 text-xs font-bold text-blue-600 dark:text-blue-400 hover:underline"},[...e[33]||(e[33]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),v(" Download Template ",-1)])],8,Pt)])]),l(c).errors.file?(r(),i("div",qt,d(l(c).errors.file),1)):n("",!0)]),t("div",Ut,[t("button",{onClick:te,disabled:!l(c).file||l(c).processing,class:"flex-1 rounded-xl bg-blue-600 py-3 text-sm font-bold text-white hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-blue-500/20"},d(l(c).processing?"Importing...":"Start Import"),9,Ht),t("button",{onClick:N,class:"flex-1 rounded-xl bg-slate-100 dark:bg-slate-700 py-3 text-sm font-bold text-slate-600 dark:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all font-mono uppercase tracking-wider"}," Cancel ")])])])):n("",!0)]),_:1})]),_:1})],64))}};export{gs as default};
