import{m as p,f as M,q as V,c as r,a as x,u as o,h as O,w as S,b as t,j as $,v as j,d as a,o as l,x as n,e as m,F as D,g as B,t as d,n as E,s as L}from"./app-DXljF0a6.js";import{h as y,_ as P}from"./AppLayout-DE4eK6XI.js";import{_ as U}from"./Pagination-BIMETeb5.js";import{r as z}from"./MagnifyingGlassIcon-sZccWDtn.js";import{r as Q}from"./ArrowUpTrayIcon-B_h1IRSA.js";import{r as _}from"./ChevronUpIcon-BZhNABax.js";import{r as T}from"./XMarkIcon-Cv3k7dsQ.js";/* empty css            */import"./SunIcon-CXrnetDC.js";import"./WrenchScrewdriverIcon-BEcmvrPK.js";import"./DocumentPlusIcon-Bu362PSM.js";import"./TruckIcon-c6xKH9BV.js";import"./DocumentTextIcon-DwL5yPkx.js";import"./ShoppingCartIcon-B3QakQe3.js";import"./MapPinIcon-BK_yrJ2D.js";import"./SparklesIcon-Cn6h5byK.js";import"./CubeIcon-DdhNpuk-.js";import"./ClockIcon-CNhIucyl.js";import"./CheckCircleIcon-C0OEANr7.js";import"./ShieldCheckIcon-C4VB4kQ5.js";const A={class:"py-12"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"bg-white dark:bg-slate-800 overflow-hidden shadow-xl sm:rounded-lg p-6"},J={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},K={class:"flex gap-4 w-full md:w-auto"},R={class:"relative w-full md:w-64"},W={class:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700"},X={class:"w-full text-left text-sm text-slate-600 dark:text-slate-400"},Y={class:"bg-slate-50 dark:bg-slate-700/50 text-xs uppercase font-semibold text-slate-500 dark:text-slate-300"},Z={class:"flex items-center gap-1"},tt={key:0,class:"text-blue-600 dark:text-blue-400"},et={class:"flex items-center gap-1"},st={key:0,class:"text-blue-600 dark:text-blue-400"},lt={class:"flex items-center gap-1"},ot={key:0,class:"text-blue-600 dark:text-blue-400"},at={class:"flex items-center justify-end gap-1"},rt={key:0,class:"text-blue-600 dark:text-blue-400"},dt={class:"divide-y divide-slate-200 dark:divide-slate-700"},it={class:"px-6 py-2"},nt={class:"px-6 py-2 font-medium text-slate-900 dark:text-white"},ct={class:"px-6 py-2"},ut={class:"font-medium text-slate-900 dark:text-white"},mt={class:"text-xs text-slate-500"},pt={class:"px-6 py-2 text-right font-mono"},xt={class:"px-6 py-2 text-right font-mono"},bt={class:"px-6 py-2"},ft={class:"px-6 py-2 text-xs italic"},gt={key:0},ht={class:"mt-6"},vt={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},kt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},yt={class:"inline-block align-bottom bg-white dark:bg-slate-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},_t={class:"bg-white dark:bg-slate-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},wt={class:"flex justify-between items-center mb-4 pb-4 border-b border-slate-200 dark:border-slate-700"},Ct={class:"sm:flex sm:items-start"},It={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},Ft={class:"mt-2"},St={key:0,class:"text-red-500 text-xs mt-2"},$t={class:"bg-slate-50 dark:bg-slate-700/50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},jt=["disabled"],Wt={__name:"Index",props:{forecasts:Object,filters:Object},setup(b){const f=b,g=p(f.filters.search||""),h=p(f.filters.month||""),c=p(f.filters.sort||"period"),i=p(f.filters.direction||"desc"),w=p(!1),C=p(null),u=M({file:null}),v=I=>{c.value===I?i.value=i.value==="asc"?"desc":"asc":(c.value=I,i.value="asc"),F()},F=()=>{L.get(route("planning.forecast.index"),{search:g.value,month:h.value,sort:c.value,direction:i.value},{preserveState:!0,replace:!0})};V([g,h],()=>{F()});const q=()=>{console.log("Opening Forecast Import Modal"),w.value=!0},k=()=>{console.log("Closing Forecast Import Modal"),w.value=!1,u.reset()},N=()=>{C.value.files[0]&&(u.file=C.value.files[0],u.post(route("planning.forecast.import"),{onSuccess:()=>k()}))};return(I,e)=>(l(),r(D,null,[x(o(O),{title:"Sales Forecast"}),x(P,{title:"Sales Forecast"},{header:S(()=>[...e[6]||(e[6]=[t("h2",{class:"font-semibold text-xl text-slate-800 dark:text-slate-200 leading-tight"}," Sales Forecast ",-1)])]),default:S(()=>[t("div",A,[t("div",G,[t("div",H,[t("div",J,[t("div",K,[t("div",R,[$(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>g.value=s),type:"text",placeholder:"Search Customer / Product...",class:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[j,g.value]]),x(o(z),{class:"w-5 h-5 text-slate-400 absolute left-3 top-2.5"})]),$(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>h.value=s),type:"month",class:"rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[j,h.value]])]),t("button",{onClick:q,class:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors"},[x(o(Q),{class:"w-5 h-5"}),e[7]||(e[7]=a(" Import Excel ",-1))])]),t("div",W,[t("table",X,[t("thead",Y,[t("tr",null,[t("th",{onClick:e[2]||(e[2]=s=>v("period")),class:"px-6 py-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"},[t("div",Z,[e[8]||(e[8]=a(" Period ",-1)),c.value==="period"?(l(),r("span",tt,[i.value==="asc"?(l(),n(o(_),{key:0,class:"h-3 w-3"})):(l(),n(o(y),{key:1,class:"h-3 w-3"}))])):m("",!0)])]),t("th",{onClick:e[3]||(e[3]=s=>v("customer_name")),class:"px-6 py-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"},[t("div",et,[e[9]||(e[9]=a(" Customer ",-1)),c.value==="customer_name"?(l(),r("span",st,[i.value==="asc"?(l(),n(o(_),{key:0,class:"h-3 w-3"})):(l(),n(o(y),{key:1,class:"h-3 w-3"}))])):m("",!0)])]),t("th",{onClick:e[4]||(e[4]=s=>v("product_name")),class:"px-6 py-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"},[t("div",lt,[e[10]||(e[10]=a(" Product ",-1)),c.value==="product_name"?(l(),r("span",ot,[i.value==="asc"?(l(),n(o(_),{key:0,class:"h-3 w-3"})):(l(),n(o(y),{key:1,class:"h-3 w-3"}))])):m("",!0)])]),t("th",{onClick:e[5]||(e[5]=s=>v("qty_forecast")),class:"px-6 py-3 text-right cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"},[t("div",at,[e[11]||(e[11]=a(" Qty Forecast ",-1)),c.value==="qty_forecast"?(l(),r("span",rt,[i.value==="asc"?(l(),n(o(_),{key:0,class:"h-3 w-3"})):(l(),n(o(y),{key:1,class:"h-3 w-3"}))])):m("",!0)])]),e[12]||(e[12]=t("th",{class:"px-6 py-3 text-right"},"Qty PO (Actual)",-1)),e[13]||(e[13]=t("th",{class:"px-6 py-3"},"Unit",-1)),e[14]||(e[14]=t("th",{class:"px-6 py-3"},"Notes",-1))])]),t("tbody",dt,[(l(!0),r(D,null,B(b.forecasts.data,s=>(l(),r("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors"},[t("td",it,d(new Date(s.period).toLocaleDateString("id-ID",{year:"numeric",month:"long"})),1),t("td",nt,d(s.customer?.name),1),t("td",ct,[t("div",ut,d(s.product?.name),1),t("div",mt,d(s.product?.sku),1)]),t("td",pt,d(Number(s.qty_forecast).toLocaleString("id-ID")),1),t("td",xt,[t("span",{class:E({"text-blue-600 dark:text-blue-400 font-bold":s.qty_actual>0,"text-slate-400":s.qty_actual===0})},d(Number(s.qty_actual).toLocaleString("id-ID")),3)]),t("td",bt,d(s.product?.unit?.code),1),t("td",ft,d(s.notes||"-"),1)]))),128)),b.forecasts.data.length===0?(l(),r("tr",gt,[...e[15]||(e[15]=[t("td",{colspan:"7",class:"px-6 py-8 text-center text-slate-500"}," No forecast data found. Import Excel to get started. ",-1)])])):m("",!0)])])]),t("div",ht,[x(U,{links:b.forecasts.links},null,8,["links"])])])])]),w.value?(l(),r("div",vt,[t("div",kt,[t("div",{class:"fixed inset-0 bg-slate-900 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:k}),e[18]||(e[18]=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),t("div",yt,[t("div",_t,[t("div",wt,[e[16]||(e[16]=t("h3",{class:"text-lg leading-6 font-bold text-slate-900 dark:text-white",id:"modal-title"}," Import Forecast Data ",-1)),t("button",{onClick:k,class:"text-slate-400 hover:text-slate-500 transition-colors"},[x(o(T),{class:"w-6 h-6"})])]),t("div",Ct,[t("div",It,[t("div",Ft,[e[17]||(e[17]=t("p",{class:"text-sm text-slate-500 dark:text-slate-400 mb-4"},[a(" Upload an Excel file (.xlsx, .xls) with columns: "),t("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"customer_code"),a(", "),t("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"product_sku"),a(", "),t("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"period"),a(", "),t("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"qty"),a(", "),t("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"notes"),a(". ")],-1)),t("input",{ref_key:"fileInput",ref:C,type:"file",class:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100 dark:file:bg-emerald-900/30 dark:file:text-emerald-400",accept:".xlsx, .xls, .csv"},null,512),o(u).errors.file?(l(),r("div",St,d(o(u).errors.file),1)):m("",!0)])])])]),t("div",$t,[t("button",{onClick:N,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-emerald-600 text-base font-medium text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:ml-3 sm:w-auto sm:text-sm",disabled:o(u).processing},d(o(u).processing?"Importing...":"Import"),9,jt),t("button",{onClick:k,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-slate-300 dark:border-slate-600 shadow-sm px-4 py-2 bg-white dark:bg-slate-800 text-base font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):m("",!0)]),_:1})],64))}};export{Wt as default};
