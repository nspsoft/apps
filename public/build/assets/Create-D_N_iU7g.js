import{f as k,x as v,w as g,b as e,a as u,u as s,l as w,t as l,i as q,d as x,j as a,v as i,o as n,c as p,e as m,F as D,g as N,n as S,B as V}from"./app-B5B8X2AE.js";import{P as C}from"./PortalLayout-DyfjR9We.js";import{r as U}from"./ArrowLeftIcon-Cjqlc7Mw.js";import{r as y}from"./DocumentTextIcon-BpHGUgTF.js";import{r as B}from"./TruckIcon-D12YVj-p.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./XMarkIcon-CgOQ8EZI.js";import"./SunIcon-C5izLkPm.js";import"./ShoppingCartIcon-ChyIwjII.js";import"./CalendarIcon-DMc6QAHz.js";import"./FolderIcon-BLg2_wkg.js";import"./ArchiveBoxIcon-BhJRMgm3.js";import"./QuestionMarkCircleIcon-DxgBe-ZM.js";import"./ChevronRightIcon-BaIQZD5r.js";import"./ChevronLeftIcon-O0ejXZrO.js";import"./ArrowRightOnRectangleIcon-B93FwtKo.js";const P={class:"max-w-4xl mx-auto"},I={class:"flex items-center gap-4 mb-6"},L={class:"text-sm text-slate-500"},T={class:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6"},F={class:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},j={key:0,class:"text-red-500 text-xs mt-1"},M={key:0,class:"text-red-500 text-xs mt-1"},A={class:"md:col-span-2"},E={class:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden"},J={class:"p-6 border-b border-slate-200 dark:border-slate-700"},$={class:"font-bold text-slate-800 dark:text-white flex items-center gap-2"},z={class:"overflow-x-auto"},G={class:"w-full text-left text-sm text-slate-600 dark:text-slate-400"},K={class:"divide-y divide-slate-200 dark:divide-slate-700"},Q={class:"px-6 py-4"},R={class:"font-bold text-slate-900 dark:text-white"},H={class:"text-xs text-slate-500"},W={class:"px-6 py-4 text-center font-medium"},X={class:"px-6 py-4 text-center text-slate-500"},Y={class:"px-6 py-4 text-center font-medium text-slate-900 dark:text-white"},Z={class:"px-6 py-4"},ee=["onUpdate:modelValue","max"],te={key:0,class:"text-red-500 text-[10px] mt-1 text-right"},re={class:"flex justify-end"},se=["disabled"],ve={__name:"Create",props:{order:Object},setup(c){const b=c,o=k({purchase_order_id:b.order.id,delivery_note_number:"",receipt_date:new Date().toISOString().split("T")[0],driver_name:"",truck_number:"",notes:"",items:b.order.items.map(d=>({id:d.id,product_name:d.product?.name||d.description,sku:d.product?.sku||"-",qty_ordered:d.qty,qty_received:d.qty_received,qty_remaining:d.qty_remaining,qty_delivery:d.qty_remaining,unit:d.unit?.code||"Pcs"}))}),_=()=>{confirm("Create Delivery Note? This will notify the warehouse of incoming goods.")&&o.post(route("portal.deliveries.store"))},f=V(()=>o.items.some(d=>d.qty_delivery>0));return(d,t)=>(n(),v(C,{title:"Create Delivery"},{default:g(()=>[e("div",P,[e("div",I,[u(s(w),{href:d.route("portal.purchase-orders.show",c.order.id),class:"p-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-500 hover:text-slate-700 dark:hover:text-white transition-colors"},{default:g(()=>[u(s(U),{class:"h-5 w-5"})]),_:1},8,["href"]),e("div",null,[t[5]||(t[5]=e("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Create Delivery",-1)),e("p",L," For PO #"+l(c.order.po_number)+" â€¢ "+l(c.order.warehouse?.name),1)])]),e("form",{onSubmit:q(_,["prevent"]),class:"space-y-6"},[e("div",T,[e("h2",F,[u(s(y),{class:"w-5 h-5 text-indigo-500"}),t[6]||(t[6]=x(" Delivery Note Details ",-1))]),e("div",O,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},[x(" Delivery Note Number (No. Surat Jalan) "),e("span",{class:"text-red-500"},"*")],-1)),a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s(o).delivery_note_number=r),type:"text",required:"",class:"w-full px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"e.g., SJ-2026/001"},null,512),[[i,s(o).delivery_note_number]]),s(o).errors.delivery_note_number?(n(),p("p",j,l(s(o).errors.delivery_note_number),1)):m("",!0)]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},[x(" Delivery Date "),e("span",{class:"text-red-500"},"*")],-1)),a(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s(o).receipt_date=r),type:"date",required:"",class:"w-full px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none"},null,512),[[i,s(o).receipt_date]]),s(o).errors.receipt_date?(n(),p("p",M,l(s(o).errors.receipt_date),1)):m("",!0)]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Driver / Expeditor Name ",-1)),a(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>s(o).driver_name=r),type:"text",class:"w-full px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"e.g. Budi Santoso"},null,512),[[i,s(o).driver_name]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Truck License Plate ",-1)),a(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>s(o).truck_number=r),type:"text",class:"w-full px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"e.g. B 1234 CD"},null,512),[[i,s(o).truck_number]])]),e("div",A,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Additional Notes ",-1)),a(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=r=>s(o).notes=r),rows:"2",class:"w-full px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"Any other remarks..."},null,512),[[i,s(o).notes]])])])]),e("div",E,[e("div",J,[e("h2",$,[u(s(B),{class:"w-5 h-5 text-indigo-500"}),t[12]||(t[12]=x(" Items to Deliver ",-1))])]),e("div",z,[e("table",G,[t[13]||(t[13]=e("thead",{class:"bg-slate-50 dark:bg-slate-700/50 uppercase text-xs font-bold text-slate-500"},[e("tr",null,[e("th",{class:"px-6 py-4"},"Product"),e("th",{class:"px-6 py-4 text-center"},"Ordered"),e("th",{class:"px-6 py-4 text-center"},"Prev. Delivered"),e("th",{class:"px-6 py-4 text-center"},"Remaining"),e("th",{class:"px-6 py-4 w-40"},"Qty to Deliver")])],-1)),e("tbody",K,[(n(!0),p(D,null,N(s(o).items,(r,oe)=>(n(),p("tr",{key:r.id},[e("td",Q,[e("p",R,l(r.product_name),1),e("p",H,"SKU: "+l(r.sku),1)]),e("td",W,l(Number(r.qty_ordered).toLocaleString("id-ID"))+" "+l(r.unit),1),e("td",X,l(Number(r.qty_received).toLocaleString("id-ID")),1),e("td",Y,l(Number(r.qty_remaining).toLocaleString("id-ID")),1),e("td",Z,[a(e("input",{"onUpdate:modelValue":h=>r.qty_delivery=h,type:"number",min:"0",max:r.qty_remaining,step:"0.01",class:S(["w-full px-3 py-2 rounded-lg border-2 border-slate-200 dark:border-slate-600 focus:border-indigo-500 bg-white dark:bg-slate-900 text-slate-900 dark:text-white font-bold text-right outline-none",{"border-red-500 focus:border-red-500":r.qty_delivery>r.qty_remaining}])},null,10,ee),[[i,r.qty_delivery]]),r.qty_delivery>r.qty_remaining?(n(),p("p",te,"Max: "+l(r.qty_remaining),1)):m("",!0)])]))),128))])])])]),e("div",re,[e("button",{type:"submit",disabled:s(o).processing||!f.value,class:"px-6 py-3 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-500/30 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[u(s(y),{class:"w-5 h-5"}),t[14]||(t[14]=x(" Generate Delivery Note ",-1))],8,se)])],32)])]),_:1}))}};export{ve as default};
