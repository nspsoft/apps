import{c as r,b as e,o as l,f as T,a as o,u as s,h as se,w as O,F as j,g as P,n as F,d,i as x,j as p,E as N,t as u,A as ae,e as A,k as H,v as y,s as E,x as le,D as re,m as B,B as oe}from"./app-CvB5BDK_.js";import{b as de,_ as ne}from"./AppLayout-BnwbydA6.js";import{r as U}from"./ArrowDownTrayIcon-cIn6TwHM.js";import{a as _,r as $}from"./WrenchScrewdriverIcon-CLVZwAek.js";import{r as ie}from"./DocumentArrowDownIcon-DOT_GUDU.js";import{r as z}from"./CubeIcon-BpCTfNIZ.js";import{r as L}from"./ArrowUpTrayIcon-UzLd-Fkx.js";import{r as ue}from"./TrashIcon-C14Ou9ft.js";import{r as me}from"./ExclamationTriangleIcon-YNppDJsf.js";import{r as I}from"./CloudArrowUpIcon-CYT2Nhtx.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./XMarkIcon-3pvgQV3l.js";import"./SunIcon-C98hNgLB.js";import"./DocumentPlusIcon-ClbdTCyx.js";import"./TruckIcon-Ud4N7Mwn.js";import"./DocumentTextIcon-BoWG5iAs.js";import"./ShoppingCartIcon-uT48P5Xi.js";import"./MapPinIcon-CRCQJ9vI.js";import"./SparklesIcon-1zQaDWkV.js";import"./ClockIcon-EI8kN292.js";import"./CheckCircleIcon-DwtALMks.js";import"./ShieldCheckIcon-BwItAVaK.js";function pe(w,v){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"})])}const be={class:"flex items-center gap-3"},ce={class:"p-2 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl shadow-lg"},xe={class:"p-6 space-y-6"},ge={class:"flex gap-2 border-b border-slate-200 dark:border-slate-700 pb-2"},fe=["onClick"],ke={key:0},ve={key:1},we={key:2},he={key:3},ye={key:0,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Se={class:"glass-card p-6 rounded-2xl"},Re={class:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2"},Ce={class:"space-y-3"},Me={class:"space-y-2"},Te={key:0,class:"space-y-3"},je={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},Ae={class:"grid grid-cols-1 gap-2"},Ee=["value"],Be={class:"text-xl"},De={class:"font-medium text-slate-900 dark:text-white"},Pe={class:"text-xs text-slate-500"},Fe=["disabled"],_e={key:0,class:"flex items-center justify-center gap-2"},$e={key:1,class:"flex items-center justify-center gap-2"},Ue={class:"glass-card p-6 rounded-2xl"},Le={class:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center justify-between"},Ve={class:"flex items-center gap-2"},Oe={class:"text-sm font-normal text-slate-500"},Ne={key:0,class:"text-center py-8 text-slate-500"},He={key:1,class:"space-y-2 max-h-96 overflow-y-auto"},ze={class:"flex-1 min-w-0"},Ie={class:"font-medium text-slate-900 dark:text-white text-sm truncate"},Je={class:"text-xs text-slate-500"},Ke={class:"flex items-center gap-1 ml-2"},Qe=["onClick"],Ye=["onClick"],Ze=["onClick"],qe={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},We={class:"glass-card p-6 rounded-2xl"},Ge={class:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2"},Xe=["value"],et={class:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800"},tt={class:"flex items-start gap-2"},st=["disabled"],at={key:0,class:"flex items-center justify-center gap-2"},lt={key:1,class:"flex items-center justify-center gap-2"},rt={class:"glass-card p-6 rounded-2xl"},ot={class:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2"},dt=["disabled"],nt={key:0,class:"flex items-center justify-center gap-2"},it={key:1,class:"flex items-center justify-center gap-2"},ut={key:2,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},mt={class:"glass-card p-6 rounded-2xl border-2 border-amber-200 dark:border-amber-800"},pt={class:"text-lg font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-2"},bt=["disabled"],ct={class:"glass-card p-6 rounded-2xl border-2 border-red-200 dark:border-red-800"},xt={class:"text-lg font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-2"},gt=["disabled"],ft={class:"glass-card p-6 rounded-2xl border-2 border-purple-200 dark:border-purple-800"},kt={class:"text-lg font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-2"},vt=["value"],wt=["disabled"],ht={key:3,class:"space-y-6"},yt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},St={class:"glass-card p-6 rounded-2xl border-2 border-amber-200 dark:border-amber-800"},Rt={class:"flex items-start justify-between mb-4"},Ct={class:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2"},Mt={class:"glass-card p-6 rounded-2xl border-2 border-indigo-200 dark:border-indigo-800"},Tt={class:"flex items-start justify-between mb-4"},jt={class:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2"},At={class:"glass-card p-6 rounded-2xl border-2 border-emerald-200 dark:border-emerald-800"},Et={class:"flex items-start justify-between mb-4"},Bt={class:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2"},Dt={class:"glass-card p-6 rounded-2xl border-2 border-rose-200 dark:border-rose-800"},Pt={class:"flex items-start justify-between mb-4"},Ft={class:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2"},_t={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},$t={class:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl p-6 max-w-md w-full"},Ut={class:"text-lg font-bold text-slate-900 dark:text-white mb-4"},Lt={class:"text-slate-600 dark:text-slate-400 mb-6"},Vt={class:"flex gap-3"},is={__name:"DatabaseManagement",props:{modules:Array,backups:Array},setup(w){const v=B("backup"),m=B(!1),h=B(null),S=B(""),R=B(""),C=B("warning"),n=T({type:"full",modules:[]}),b=T({filename:"",password:""}),g=T({file:null,password:""}),f=T({password:"",confirmation:""}),k=T({password:"",confirmation:""}),c=T({module:"",password:""}),M={sales:{name:"Sales",icon:"ðŸ“Š",desc:"Customers, Quotations, Sales Orders, DO, Invoices"},purchasing:{name:"Purchasing",icon:"ðŸ›’",desc:"Suppliers, PR, PO, GR, Purchase Invoices"},inventory:{name:"Inventory",icon:"ðŸ“¦",desc:"Products, Stocks, Warehouses, Movements"},manufacturing:{name:"Manufacturing",icon:"ðŸ­",desc:"BOM, Work Orders, Production, Machines"},hr:{name:"HR & Payroll",icon:"ðŸ‘¥",desc:"Employees, Attendance, Payrolls"},finance:{name:"Finance",icon:"ðŸ’°",desc:"Accounts, Journals, Ledgers"},settings:{name:"Settings",icon:"âš™ï¸",desc:"Users, Roles, Company Settings"},projects:{name:"Projects",icon:"ðŸš€",desc:"Projects, Tasks, Members"},crm:{name:"CRM",icon:"ðŸ¤",desc:"Leads, Opportunities, Campaigns"},logistics:{name:"Logistics",icon:"ðŸšš",desc:"Fleet, Delivery Schedules"},maintenance:{name:"Maintenance",icon:"ðŸ”§",desc:"Schedules, Logs, Spareparts"}},V=oe(()=>n.modules.length),J=()=>{n.post(route("settings.database.backup"),{preserveScroll:!0,onSuccess:()=>{n.reset(),E.reload({only:["backups"]})}})},K=i=>{window.location.href=route("settings.database.download",i)},Q=i=>{confirm("Are you sure you want to delete this backup?")&&E.delete(route("settings.database.delete",i),{preserveScroll:!0})},Y=i=>{b.filename=i,v.value="restore"},Z=()=>{h.value=()=>{b.post(route("settings.database.restore"),{preserveScroll:!0,onSuccess:()=>{b.reset(),m.value=!1}})},S.value="Confirm Restore",R.value="This will overwrite current data. A backup will be created before restore. Continue?",C.value="warning",m.value=!0},q=()=>{h.value=()=>{g.post(route("settings.database.upload-restore"),{preserveScroll:!0,onSuccess:()=>{g.reset(),m.value=!1}})},S.value="Confirm Upload & Restore",R.value="This will upload and restore from the selected file. Continue?",C.value="warning",m.value=!0},W=()=>{h.value=()=>{f.post(route("settings.database.soft-reset"),{preserveScroll:!0,onSuccess:()=>{f.reset(),m.value=!1}})},S.value="âš ï¸ Soft Reset",R.value="This will DELETE all transaction data (Sales, Purchases, etc.) but KEEP master data. This action CANNOT be undone!",C.value="danger",m.value=!0},G=()=>{h.value=()=>{k.post(route("settings.database.hard-reset"),{preserveScroll:!0,onSuccess:()=>{k.reset(),m.value=!1}})},S.value="ðŸš¨ HARD RESET",R.value="This will COMPLETELY RESET the database to initial state. ALL DATA WILL BE LOST! A backup will be created before reset.",C.value="danger",m.value=!0},X=()=>{h.value=()=>{c.post(route("settings.database.module-reset"),{preserveScroll:!0,onSuccess:()=>{c.reset(),m.value=!1}})},S.value="Module Reset",R.value=`This will reset all data in the "${M[c.module]?.name||c.module}" module. Continue?`,C.value="warning",m.value=!0},ee=i=>{g.file=i.target.files[0]},te=i=>new Date(i).toLocaleString("id-ID");return(i,t)=>(l(),r(j,null,[o(s(se),{title:"Database Management"}),o(ne,{title:"Database Management"},{header:O(()=>[e("div",be,[e("div",ce,[o(s(pe),{class:"h-6 w-6 text-white"})]),t[19]||(t[19]=e("div",null,[e("h2",{class:"text-xl font-bold text-slate-900 dark:text-white"},"Database Management"),e("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Backup, Restore, and Reset Database")],-1))])]),default:O(()=>[e("div",xe,[e("div",ge,[(l(),r(j,null,P(["backup","restore","reset","maintenance"],a=>e("button",{key:a,onClick:D=>v.value=a,class:F(["px-4 py-2 rounded-lg font-medium text-sm transition-all",v.value===a?"bg-indigo-600 text-white shadow-lg":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"])},[a==="backup"?(l(),r("span",ke,"ðŸ“¦ Backup")):a==="restore"?(l(),r("span",ve,"ðŸ“¥ Restore")):a==="reset"?(l(),r("span",we,"ðŸ”„ Reset")):(l(),r("span",he,"ðŸ”§ Maintenance"))],10,fe)),64))]),v.value==="backup"?(l(),r("div",ye,[e("div",Se,[e("h3",Re,[o(s(U),{class:"h-5 w-5 text-indigo-500"}),t[20]||(t[20]=d(" Create Backup ",-1))]),e("form",{onSubmit:x(J,["prevent"]),class:"space-y-4"},[e("div",Ce,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"}," Backup Type ",-1)),e("div",Me,[e("label",{class:F(["flex items-center gap-3 p-3 rounded-xl border border-slate-200 dark:border-slate-700 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",s(n).type==="full"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":""])},[p(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=a=>s(n).type=a),value:"full",class:"rounded-full text-indigo-600"},null,512),[[N,s(n).type]]),t[21]||(t[21]=e("div",null,[e("p",{class:"font-medium text-slate-900 dark:text-white"},"Full Database"),e("p",{class:"text-xs text-slate-500"},"Backup entire database (Recommended)")],-1))],2),e("label",{class:F(["flex items-center gap-3 p-3 rounded-xl border border-slate-200 dark:border-slate-700 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",s(n).type==="partial"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":""])},[p(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=a=>s(n).type=a),value:"partial",class:"rounded-full text-indigo-600"},null,512),[[N,s(n).type]]),t[22]||(t[22]=e("div",null,[e("p",{class:"font-medium text-slate-900 dark:text-white"},"Partial (Select Modules)"),e("p",{class:"text-xs text-slate-500"},"Backup specific modules only")],-1))],2)])]),s(n).type==="partial"?(l(),r("div",Te,[e("label",je," Select Modules ("+u(V.value)+" selected) ",1),e("div",Ae,[(l(!0),r(j,null,P(w.modules,a=>(l(),r("label",{key:a,class:F(["flex items-center gap-3 p-3 rounded-xl border border-slate-200 dark:border-slate-700 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",s(n).modules.includes(a)?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":""])},[p(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=D=>s(n).modules=D),value:a,class:"rounded text-indigo-600"},null,8,Ee),[[ae,s(n).modules]]),e("span",Be,u(M[a]?.icon||"ðŸ“"),1),e("div",null,[e("p",De,u(M[a]?.name||a),1),e("p",Pe,u(M[a]?.desc||""),1)])],2))),128))])])):A("",!0),e("button",{type:"submit",disabled:s(n).processing||s(n).type==="partial"&&V.value===0,class:"w-full py-3 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[s(n).processing?(l(),r("span",_e,[o(s(_),{class:"h-5 w-5 animate-spin"}),t[24]||(t[24]=d(" Creating Backup... ",-1))])):(l(),r("span",$e,[o(s(U),{class:"h-5 w-5"}),t[25]||(t[25]=d(" Create Backup ",-1))]))],8,Fe)],32)]),e("div",Ue,[e("h3",Le,[e("span",Ve,[o(s(ie),{class:"h-5 w-5 text-emerald-500"}),t[26]||(t[26]=d(" Available Backups ",-1))]),e("span",Oe,u(w.backups.length)+" files",1)]),w.backups.length===0?(l(),r("div",Ne,[o(s(z),{class:"h-12 w-12 mx-auto mb-2 opacity-50"}),t[27]||(t[27]=e("p",null,"No backups available",-1))])):(l(),r("div",He,[(l(!0),r(j,null,P(w.backups,a=>(l(),r("div",{key:a.filename,class:"flex items-center justify-between p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"},[e("div",ze,[e("p",Ie,u(a.filename),1),e("p",Je,u(a.size_human)+" â€¢ "+u(te(a.created_at)),1)]),e("div",Ke,[e("button",{onClick:D=>K(a.filename),class:"p-2 text-indigo-600 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",title:"Download"},[o(s(U),{class:"h-4 w-4"})],8,Qe),e("button",{onClick:D=>Y(a.filename),class:"p-2 text-emerald-600 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors",title:"Restore"},[o(s(L),{class:"h-4 w-4"})],8,Ye),e("button",{onClick:D=>Q(a.filename),class:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete"},[o(s(ue),{class:"h-4 w-4"})],8,Ze)])]))),128))]))])])):A("",!0),v.value==="restore"?(l(),r("div",qe,[e("div",We,[e("h3",Ge,[o(s(L),{class:"h-5 w-5 text-emerald-500"}),t[28]||(t[28]=d(" Restore from Server Backup ",-1))]),e("form",{onSubmit:x(Z,["prevent"]),class:"space-y-4"},[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Select Backup File ",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>s(b).filename=a),class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white"},[t[29]||(t[29]=e("option",{value:""},"-- Select a backup --",-1)),(l(!0),r(j,null,P(w.backups,a=>(l(),r("option",{key:a.filename,value:a.filename},u(a.filename)+" ("+u(a.size_human)+") ",9,Xe))),128))],512),[[H,s(b).filename]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Enter Your Password ",-1)),p(e("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=a=>s(b).password=a),class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white",placeholder:"Enter your password to confirm"},null,512),[[y,s(b).password]])]),e("div",et,[e("div",tt,[o(s(me),{class:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),t[32]||(t[32]=e("p",{class:"text-sm text-amber-800 dark:text-amber-200"},[d(" Restore will "),e("strong",null,"overwrite"),d(" current data. A backup will be created automatically before restore. ")],-1))])]),e("button",{type:"submit",disabled:s(b).processing||!s(b).filename||!s(b).password,class:"w-full py-3 px-4 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[s(b).processing?(l(),r("span",at,[o(s(_),{class:"h-5 w-5 animate-spin"}),t[33]||(t[33]=d(" Restoring... ",-1))])):(l(),r("span",lt,[o(s(L),{class:"h-5 w-5"}),t[34]||(t[34]=d(" Restore Database ",-1))]))],8,st)],32)]),e("div",rt,[e("h3",ot,[o(s(I),{class:"h-5 w-5 text-blue-500"}),t[35]||(t[35]=d(" Upload & Restore ",-1))]),e("form",{onSubmit:x(q,["prevent"]),class:"space-y-4"},[e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Upload Backup File (.sql or .sql.gz) ",-1)),e("input",{type:"file",onChange:ee,accept:".sql,.gz",class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-indigo-50 dark:file:bg-indigo-900/30 file:text-indigo-700 dark:file:text-indigo-300"},null,32)]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Enter Your Password ",-1)),p(e("input",{type:"password","onUpdate:modelValue":t[5]||(t[5]=a=>s(g).password=a),class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white",placeholder:"Enter your password to confirm"},null,512),[[y,s(g).password]])]),e("button",{type:"submit",disabled:s(g).processing||!s(g).file||!s(g).password,class:"w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[s(g).processing?(l(),r("span",nt,[o(s(_),{class:"h-5 w-5 animate-spin"}),t[38]||(t[38]=d(" Uploading & Restoring... ",-1))])):(l(),r("span",it,[o(s(I),{class:"h-5 w-5"}),t[39]||(t[39]=d(" Upload & Restore ",-1))]))],8,dt)],32)])])):A("",!0),v.value==="reset"?(l(),r("div",ut,[e("div",mt,[e("h3",pt,[o(s(_),{class:"h-5 w-5 text-amber-500"}),t[40]||(t[40]=d(" Soft Reset ",-1))]),t[43]||(t[43]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400 mb-4"}," Clear all transaction data but keep master data (products, customers, suppliers, etc.) ",-1)),e("form",{onSubmit:x(W,["prevent"]),class:"space-y-4"},[e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},' Type "SOFT RESET" to confirm ',-1)),p(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=a=>s(f).confirmation=a),class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white",placeholder:"SOFT RESET"},null,512),[[y,s(f).confirmation]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Password ",-1)),p(e("input",{type:"password","onUpdate:modelValue":t[7]||(t[7]=a=>s(f).password=a),class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white"},null,512),[[y,s(f).password]])]),e("button",{type:"submit",disabled:s(f).processing||s(f).confirmation!=="SOFT RESET"||!s(f).password,class:"w-full py-3 px-4 bg-gradient-to-r from-amber-500 to-orange-500 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"}," Soft Reset ",8,bt)],32)]),e("div",ct,[e("h3",xt,[o(s(de),{class:"h-5 w-5 text-red-500"}),t[44]||(t[44]=d(" Hard Reset ",-1))]),t[47]||(t[47]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400 mb-4"},[e("strong",{class:"text-red-600"},"DANGER!"),d(" Reset entire database to initial state. ALL data will be lost! ")],-1)),e("form",{onSubmit:x(G,["prevent"]),class:"space-y-4"},[e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},' Type "HARD RESET" to confirm ',-1)),p(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=a=>s(k).confirmation=a),class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white",placeholder:"HARD RESET"},null,512),[[y,s(k).confirmation]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Password ",-1)),p(e("input",{type:"password","onUpdate:modelValue":t[9]||(t[9]=a=>s(k).password=a),class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white"},null,512),[[y,s(k).password]])]),e("button",{type:"submit",disabled:s(k).processing||s(k).confirmation!=="HARD RESET"||!s(k).password,class:"w-full py-3 px-4 bg-gradient-to-r from-red-600 to-rose-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"}," ðŸš¨ Hard Reset ",8,gt)],32)]),e("div",ft,[e("h3",kt,[o(s(z),{class:"h-5 w-5 text-purple-500"}),t[48]||(t[48]=d(" Module Reset ",-1))]),t[52]||(t[52]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400 mb-4"}," Reset specific module only. Other modules will remain intact. ",-1)),e("form",{onSubmit:x(X,["prevent"]),class:"space-y-4"},[e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Select Module ",-1)),p(e("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>s(c).module=a),class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white"},[t[49]||(t[49]=e("option",{value:""},"-- Select module --",-1)),(l(!0),r(j,null,P(w.modules,a=>(l(),r("option",{key:a,value:a},u(M[a]?.icon||"ðŸ“")+" "+u(M[a]?.name||a),9,vt))),128))],512),[[H,s(c).module]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Password ",-1)),p(e("input",{type:"password","onUpdate:modelValue":t[11]||(t[11]=a=>s(c).password=a),class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white"},null,512),[[y,s(c).password]])]),e("button",{type:"submit",disabled:s(c).processing||!s(c).module||!s(c).password,class:"w-full py-3 px-4 bg-gradient-to-r from-purple-600 to-violet-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"}," Reset Module ",8,wt)],32)])])):A("",!0),v.value==="maintenance"?(l(),r("div",ht,[t[69]||(t[69]=e("div",{class:"glass-card p-6 rounded-2xl bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border border-indigo-200 dark:border-indigo-800"},[e("h3",{class:"text-xl font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2"}," ðŸ“š Panduan System Maintenance "),e("p",{class:"text-slate-600 dark:text-slate-400 mb-4"}," Halaman ini memungkinkan Anda menjalankan perintah maintenance langsung dari browser tanpa perlu akses SSH atau Terminal server. Berikut urutan yang disarankan setelah update sistem: "),e("div",{class:"grid grid-cols-1 md:grid-cols-4 gap-3"},[e("div",{class:"flex items-center gap-2 p-3 bg-white dark:bg-slate-800 rounded-xl"},[e("span",{class:"flex items-center justify-center w-8 h-8 bg-amber-100 dark:bg-amber-900/30 text-amber-600 rounded-full font-bold"},"1"),e("span",{class:"text-sm text-slate-700 dark:text-slate-300"},"Run Migrations")]),e("div",{class:"flex items-center gap-2 p-3 bg-white dark:bg-slate-800 rounded-xl"},[e("span",{class:"flex items-center justify-center w-8 h-8 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 rounded-full font-bold"},"2"),e("span",{class:"text-sm text-slate-700 dark:text-slate-300"},"Sync Permissions")]),e("div",{class:"flex items-center gap-2 p-3 bg-white dark:bg-slate-800 rounded-xl"},[e("span",{class:"flex items-center justify-center w-8 h-8 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 rounded-full font-bold"},"3"),e("span",{class:"text-sm text-slate-700 dark:text-slate-300"},"Sync Numbering")]),e("div",{class:"flex items-center gap-2 p-3 bg-white dark:bg-slate-800 rounded-xl"},[e("span",{class:"flex items-center justify-center w-8 h-8 bg-rose-100 dark:bg-rose-900/30 text-rose-600 rounded-full font-bold"},"4"),e("span",{class:"text-sm text-slate-700 dark:text-slate-300"},"Clear Cache")])])],-1)),e("div",yt,[e("div",St,[e("div",Rt,[e("div",null,[t[54]||(t[54]=e("span",{class:"inline-flex items-center justify-center w-8 h-8 bg-amber-100 dark:bg-amber-900/30 text-amber-600 rounded-full font-bold text-sm mb-2"},"1",-1)),e("h3",Ct,[o(s($),{class:"h-5 w-5 text-amber-500"}),t[53]||(t[53]=d(" Run Database Migrations ",-1))])])]),t[56]||(t[56]=e("div",{class:"space-y-3 mb-4"},[e("div",{class:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl"},[e("p",{class:"text-sm font-medium text-amber-800 dark:text-amber-200 mb-1"},"ðŸŽ¯ Fungsi:"),e("p",{class:"text-sm text-amber-700 dark:text-amber-300"}," Membuat tabel-tabel baru di database yang diperlukan oleh fitur terbaru. ")]),e("div",{class:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl"},[e("p",{class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"ðŸ“ Kapan digunakan:"),e("ul",{class:"text-sm text-slate-600 dark:text-slate-400 list-disc list-inside space-y-1"},[e("li",null,[d("Setelah melakukan "),e("code",{class:"bg-slate-200 dark:bg-slate-700 px-1 rounded"},"git pull")]),e("li",null,'Jika muncul error "Table not found"'),e("li",null,"Setelah ada update fitur baru")])]),e("div",{class:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl"},[e("p",{class:"text-sm font-medium text-green-700 dark:text-green-300"},"âœ… Aman dijalankan berkali-kali (tidak akan duplikat)")])],-1)),e("form",{onSubmit:t[12]||(t[12]=x(a=>s(E).post(i.route("settings.database.run-migrations"),{},{preserveScroll:!0}),["prevent"]))},[...t[55]||(t[55]=[e("button",{type:"submit",class:"w-full py-3 px-4 bg-gradient-to-r from-amber-600 to-orange-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2"}," âš™ï¸ Run Migrations ",-1)])],32)]),e("div",Mt,[e("div",Tt,[e("div",null,[t[58]||(t[58]=e("span",{class:"inline-flex items-center justify-center w-8 h-8 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 rounded-full font-bold text-sm mb-2"},"2",-1)),e("h3",jt,[o(s($),{class:"h-5 w-5 text-indigo-500"}),t[57]||(t[57]=d(" Sync Roles & Permissions ",-1))])])]),t[60]||(t[60]=e("div",{class:"space-y-3 mb-4"},[e("div",{class:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl"},[e("p",{class:"text-sm font-medium text-indigo-800 dark:text-indigo-200 mb-1"},"ðŸŽ¯ Fungsi:"),e("p",{class:"text-sm text-indigo-700 dark:text-indigo-300"},' Mendaftarkan role dan permission baru ke database agar muncul di menu "Roles & Permissions". ')]),e("div",{class:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl"},[e("p",{class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"ðŸ“ Kapan digunakan:"),e("ul",{class:"text-sm text-slate-600 dark:text-slate-400 list-disc list-inside space-y-1"},[e("li",null,"Menu baru tidak muncul di daftar permission"),e("li",null,"Role baru tidak terdaftar"),e("li",null,"Setelah ada update modul baru")])]),e("div",{class:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl"},[e("p",{class:"text-sm font-medium text-green-700 dark:text-green-300"},"âœ… Tidak menghapus permission yang sudah ada")])],-1)),e("form",{onSubmit:t[13]||(t[13]=x(a=>s(E).post(i.route("settings.database.sync-permissions"),{},{preserveScroll:!0}),["prevent"]))},[...t[59]||(t[59]=[e("button",{type:"submit",class:"w-full py-3 px-4 bg-gradient-to-r from-indigo-600 to-blue-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2"}," ðŸ›¡ï¸ Sync Permissions ",-1)])],32)]),e("div",At,[e("div",Et,[e("div",null,[t[62]||(t[62]=e("span",{class:"inline-flex items-center justify-center w-8 h-8 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 rounded-full font-bold text-sm mb-2"},"3",-1)),e("h3",Bt,[o(s($),{class:"h-5 w-5 text-emerald-500"}),t[61]||(t[61]=d(" Sync Document Numbering ",-1))])])]),t[64]||(t[64]=e("div",{class:"space-y-3 mb-4"},[e("div",{class:"p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl"},[e("p",{class:"text-sm font-medium text-emerald-800 dark:text-emerald-200 mb-1"},"ðŸŽ¯ Fungsi:"),e("p",{class:"text-sm text-emerald-700 dark:text-emerald-300"}," Menambahkan format penomoran dokumen default (SO, PO, Invoice, dll) untuk tipe dokumen yang belum ada. ")]),e("div",{class:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl"},[e("p",{class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"ðŸ“ Kapan digunakan:"),e("ul",{class:"text-sm text-slate-600 dark:text-slate-400 list-disc list-inside space-y-1"},[e("li",null,"Menu Document Numbering kosong"),e("li",null,"Ada tipe dokumen baru yang perlu format nomor"),e("li",null,"Error saat generate nomor dokumen")])]),e("div",{class:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl"},[e("p",{class:"text-sm font-medium text-green-700 dark:text-green-300"},"âœ… Tidak mengubah format yang sudah Anda kustomisasi")])],-1)),e("form",{onSubmit:t[14]||(t[14]=x(a=>s(E).post(i.route("settings.database.sync-numbering"),{},{preserveScroll:!0}),["prevent"]))},[...t[63]||(t[63]=[e("button",{type:"submit",class:"w-full py-3 px-4 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2"}," ðŸ”¢ Sync Numbering ",-1)])],32)]),e("div",Dt,[e("div",Pt,[e("div",null,[t[66]||(t[66]=e("span",{class:"inline-flex items-center justify-center w-8 h-8 bg-rose-100 dark:bg-rose-900/30 text-rose-600 rounded-full font-bold text-sm mb-2"},"4",-1)),e("h3",Ft,[o(s($),{class:"h-5 w-5 text-rose-500"}),t[65]||(t[65]=d(" Clear System Cache ",-1))])])]),t[68]||(t[68]=e("div",{class:"space-y-3 mb-4"},[e("div",{class:"p-3 bg-rose-50 dark:bg-rose-900/20 rounded-xl"},[e("p",{class:"text-sm font-medium text-rose-800 dark:text-rose-200 mb-1"},"ðŸŽ¯ Fungsi:"),e("p",{class:"text-sm text-rose-700 dark:text-rose-300"}," Membersihkan semua cache sistem (route, config, view, permission) agar perubahan terbaru langsung terlihat. ")]),e("div",{class:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl"},[e("p",{class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"ðŸ“ Kapan digunakan:"),e("ul",{class:"text-sm text-slate-600 dark:text-slate-400 list-disc list-inside space-y-1"},[e("li",null,"Menu tidak berubah setelah update"),e("li",null,"Permission sudah di-sync tapi belum muncul"),e("li",null,"Tampilan tidak sesuai dengan yang seharusnya"),e("li",null,"Setelah mengubah konfigurasi sistem")])]),e("div",{class:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl"},[e("p",{class:"text-sm font-medium text-green-700 dark:text-green-300"},"âœ… Tidak menghapus data apapun, hanya file cache sementara")])],-1)),e("form",{onSubmit:t[15]||(t[15]=x(a=>s(E).post(i.route("settings.database.clear-cache"),{},{preserveScroll:!0}),["prevent"]))},[...t[67]||(t[67]=[e("button",{type:"submit",class:"w-full py-3 px-4 bg-gradient-to-r from-rose-600 to-pink-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2"}," ðŸ—‘ï¸ Clear Cache ",-1)])],32)])]),t[70]||(t[70]=e("div",{class:"glass-card p-6 rounded-2xl"},[e("h3",{class:"text-lg font-bold text-slate-900 dark:text-white mb-4"},"â“ Pertanyaan Umum (FAQ)"),e("div",{class:"space-y-4"},[e("div",{class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl"},[e("p",{class:"font-medium text-slate-900 dark:text-white mb-1"},"Q: Apakah aman menjalankan semua tombol ini?"),e("p",{class:"text-sm text-slate-600 dark:text-slate-400"}," A: Ya, sangat aman! Semua aksi di halaman ini dirancang untuk tidak menghapus data penting. Mereka hanya menambahkan data baru atau membersihkan cache sementara. ")]),e("div",{class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl"},[e("p",{class:"font-medium text-slate-900 dark:text-white mb-1"},"Q: Berapa lama prosesnya?"),e("p",{class:"text-sm text-slate-600 dark:text-slate-400"}," A: Biasanya hanya beberapa detik (1-5 detik). Jika lebih lama, tunggu saja sampai muncul notifikasi sukses. ")]),e("div",{class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl"},[e("p",{class:"font-medium text-slate-900 dark:text-white mb-1"},'Q: Kenapa ada error "500 Server Error"?'),e("p",{class:"text-sm text-slate-600 dark:text-slate-400"},' A: Biasanya karena ada tabel yang belum dibuat. Jalankan "Run Migrations" terlebih dahulu, lalu coba lagi aksi yang error. ')]),e("div",{class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl"},[e("p",{class:"font-medium text-slate-900 dark:text-white mb-1"},"Q: Apakah perlu menjalankan semua tombol setiap update?"),e("p",{class:"text-sm text-slate-600 dark:text-slate-400"}," A: Tidak selalu. Jalankan sesuai kebutuhan. Jika tidak ada masalah setelah update, Anda tidak perlu menjalankan apapun. ")])])],-1))])):A("",!0)]),(l(),le(re,{to:"body"},[m.value?(l(),r("div",_t,[e("div",{class:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm",onClick:t[16]||(t[16]=a=>m.value=!1)}),e("div",$t,[e("h3",Ut,u(S.value),1),e("p",Lt,u(R.value),1),e("div",Vt,[e("button",{onClick:t[17]||(t[17]=a=>m.value=!1),class:"flex-1 py-2 px-4 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors"}," Cancel "),e("button",{onClick:t[18]||(t[18]=(...a)=>h.value&&h.value(...a)),class:F(["flex-1 py-2 px-4 rounded-xl text-white font-semibold transition-all",C.value==="danger"?"bg-red-600 hover:bg-red-700":"bg-amber-600 hover:bg-amber-700"])}," Confirm ",2)])])])):A("",!0)]))]),_:1})],64))}};export{is as default};
