import{f as N,c as i,a as r,u as l,h as Q,w as g,b as t,l as v,d as f,i as $,j as n,o as u,F as k,g as y,t as x,k as I,v as c,e as D,B as w}from"./app-BCBKi1k_.js";import{_ as P}from"./AppLayout-DX2dkimT.js";import{_ as j}from"./SearchableSelect-OjawSH7B.js";import{f as _}from"./helpers-DnzC1tLX.js";import{r as B}from"./ArrowLeftIcon--0C6VQDB.js";import{r as O}from"./PlusIcon-DpxLXaqv.js";import{r as T}from"./TrashIcon-CJ0MX6oK.js";/* empty css            */import"./XMarkIcon-CR1YHsuF.js";import"./SunIcon-dRTQWuJW.js";import"./WrenchScrewdriverIcon-D_gsfLS0.js";import"./DocumentPlusIcon-D6H7x63g.js";import"./TruckIcon-CJ9SAQa6.js";import"./DocumentTextIcon-ClBD1EXx.js";import"./ShoppingCartIcon-BWExwhgN.js";import"./MapPinIcon-EUv6HXBa.js";import"./SparklesIcon-BPPR7QvY.js";import"./CubeIcon-1wplQBwg.js";import"./ClockIcon-B6Txtwpf.js";import"./CheckCircleIcon-Dpa_go5k.js";import"./ShieldCheckIcon-DOhb3W2Y.js";import"./transition-RhG0FgRm.js";const A={class:"max-w-full px-4 sm:px-6 lg:px-8 mx-auto"},F={class:"grid grid-cols-1 xl:grid-cols-12 gap-6"},M={class:"xl:col-span-4 glass-card rounded-2xl p-6 space-y-4"},L=["value"],z=["value"],E={class:"xl:col-span-8 glass-card rounded-2xl p-6"},W={class:"flex items-center justify-between mb-4"},G={class:"space-y-2 max-h-[600px] overflow-y-auto custom-scrollbar relative pr-2"},H={class:"col-span-12 sm:col-span-5"},J={class:"col-span-4 sm:col-span-2"},K=["onUpdate:modelValue"],R={class:"col-span-4 sm:col-span-2"},X=["onUpdate:modelValue"],Y={class:"col-span-4 sm:col-span-2"},Z={class:"w-full text-xs text-slate-900 dark:text-white font-bold text-right truncate"},tt={class:"col-span-12 sm:col-span-1 flex justify-end"},et=["onClick"],st={class:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-800 flex justify-end"},lt={class:"text-right"},ot={class:"text-xl font-bold text-slate-900 dark:text-white"},at={class:"glass-card rounded-2xl p-6"},rt={class:"flex justify-end gap-3"},dt=["disabled"],Qt={__name:"Create",props:{customers:Array,products:Array,quotationNumber:String},setup(b){const m=b,o=N({customer_id:"",quotation_date:new Date().toISOString().split("T")[0],valid_until:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],notes:"",items:[{product_id:"",qty:1,unit_price:0}]}),h=w(()=>m.products?m.products.filter(a=>a&&!a.name.startsWith("SO-")).map(a=>({id:a.id,label:`[${a.sku||"#"+a.id}] ${a.name}`})):[]),q=()=>{o.items.push({product_id:"",qty:1,unit_price:0})},V=(a,e)=>{if(!m.products)return;const s=m.products.find(p=>p.id===a.product_id);s&&(o.items[e].unit_price=parseFloat(s.selling_price||s.price||0))},S=a=>{o.items.splice(a,1)},C=w(()=>o.items.reduce((a,e)=>a+e.qty*e.unit_price,0)),U=()=>{o.post("/sales/quotations")};return(a,e)=>(u(),i(k,null,[r(l(Q),{title:"Create Quotation"}),r(P,{title:"Quotations"},{default:g(()=>[t("div",A,[r(l(v),{href:"/sales/quotations",class:"inline-flex items-center gap-2 mb-4 text-sm text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white"},{default:g(()=>[r(l(B),{class:"h-4 w-4"}),e[4]||(e[4]=f(" Back to List ",-1))]),_:1}),t("form",{onSubmit:$(U,["prevent"]),class:"space-y-6"},[t("div",F,[t("div",M,[e[10]||(e[10]=t("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white mb-4"},"Quotation Info",-1)),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"Quotation Number",-1)),t("input",{type:"text",value:b.quotationNumber,class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 py-2.5 text-slate-500 dark:text-slate-400 cursor-not-allowed",disabled:""},null,8,L)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"Customer",-1)),n(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>l(o).customer_id=s),class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",required:""},[e[6]||(e[6]=t("option",{value:""},"Select Customer",-1)),(u(!0),i(k,null,y(b.customers,s=>(u(),i("option",{key:s.id,value:s.id},x(s.name),9,z))),128))],512),[[I,l(o).customer_id]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"Quotation Date",-1)),n(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>l(o).quotation_date=s),class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",required:""},null,512),[[c,l(o).quotation_date]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"Valid Until",-1)),n(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>l(o).valid_until=s),class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",required:""},null,512),[[c,l(o).valid_until]])])]),t("div",E,[t("div",W,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white"},"Items",-1)),t("button",{type:"button",onClick:q,class:"text-sm font-medium text-blue-400 hover:text-blue-300 flex items-center gap-1"},[r(l(O),{class:"h-4 w-4"}),e[11]||(e[11]=f(" Add Item ",-1))])]),t("div",G,[e[17]||(e[17]=t("div",{class:"hidden sm:grid grid-cols-12 gap-3 px-3 py-2 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 rounded-lg sticky top-0 z-10"},[t("div",{class:"col-span-5 text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Product"),t("div",{class:"col-span-2 text-[10px] font-bold text-slate-500 uppercase tracking-widest text-center"},"Qty"),t("div",{class:"col-span-2 text-[10px] font-bold text-slate-500 uppercase tracking-widest text-right"},"Unit Price"),t("div",{class:"col-span-2 text-[10px] font-bold text-slate-500 uppercase tracking-widest text-right"},"Subtotal"),t("div",{class:"col-span-1"})],-1)),(u(!0),i(k,null,y(l(o).items,(s,p)=>(u(),i("div",{key:p,class:"grid grid-cols-12 gap-3 items-center bg-slate-50 dark:bg-slate-800/10 p-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30 transition-colors"},[t("div",H,[e[13]||(e[13]=t("label",{class:"sm:hidden block text-[10px] font-bold text-slate-500 uppercase mb-1"},"Product",-1)),r(j,{modelValue:s.product_id,"onUpdate:modelValue":d=>s.product_id=d,options:h.value,placeholder:"Search Product...",onChange:d=>V(s,p)},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),t("div",J,[e[14]||(e[14]=t("label",{class:"sm:hidden block text-[10px] font-bold text-slate-500 uppercase mb-1 text-center"},"Qty",-1)),n(t("input",{type:"number","onUpdate:modelValue":d=>s.qty=d,min:"0.0001",step:"any",class:"w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-xs text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500 text-center",required:""},null,8,K),[[c,s.qty]])]),t("div",R,[e[15]||(e[15]=t("label",{class:"sm:hidden block text-[10px] font-bold text-slate-500 uppercase mb-1 text-right"},"Price",-1)),n(t("input",{type:"number","onUpdate:modelValue":d=>s.unit_price=d,step:"any",class:"w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-xs text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500 text-right",required:""},null,8,X),[[c,s.unit_price]])]),t("div",Y,[e[16]||(e[16]=t("label",{class:"sm:hidden block text-[10px] font-bold text-slate-500 uppercase mb-1 text-right"},"Subtotal",-1)),t("div",Z,x(l(_)(s.qty*s.unit_price)),1)]),t("div",tt,[l(o).items.length>1?(u(),i("button",{key:0,type:"button",onClick:d=>S(p),class:"p-2 text-slate-600 hover:text-red-400"},[r(l(T),{class:"h-4 w-4"})],8,et)):D("",!0)])]))),128))]),t("div",st,[t("div",lt,[e[18]||(e[18]=t("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Total",-1)),t("p",ot,x(l(_)(C.value)),1)])])])]),t("div",at,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2"},"Notes",-1)),n(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>l(o).notes=s),rows:"2",class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",placeholder:"Optional notes..."},null,512),[[c,l(o).notes]])]),t("div",rt,[r(l(v),{href:"/sales/quotations",class:"px-6 py-2.5 rounded-xl bg-slate-50 dark:bg-slate-800 text-sm font-semibold text-slate-600 dark:text-slate-300 hover:bg-slate-700"},{default:g(()=>[...e[20]||(e[20]=[f("Cancel",-1)])]),_:1}),t("button",{type:"submit",class:"px-6 py-2.5 rounded-xl bg-blue-600 text-sm font-semibold text-white dark:text-white hover:bg-blue-500 shadow-lg shadow-blue-900/20",disabled:l(o).processing},x(l(o).processing?"Saving...":"Save Quotation"),9,dt)])],32)])]),_:1})],64))}};export{Qt as default};
