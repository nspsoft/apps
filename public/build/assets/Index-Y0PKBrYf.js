import{m as b,f as A,q as L,c as n,a as i,u as a,h as O,w as z,b as t,j as S,v as I,d as u,o,x,e as p,F as $,g as P,t as r,n as F,p as H,T as Q,s as G}from"./app-C5ximnk4.js";import{h as w,_ as J}from"./AppLayout-D5QuRGji.js";import{_ as K}from"./Pagination-DP7Yctcg.js";import{a as j}from"./helpers-DzPfLsau.js";import{r as R}from"./MagnifyingGlassIcon-BuUiOviB.js";import{r as M}from"./ArrowUpTrayIcon-Buys681m.js";import{r as y}from"./ChevronUpIcon-DIMwVmP6.js";import{r as W}from"./UserIcon-U12BUhW1.js";import{r as X}from"./XMarkIcon-B7pvIQ3F.js";/* empty css            */import"./SunIcon-C5gTgNQq.js";import"./WrenchScrewdriverIcon-RtRwy9Ag.js";import"./DocumentPlusIcon-CWq_U-0k.js";import"./TruckIcon-BXY3Yds0.js";import"./DocumentTextIcon-CfQwu5gU.js";import"./ShoppingCartIcon-Du7CHGMj.js";import"./MapPinIcon-8kcJKsWq.js";import"./SparklesIcon-XzH1SGLv.js";import"./CubeIcon-DlNRGXgC.js";import"./ClockIcon-CA0tSliu.js";import"./CheckCircleIcon-DdA7BM8M.js";import"./ShieldCheckIcon-CbPtSxMM.js";const Y={class:"p-4 sm:p-6 lg:p-8"},Z={class:"glass-card rounded-2xl overflow-hidden p-6"},tt={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},et={class:"flex gap-4 w-full md:w-auto"},st={class:"relative w-full md:w-64"},at={class:"flex gap-2"},lt=["href"],ot={class:"rounded-2xl glass-card overflow-hidden"},rt={class:"overflow-x-auto overflow-y-auto max-h-[600px]"},dt={class:"w-full text-left text-sm text-slate-600 dark:text-slate-400"},nt={class:"bg-slate-50 dark:bg-slate-700/50 text-xs uppercase font-semibold text-slate-500 dark:text-slate-300"},it={class:"border-b border-slate-200 dark:border-slate-700"},ct={class:"flex items-center gap-1"},ut={key:0,class:"text-blue-600 dark:text-blue-400"},xt={class:"flex items-center gap-1"},pt={key:0,class:"text-blue-600 dark:text-blue-400"},mt={class:"flex items-center gap-1"},bt={key:0,class:"text-blue-600 dark:text-blue-400"},ft={class:"flex items-center justify-end gap-1"},gt={key:0,class:"text-blue-600 dark:text-blue-400"},kt={class:"divide-y divide-slate-100 dark:divide-slate-800"},ht={class:"px-4 py-2 whitespace-nowrap text-sm text-slate-600 dark:text-slate-400 uppercase font-medium"},vt={class:"px-4 py-2"},wt={class:"text-sm font-semibold text-slate-900 dark:text-white"},yt={class:"text-[10px] text-slate-500 font-mono tracking-tight"},_t={class:"px-4 py-2"},Ct={class:"text-sm font-medium text-slate-900 dark:text-white"},zt={class:"text-[10px] text-slate-500 font-mono tracking-tight"},St={class:"px-4 py-2 text-right font-mono text-sm text-slate-900 dark:text-white"},It={class:"px-4 py-2 text-right font-mono text-sm"},Dt={class:"px-4 py-2 text-center"},$t={class:"flex flex-col items-center"},Ft={class:"w-12 h-1 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden mt-0.5"},jt={class:"px-4 py-2"},Mt=["title"],Nt={key:0,class:"text-[9px] text-slate-500 uppercase flex items-center gap-1"},Vt={class:"px-4 py-2 text-sm text-slate-500 font-mono"},qt=["title"],Bt={key:0},Et={class:"mt-6"},Tt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-sm"},Ut={class:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md p-6 shadow-2xl border border-slate-200 dark:border-slate-700"},At={class:"flex items-center justify-between mb-6"},Lt={class:"mb-4"},Ot={class:"mb-6"},Pt={class:"flex flex-col items-center justify-center border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-xl p-8 hover:border-blue-500/50 transition-all relative group bg-slate-50/50 dark:bg-slate-900/50"},Ht={class:"flex flex-col items-center transition-transform group-hover:scale-105 duration-300"},Qt={class:"p-3 rounded-full bg-blue-50 dark:bg-blue-900/30 mb-3"},Gt={class:"text-sm text-slate-600 dark:text-slate-300 font-semibold mb-1"},Jt={class:"mt-4 z-30 relative py-1 px-3 rounded-lg bg-blue-50 dark:bg-blue-900/40 border border-blue-100 dark:border-blue-800/50"},Kt=["href"],Rt={key:0,class:"text-red-500 text-xs mt-2 font-medium"},Wt={class:"flex items-center gap-3"},Xt=["disabled"],ve={__name:"Index",props:{forecasts:Object,filters:Object},setup(k){const h=k,f=b(h.filters.search||""),g=b(h.filters.month||""),m=b(h.filters.sort||"period"),c=b(h.filters.direction||"desc"),_=b(!1),N=b(null),d=A({file:null,sales_name:""}),v=l=>{m.value===l?c.value=c.value==="asc"?"desc":"asc":(m.value=l,c.value="asc"),D()},D=()=>{G.get(route("sales.planning.forecast.index"),{search:f.value,month:g.value,sort:m.value,direction:c.value},{preserveState:!0,replace:!0})};L([f,g],()=>{D()});const V=()=>{_.value=!0},C=()=>{_.value=!1,d.reset()},q=()=>{d.file&&d.post(route("sales.planning.forecast.import"),{onSuccess:()=>C()})},B=l=>l>=90?"#10b981":l>=75?"#3b82f6":l>=50?"#f59e0b":"#ef4444",E=l=>l>=90?"text-emerald-600 dark:text-emerald-400":l>=75?"text-blue-600 dark:text-blue-400":l>=50?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400",T=l=>l?new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"long"}):"",U=l=>l?new Date(l).toLocaleDateString("id-ID",{day:"2-digit",month:"short"}):"";return(l,e)=>(o(),n($,null,[i(a(O),{title:"Sales Forecast"}),i(J,{title:"Sales Forecast"},{header:z(()=>[...e[8]||(e[8]=[t("h2",{class:"font-semibold text-xl text-slate-800 dark:text-slate-200 leading-tight"}," Sales Forecast ",-1)])]),default:z(()=>[t("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[t("div",st,[S(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),type:"text",placeholder:"Search Customer / Product...",class:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[I,f.value]]),i(a(R),{class:"w-5 h-5 text-slate-400 absolute left-3 top-2.5"})]),S(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),type:"month",class:"rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[I,g.value]])]),t("div",at,[t("a",{href:l.route("sales.planning.forecast.export",{search:f.value,month:g.value}),class:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors"},[...e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),u(" Export Excel ",-1)])],8,lt),t("button",{onClick:V,class:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors"},[i(a(M),{class:"w-5 h-5"}),e[10]||(e[10]=u(" Import Excel ",-1))])])]),t("div",ot,[t("div",rt,[t("table",dt,[t("thead",nt,[t("tr",it,[t("th",{onClick:e[2]||(e[2]=s=>v("period")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},[t("div",ct,[e[11]||(e[11]=u(" Period ",-1)),m.value==="period"?(o(),n("span",ut,[c.value==="asc"?(o(),x(a(y),{key:0,class:"h-3 w-3"})):(o(),x(a(w),{key:1,class:"h-3 w-3"}))])):p("",!0)])]),t("th",{onClick:e[3]||(e[3]=s=>v("customer_name")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},[t("div",xt,[e[12]||(e[12]=u(" Customer ",-1)),m.value==="customer_name"?(o(),n("span",pt,[c.value==="asc"?(o(),x(a(y),{key:0,class:"h-3 w-3"})):(o(),x(a(w),{key:1,class:"h-3 w-3"}))])):p("",!0)])]),t("th",{onClick:e[4]||(e[4]=s=>v("product_name")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},[t("div",mt,[e[13]||(e[13]=u(" Product ",-1)),m.value==="product_name"?(o(),n("span",bt,[c.value==="asc"?(o(),x(a(y),{key:0,class:"h-3 w-3"})):(o(),x(a(w),{key:1,class:"h-3 w-3"}))])):p("",!0)])]),t("th",{onClick:e[5]||(e[5]=s=>v("qty_forecast")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 text-right cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},[t("div",ft,[e[14]||(e[14]=u(" Qty Forecast ",-1)),m.value==="qty_forecast"?(o(),n("span",gt,[c.value==="asc"?(o(),x(a(y),{key:0,class:"h-3 w-3"})):(o(),x(a(w),{key:1,class:"h-3 w-3"}))])):p("",!0)])]),e[15]||(e[15]=t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 text-right text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},"Qty PO (Actual)",-1)),e[16]||(e[16]=t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},"Accuracy",-1)),e[17]||(e[17]=t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},"Sales Name",-1)),e[18]||(e[18]=t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},"Unit",-1)),e[19]||(e[19]=t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 px-4 py-3 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider shadow-sm"},"Notes",-1))])]),t("tbody",kt,[(o(!0),n($,null,P(k.forecasts.data,s=>(o(),n("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30 transition-colors"},[t("td",ht,r(T(s.period)),1),t("td",vt,[t("div",wt,r(s.customer?.name),1),t("div",yt,r(s.customer?.code),1)]),t("td",_t,[t("div",Ct,r(s.product?.name),1),t("div",zt,r(s.product?.sku),1)]),t("td",St,r(a(j)(s.qty_forecast)),1),t("td",It,[t("span",{class:F({"text-blue-500 font-bold":s.qty_actual>0,"text-slate-400":s.qty_actual===0})},r(a(j)(s.qty_actual)),3)]),t("td",Dt,[t("div",$t,[t("span",{class:F([E(s.accuracy),"font-bold text-[10px] tracking-tighter"])},r(s.accuracy)+"% ",3),t("div",Ft,[t("div",{class:"h-full transition-all duration-500",style:H({width:s.accuracy+"%",backgroundColor:B(s.accuracy)})},null,4)])])]),t("td",jt,[t("div",{class:"text-sm font-medium text-slate-900 dark:text-white truncate max-w-[120px]",title:s.sales_name},r(s.sales_name||"-"),9,Mt),s.created_by?(o(),n("div",Nt,[i(a(W),{class:"w-2.5 h-2.5"}),u(" "+r(s.created_by_user?.name||"User")+" â€¢ "+r(U(s.created_at)),1)])):p("",!0)]),t("td",Vt,r(s.product?.unit?.code),1),t("td",{class:"px-4 py-2 text-[11px] italic text-slate-500 dark:text-slate-400 line-clamp-1 truncate max-w-[150px]",title:s.notes},r(s.notes||"-"),9,qt)]))),128)),k.forecasts.data.length===0?(o(),n("tr",Bt,[...e[20]||(e[20]=[t("td",{colspan:"9",class:"px-4 py-12 text-center text-slate-500 whitespace-nowrap"}," No forecast data found. Import Excel to get started. ",-1)])])):p("",!0)])])])]),t("div",Et,[i(K,{links:k.forecasts.links},null,8,["links"])])])]),i(Q,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:z(()=>[_.value?(o(),n("div",Tt,[t("div",Ut,[t("div",At,[e[21]||(e[21]=t("h3",{class:"text-xl font-bold text-slate-900 dark:text-white"}," Import Forecast Data ",-1)),t("button",{onClick:C,class:"text-slate-500 hover:text-slate-900 dark:text-white transition-colors"},[i(a(X),{class:"h-6 w-6"})])]),t("div",Lt,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Sales Name",-1)),S(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>a(d).sales_name=s),type:"text",placeholder:"Enter salesperson name",class:"w-full rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[I,a(d).sales_name]])]),t("div",Ot,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-3"},"Excel/CSV File",-1)),t("div",Pt,[t("input",{type:"file",ref_key:"fileInput",ref:N,onChange:e[7]||(e[7]=s=>a(d).file=s.target.files[0]),class:"absolute inset-0 opacity-0 cursor-pointer z-20",accept:".xlsx,.xls,.csv"},null,544),t("div",Ht,[t("div",Qt,[i(a(M),{class:"h-8 w-8 text-blue-600 dark:text-blue-400"})]),t("p",Gt,r(a(d).file?a(d).file.name:"Click or drag file to upload"),1),e[23]||(e[23]=t("p",{class:"text-xs text-slate-500"},"Maximum size: 2MB",-1))]),t("div",Jt,[t("a",{href:l.route("sales.planning.forecast.template"),class:"flex items-center gap-1.5 text-xs font-bold text-blue-600 dark:text-blue-400 hover:underline"},[...e[24]||(e[24]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),u(" Download Template ",-1)])],8,Kt)])]),a(d).errors.file?(o(),n("div",Rt,r(a(d).errors.file),1)):p("",!0)]),t("div",Wt,[t("button",{onClick:q,disabled:!a(d).file||a(d).processing,class:"flex-1 rounded-xl bg-blue-600 py-3 text-sm font-bold text-white hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-blue-500/20"},r(a(d).processing?"Importing...":"Start Import"),9,Xt),t("button",{onClick:C,class:"flex-1 rounded-xl bg-slate-100 dark:bg-slate-700 py-3 text-sm font-bold text-slate-600 dark:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all font-mono uppercase tracking-wider"}," Cancel ")])])])):p("",!0)]),_:1})]),_:1})],64))}};export{ve as default};
