import{c as o,b as e,o as a,m as x,s as U,q,a as d,u as l,h as ne,w as I,j as H,v as ue,n as _,x as b,d as n,t as i,e as v,l as O,F as S,g as j,k as E,i as G,A as ce,T as be,z as ve,B as xe}from"./app-BDCSmORV.js";import{p as pe,e as R,h as w,j as ge,_ as me}from"./AppLayout-D-MN9Clt.js";import{d as he}from"./debounce-CDPtFsCk.js";import ke from"./Board-CfOR1t9f.js";import{r as fe}from"./MagnifyingGlassIcon-r3Oq-h5I.js";import{a as we}from"./WrenchScrewdriverIcon-Bcgjqimb.js";import{r as L}from"./DocumentCheckIcon-BNDUMfBX.js";import{r as ye}from"./PlusIcon-CkLfrpeP.js";import{r as B}from"./ChevronUpIcon-B3EDgwZV.js";import{r as Z}from"./TruckIcon-KSIW3uKV.js";import{r as _e}from"./PrinterIcon-DfAGuu4G.js";import{r as Se}from"./EyeIcon-MeHRmoGf.js";import{r as Ce}from"./TrashIcon-DxPlyXN8.js";import{r as De}from"./ShieldCheckIcon-BLDjUQQt.js";import{r as $e}from"./XMarkIcon-CqC2ginv.js";import{r as Ae}from"./UserIcon-CPdS8oRa.js";/* empty css            */import"./SunIcon-DIO3ajW4.js";import"./DocumentPlusIcon-CeAHff71.js";import"./DocumentTextIcon-D13MK6Zf.js";import"./ShoppingCartIcon-C570p5_n.js";import"./MapPinIcon-Bn_n6hkH.js";import"./SparklesIcon-CPtneXCC.js";import"./CubeIcon-D4nQSbpl.js";import"./ClockIcon-BiKs3xgx.js";import"./CheckCircleIcon-pchilZdj.js";function Ie(u,h){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m7.875 14.25 1.214 1.942a2.25 2.25 0 0 0 1.908 1.058h2.006c.776 0 1.497-.4 1.908-1.058l1.214-1.942M2.41 9h4.636a2.25 2.25 0 0 1 1.872 1.002l.164.246a2.25 2.25 0 0 0 1.872 1.002h2.092a2.25 2.25 0 0 0 1.872-1.002l.164-.246A2.25 2.25 0 0 1 16.954 9h4.636M2.41 9a2.25 2.25 0 0 0-.16.832V12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 12V9.832c0-.287-.055-.57-.16-.832M2.41 9a2.25 2.25 0 0 1 .382-.632l3.285-3.832a2.25 2.25 0 0 1 1.708-.786h8.43c.657 0 1.281.287 1.709.786l3.284 3.832c.163.19.291.404.382.632M4.5 20.25h15A2.25 2.25 0 0 0 21.75 18v-2.625c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125V18a2.25 2.25 0 0 0 2.25 2.25Z"})])}function je(u,h){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})])}const Be={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},Me={class:"flex items-center gap-3"},Pe={class:"relative flex-1 sm:w-80"},Ve={class:"bg-slate-50 dark:bg-slate-900 p-1 rounded-xl flex items-center border border-slate-200 dark:border-slate-800"},Oe=["disabled"],ze={key:0,class:"mb-6 p-4 rounded-xl bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 grid grid-cols-1 md:grid-cols-4 gap-4"},Fe={class:"relative group"},Te={class:"relative"},He=["value"],Le={class:"relative group"},Ne={class:"flex items-center gap-1 mb-1"},Je={class:"relative"},Ue=["value","title"],Ze={key:1,class:"h-[calc(100vh-280px)] overflow-hidden"},qe={key:0,class:"mb-4 bg-amber-50 text-amber-600 px-4 py-2 rounded-lg text-xs font-bold border border-amber-100 flex items-center gap-2"},Ee={key:2,class:"rounded-2xl glass-card overflow-hidden"},Ge={key:0,class:"bg-blue-600/10 dark:bg-blue-500/10 px-6 py-3 border-b border-blue-500/20 flex items-center justify-between"},Re={class:"text-sm text-blue-600 dark:text-blue-400 font-medium"},Ke={key:0},Qe={key:1},Ye={class:"overflow-x-auto overflow-y-auto max-h-[600px]"},We={class:"min-w-full divide-y divide-slate-100 dark:divide-slate-800"},Xe={class:"border-b border-slate-200 dark:border-slate-700"},et={class:"flex items-center gap-2"},tt=["checked"],st={class:"flex items-center gap-1"},at={key:0,class:"text-blue-600 dark:text-blue-400"},lt={class:"flex items-center gap-1"},rt={key:0,class:"text-blue-600 dark:text-blue-400"},ot={class:"flex items-center gap-1"},it={key:0,class:"text-blue-600 dark:text-blue-400"},dt={class:"flex items-center gap-1"},nt={key:0,class:"text-blue-600 dark:text-blue-400"},ut={class:"flex items-center justify-center gap-1"},ct={key:0,class:"text-blue-600 dark:text-blue-400"},bt={class:"flex items-center justify-center gap-1"},vt={key:0,class:"text-blue-600 dark:text-blue-400"},xt={class:"divide-y divide-slate-100 dark:divide-slate-800"},pt={class:"px-4 py-2 whitespace-nowrap"},gt={class:"flex items-center gap-3"},mt=["value","disabled","title"],ht={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-50 dark:bg-slate-800"},kt={class:"text-sm font-medium text-slate-900 dark:text-white"},ft={class:"text-xs text-slate-500"},wt={class:"px-4 py-2 whitespace-nowrap text-sm"},yt={class:"px-4 py-2 whitespace-nowrap"},_t={class:"text-sm text-slate-900 dark:text-white font-medium"},St={key:0,class:"text-[10px] text-slate-500 uppercase tracking-tighter"},Ct={class:"px-4 py-2 whitespace-nowrap"},Dt={class:"text-sm text-slate-600 dark:text-slate-300"},$t={class:"px-4 py-2 whitespace-nowrap text-center text-sm text-slate-600 dark:text-slate-300"},At={class:"px-4 py-2 whitespace-nowrap text-center"},It={class:"flex flex-col items-center gap-1"},jt=["title"],Bt=["title"],Mt={class:"px-4 py-2 whitespace-nowrap text-right"},Pt={class:"flex items-center justify-end gap-2"},Vt=["href"],Ot=["onClick"],zt={key:0},Ft={colspan:"7",class:"px-4 py-12 text-center"},Tt={class:"mt-6"},Ht={key:1,class:"border-t border-slate-200 dark:border-slate-800 px-6 py-4 flex items-center justify-between"},Lt={class:"text-sm text-slate-500 dark:text-slate-400"},Nt={class:"flex items-center gap-2"},Jt={class:"mt-12"},Ut={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Zt={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},qt={class:"flex items-center gap-3 mb-3"},Et={class:"p-2.5 rounded-xl bg-purple-500/10 text-purple-400"},Gt={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},Rt={class:"flex items-center gap-3 mb-3"},Kt={class:"p-2.5 rounded-xl bg-blue-500/10 text-blue-400"},Qt={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},Yt={class:"flex items-center gap-3 mb-3"},Wt={class:"p-2.5 rounded-xl bg-emerald-500/10 text-emerald-400"},Xt={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},es={class:"flex items-center gap-3 mb-3"},ts={class:"p-2.5 rounded-xl bg-amber-500/10 text-amber-400"},ss={key:0,class:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},as={class:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0"},ls={class:"relative inline-block transform overflow-hidden rounded-3xl bg-white dark:bg-slate-900 text-left align-bottom shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:align-middle border border-slate-200 dark:border-slate-800"},rs={class:"absolute top-0 right-0 pt-6 pr-6"},os={class:"p-8"},is={class:"flex items-center gap-4 mb-8"},ds={class:"p-3 bg-indigo-500/10 rounded-2xl"},ns={class:"text-slate-500 dark:text-slate-400"},us={class:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4"},cs={class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700"},bs={class:"text-2xl font-bold text-indigo-500"},vs={class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700"},xs={class:"text-2xl font-bold text-blue-500"},ps={class:"max-h-[400px] overflow-y-auto mb-8 pr-2 custom-scrollbar"},gs={class:"pt-1"},ms=["checked","onChange"],hs={class:"flex-1"},ks={class:"flex flex-wrap justify-between items-start gap-4 mb-4"},fs={class:"text-sm font-bold text-slate-900 dark:text-white flex items-center gap-2"},ws={class:"text-xs text-slate-500 mt-1"},ys={class:"text-right"},_s={class:"text-sm font-bold text-indigo-500"},Ss={class:"text-xs text-slate-500 mt-1"},Cs={class:"space-y-2 pt-3 border-t border-slate-100 dark:border-slate-800"},Ds={class:"text-slate-600 dark:text-slate-400 font-medium"},$s={class:"font-bold text-slate-700 dark:text-slate-300"},As={class:"flex items-center justify-end gap-3 pt-6 border-t border-slate-100 dark:border-slate-800"},Is=["disabled"],sa={__name:"Index",props:{deliveryOrders:Object,pendingSalesOrders:Array,filters:Object,statuses:Array},setup(u){const h=u,y=x(h.filters.search||""),k=x(h.filters.status||""),z=x(!1),M=x("list"),m=x(h.filters.sort||"delivery_date"),g=x(h.filters.direction||"desc"),K=r=>{confirm("Yakin ingin menghapus Draft Surat Jalan ini? Tindakan ini tidak dapat dibatalkan.")&&U.delete(route("sales.deliveries.destroy",r),{preserveScroll:!0})},N=he(()=>{U.get(route("sales.deliveries.index"),{search:y.value||void 0,status:k.value||void 0,invoice_status:D.value||void 0,sort:m.value,direction:g.value},{preserveState:!0,replace:!0})},300),C=r=>{m.value===r?g.value=g.value==="asc"?"desc":"asc":(m.value=r,g.value="asc"),N()};q([y,k],N);const Q=r=>({draft:"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",confirmed:"bg-blue-500/20 text-blue-400 border-blue-500/30",picking:"bg-amber-500/20 text-amber-400 border-amber-500/30",packed:"bg-blue-600/20 text-blue-500 border-blue-500/30",shipped:"bg-purple-500/20 text-purple-400 border-purple-500/30",delivered:"bg-teal-500/20 text-teal-400 border-teal-500/30",completed:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",cancelled:"bg-red-500/20 text-red-400 border-red-500/30"})[r]||"bg-slate-500/10 text-slate-400 border-slate-500/20",Y=r=>({pending:"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",partial:"bg-amber-500/20 text-amber-400 border-amber-500/30",invoiced:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"})[r]||"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",W=r=>({pending:"Belum ada item yang dibuatkan invois.",partial:"Baru sebagian item ditagih atau ada penyesuaian tonase.",invoiced:"Seluruh barang sudah berhasil ditagih (Lunas Invois)."})[r]||"",X=r=>new Date(r).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}),ee=r=>({draft:"Draft surat jalan, belum diproses.",picking:"Barang sedang diambil di gudang.",packed:"Barang siap dimuat (load).",shipped:"Barang dalam perjalanan.",delivered:"Barang sampai di tujuan (Laporan Driver).",completed:"Selesai (Verifikasi Admin/POD).",cancelled:"Pengiriman dibatalkan."})[r]||"",c=x([]),p=x(!1),D=x(h.filters.invoice_status||""),P=r=>["completed","delivered","shipped"].includes(r.status)&&r.invoice_status!=="invoiced",te=r=>{p.value=!1,r.target.checked?c.value=h.deliveryOrders.data.filter(t=>P(t)).map(t=>t.id):c.value=[]},se=()=>{p.value=!0},$=x(!1),V=x(!1),A=x(null),f=x([]),ae=r=>{const t=f.value.indexOf(r);t>-1?f.value.splice(t,1):f.value.push(r)},J=xe(()=>A.value?A.value.invoices_count-f.value.length:0),le=async()=>{if(!(c.value.length===0&&!p.value)){V.value=!0;try{const r=await ve.post(route("sales.deliveries.bulk-invoice-preview"),{ids:c.value,select_all:p.value,filters:{search:y.value,status:k.value,invoice_status:D.value}});A.value=r.data,f.value=[],$.value=!0}catch(r){console.error("Preview error:",r),alert(r.response?.data?.error||"Failed to prepare preview. Please try again.")}finally{V.value=!1}}},re=()=>{U.post(route("sales.deliveries.bulk-invoice"),{ids:c.value,select_all:p.value,filters:{search:y.value,status:k.value,invoice_status:D.value},excluded_so_ids:f.value},{onStart:()=>{$.value=!1},onSuccess:()=>{c.value=[],p.value=!1}})},oe=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),ie=[{value:"pending",label:"Pending",description:"Belum ditagih sama sekali."},{value:"partial",label:"Partial",description:"Ditagih sebagian (Item tertentu saja/Koreksi tonase)."},{value:"invoiced",label:"Fully Invoiced",description:"Sudah ditagih lunas seluruh item."}];return q([y,k,D],()=>{c.value=[],p.value=!1,N()}),(r,t)=>(a(),o(S,null,[d(l(ne),{title:"Delivery Orders"}),d(me,{title:"Delivery Orders"},{default:I(()=>[e("div",Be,[e("div",Me,[e("div",Pe,[d(l(fe),{class:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-500"}),H(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),type:"search",placeholder:"Search DO number...",class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 py-2.5 pl-10 pr-4 text-sm text-slate-900 dark:text-white placeholder:text-slate-500 focus:bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500/50 transition-all"},null,512),[[ue,y.value]])]),e("div",Ve,[e("button",{onClick:t[1]||(t[1]=s=>M.value="list"),class:_(["p-2 rounded-lg transition-all",M.value==="list"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"])},[d(l(pe),{class:"w-5 h-5"})],2),e("button",{onClick:t[2]||(t[2]=s=>M.value="board"),class:_(["p-2 rounded-lg transition-all",M.value==="board"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"])},[d(l(je),{class:"w-5 h-5"})],2)]),e("button",{onClick:t[3]||(t[3]=s=>z.value=!z.value),class:_(["flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 px-4 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors",{"ring-2 ring-blue-500/50":z.value}])},[d(l(R),{class:"h-5 w-5"})],2),c.value.length>0||p.value?(a(),o("button",{key:0,onClick:le,disabled:V.value,class:"flex items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-indigo-500/25 hover:bg-indigo-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[V.value?(a(),b(l(we),{key:0,class:"h-5 w-5 animate-spin"})):(a(),b(l(L),{key:1,class:"h-5 w-5"})),n(" "+i(V.value?"Preparing Preview...":`Create Invoice (${p.value?u.deliveryOrders.total:c.value.length})`),1)],8,Oe)):v("",!0)]),d(l(O),{href:r.route("sales.deliveries.create"),class:"inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-blue-500 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-blue-500/25 hover:from-blue-500 hover:to-blue-400 transition-all"},{default:I(()=>[d(l(ye),{class:"h-5 w-5"}),t[19]||(t[19]=n(" Create Delivery ",-1))]),_:1},8,["href"])]),z.value?(a(),o("div",ze,[e("div",Fe,[t[21]||(t[21]=e("label",{class:"text-xs font-bold text-slate-500 mb-1 block"},"Status",-1)),e("div",Te,[H(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>k.value=s),class:"w-full bg-white dark:bg-slate-900 border-0 ring-2 ring-slate-200 dark:ring-slate-800 rounded-xl px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all shadow-sm appearance-none"},[t[20]||(t[20]=e("option",{value:""},"All Statuses",-1)),(a(!0),o(S,null,j(u.statuses,s=>(a(),o("option",{key:s.value,value:s.value},i(s.label),9,He))),128))],512),[[E,k.value]]),d(l(w),{class:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})])]),e("div",Le,[e("div",Ne,[t[22]||(t[22]=e("label",{class:"text-xs font-bold text-slate-500 block"},"Invoicing Status",-1)),d(l(ge),{class:"h-3.5 w-3.5 text-slate-400 cursor-help",title:"Status penagihan Surat Jalan. 'Partial' muncul jika ada item yang belum ditagih atau tonase dikoreksi."})]),e("div",Je,[H(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>D.value=s),class:"w-full bg-white dark:bg-slate-900 border-0 ring-2 ring-slate-200 dark:ring-slate-800 rounded-xl px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all shadow-sm appearance-none"},[t[23]||(t[23]=e("option",{value:""},"All Invoicing",-1)),(a(),o(S,null,j(ie,s=>e("option",{key:s.value,value:s.value,title:s.description},i(s.label),9,Ue)),64))],512),[[E,D.value]]),d(l(w),{class:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})])])])):v("",!0),M.value==="board"?(a(),o("div",Ze,[k.value?(a(),o("div",qe,[d(l(R),{class:"w-4 h-4"}),t[24]||(t[24]=n(" Filter aktif: Board mungkin tidak menampilkan semua item. ",-1))])):v("",!0),d(ke,{orders:u.deliveryOrders},null,8,["orders"])])):(a(),o("div",Ee,[c.value.length>0&&c.value.length===u.deliveryOrders.data.filter(s=>P(s)).length&&u.deliveryOrders.total>u.deliveryOrders.data.length?(a(),o("div",Ge,[e("div",Re,[p.value?(a(),o("span",Qe,[n(" All "+i(u.deliveryOrders.total)+" deliveries matching this filter are selected. ",1),e("button",{onClick:t[6]||(t[6]=s=>{c.value=[],p.value=!1}),class:"ml-2 underline font-bold hover:text-blue-700 dark:hover:text-blue-300"}," Clear selection ")])):(a(),o("span",Ke,[n(" All "+i(c.value.length)+" items on this page are selected. ",1),e("button",{onClick:se,class:"ml-2 underline font-bold hover:text-blue-700 dark:hover:text-blue-300"}," Select all "+i(u.deliveryOrders.total)+" deliveries matching this filter ",1)]))])])):v("",!0),e("div",Ye,[e("table",We,[e("thead",null,[e("tr",Xe,[e("th",{onClick:t[8]||(t[8]=s=>C("do_number")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",et,[e("input",{type:"checkbox",onChange:te,checked:p.value||c.value.length>0&&c.value.length===u.deliveryOrders.data.filter(s=>P(s)).length,onClick:t[7]||(t[7]=G(()=>{},["stop"])),class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,tt),e("div",st,[t[25]||(t[25]=e("span",null,"Nomor SJ",-1)),m.value==="do_number"?(a(),o("span",at,[g.value==="asc"?(a(),b(l(B),{key:0,class:"h-3 w-3"})):(a(),b(l(w),{key:1,class:"h-3 w-3"}))])):v("",!0)])])]),e("th",{onClick:t[9]||(t[9]=s=>C("so_number")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",lt,[t[26]||(t[26]=n(" SO Reference ",-1)),m.value==="so_number"?(a(),o("span",rt,[g.value==="asc"?(a(),b(l(B),{key:0,class:"h-3 w-3"})):(a(),b(l(w),{key:1,class:"h-3 w-3"}))])):v("",!0)])]),e("th",{onClick:t[10]||(t[10]=s=>C("customer_name")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",ot,[t[27]||(t[27]=n(" Customer ",-1)),m.value==="customer_name"?(a(),o("span",it,[g.value==="asc"?(a(),b(l(B),{key:0,class:"h-3 w-3"})):(a(),b(l(w),{key:1,class:"h-3 w-3"}))])):v("",!0)])]),e("th",{onClick:t[11]||(t[11]=s=>C("delivery_date")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",dt,[t[28]||(t[28]=n(" Date ",-1)),m.value==="delivery_date"?(a(),o("span",nt,[g.value==="asc"?(a(),b(l(B),{key:0,class:"h-3 w-3"})):(a(),b(l(w),{key:1,class:"h-3 w-3"}))])):v("",!0)])]),e("th",{onClick:t[12]||(t[12]=s=>C("items_count")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",ut,[t[29]||(t[29]=n(" Items ",-1)),m.value==="items_count"?(a(),o("span",ct,[g.value==="asc"?(a(),b(l(B),{key:0,class:"h-3 w-3"})):(a(),b(l(w),{key:1,class:"h-3 w-3"}))])):v("",!0)])]),e("th",{onClick:t[13]||(t[13]=s=>C("status")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",bt,[t[30]||(t[30]=n(" Status ",-1)),m.value==="status"?(a(),o("span",vt,[g.value==="asc"?(a(),b(l(B),{key:0,class:"h-3 w-3"})):(a(),b(l(w),{key:1,class:"h-3 w-3"}))])):v("",!0)])]),t[31]||(t[31]=e("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-right text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",xt,[(a(!0),o(S,null,j(u.deliveryOrders.data,s=>(a(),o("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30 transition-colors"},[e("td",pt,[e("div",gt,[H(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[14]||(t[14]=F=>c.value=F),disabled:!P(s),title:P(s)?"":"Only completed & uninvoiced DOs can be selected",onClick:t[15]||(t[15]=G(()=>{},["stop"])),class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed"},null,8,mt),[[ce,c.value]]),e("div",ht,[d(l(Z),{class:"h-5 w-5 text-slate-500 dark:text-slate-400"})]),e("div",null,[e("div",kt,i(s.do_number),1),e("div",ft,i(s.warehouse?.name),1)])])]),e("td",wt,[d(l(O),{href:r.route("sales.orders.show",s.sales_order_id),class:"text-blue-400 hover:underline"},{default:I(()=>[n(i(s.sales_order?.so_number),1)]),_:2},1032,["href"])]),e("td",yt,[e("div",_t,i(s.shipping_name||s.sales_order?.customer?.name),1),s.shipping_name&&s.shipping_name!==s.sales_order?.customer?.name?(a(),o("div",St,"Member: "+i(s.sales_order?.customer?.name),1)):v("",!0)]),e("td",Ct,[e("span",Dt,i(X(s.delivery_date)),1)]),e("td",$t,i(s.items_count),1),e("td",At,[e("div",It,[e("span",{class:_(["inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium cursor-help",Y(s.invoice_status)]),title:W(s.invoice_status)},i(s.invoice_status),11,jt),e("span",{class:_(["inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium cursor-help",Q(s.status)]),title:ee(s.status)},i(s.status),11,Bt)])]),e("td",Mt,[e("div",Pt,[e("a",{href:r.route("sales.deliveries.print",s.id),target:"_blank",class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors"},[d(l(_e),{class:"h-4 w-4"})],8,Vt),d(l(O),{href:r.route("sales.deliveries.show",s.id),class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors"},{default:I(()=>[d(l(Se),{class:"h-4 w-4"})]),_:1},8,["href"]),s.status==="draft"||s.items_count===0?(a(),o("button",{key:0,onClick:F=>K(s.id),class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-red-500 hover:bg-red-500/10 transition-colors"},[d(l(Ce),{class:"h-4 w-4"})],8,Ot)):v("",!0)])])]))),128)),u.deliveryOrders.data.length===0?(a(),o("tr",zt,[e("td",Ft,[d(l(Z),{class:"mx-auto h-12 w-12 text-slate-600"}),t[33]||(t[33]=e("h3",{class:"mt-2 text-sm font-medium text-slate-600 dark:text-slate-300"},"No delivery orders found",-1)),t[34]||(t[34]=e("p",{class:"mt-1 text-sm text-slate-500"},"Deliveries are created from Sales Orders.",-1)),e("div",Tt,[d(l(O),{href:r.route("sales.orders.index"),class:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2.5 text-sm font-medium text-white dark:text-white hover:bg-blue-500 transition-colors shadow-lg shadow-blue-500/20"},{default:I(()=>[...t[32]||(t[32]=[n(" Go to Sales Orders ",-1)])]),_:1},8,["href"])])])])):v("",!0)])])]),u.deliveryOrders.last_page>1?(a(),o("div",Ht,[e("p",Lt," Showing "+i(u.deliveryOrders.from)+" to "+i(u.deliveryOrders.to)+" of "+i(u.deliveryOrders.total)+" deliveries ",1),e("div",Nt,[(a(!0),o(S,null,j(u.deliveryOrders.links,s=>(a(),b(l(O),{key:s.label,href:s.url||"#",class:_(["px-3 py-1.5 rounded-lg text-sm transition-colors",s.active?"bg-blue-600 text-slate-900 dark:text-white":s.url?"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 hover:text-slate-900 dark:text-white":"text-white cursor-not-allowed"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])):v("",!0)])),e("div",Jt,[t[43]||(t[43]=e("div",{class:"flex items-center gap-2 mb-4 px-1"},[e("div",{class:"h-px flex-1 bg-slate-50 dark:bg-slate-800"}),e("span",{class:"text-xs font-bold text-slate-500 uppercase tracking-widest"},"Logistics & Delivery Guide"),e("div",{class:"h-px flex-1 bg-slate-50 dark:bg-slate-800"})],-1)),e("div",Ut,[e("div",Zt,[e("div",qt,[e("div",Et,[d(l(Z),{class:"h-5 w-5"})]),t[35]||(t[35]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Surat Jalan (DO)",-1))]),t[36]||(t[36]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[n(" Every delivery generates a professional "),e("strong",null,"Surat Jalan"),n(". Use the Print icon to generate the document for the driver. ")],-1))]),e("div",Gt,[e("div",Rt,[e("div",Kt,[d(l(Ie),{class:"h-5 w-5"})]),t[37]||(t[37]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Inventory Sync",-1))]),t[38]||(t[38]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[n(" Stock is only deducted from the warehouse once the DO is marked as "),e("strong",null,"Delivered"),n(", ensuring real-time inventory accuracy. ")],-1))]),e("div",Qt,[e("div",Yt,[e("div",Wt,[d(l(L),{class:"h-5 w-5"})]),t[39]||(t[39]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Direct Invoicing",-1))]),t[40]||(t[40]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[n(" Once a delivery is complete, you can generate a "),e("strong",null,"Sales Invoice"),n(" directly from the DO to ensure billing matches what was shipped. ")],-1))]),e("div",Xt,[e("div",es,[e("div",ts,[d(l(De),{class:"h-5 w-5"})]),t[41]||(t[41]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Proof of Delivery",-1))]),t[42]||(t[42]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[n(" Maintain "),e("strong",null,"Accountability"),n(" by tracking vehicle numbers and the personnel who prepared each shipment for delivery. ")],-1))])])]),d(be,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:I(()=>[$.value?(a(),o("div",ss,[e("div",as,[e("div",{class:"fixed inset-0 bg-slate-900/75 backdrop-blur-sm transition-opacity",onClick:t[16]||(t[16]=s=>$.value=!1)}),t[47]||(t[47]=e("span",{class:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"},"â€‹",-1)),e("div",ls,[e("div",rs,[e("button",{onClick:t[17]||(t[17]=s=>$.value=!1),class:"rounded-xl bg-slate-100 dark:bg-slate-800 p-2 text-slate-400 hover:text-slate-500 focus:outline-none transition-all"},[d(l($e),{class:"h-5 w-5"})])]),e("div",os,[e("div",is,[e("div",ds,[d(l(L),{class:"h-8 w-8 text-indigo-500"})]),e("div",null,[t[44]||(t[44]=e("h3",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Batch Invoice Preview",-1)),e("p",ns,"Review results before processing "+i(A.value?.total_dos)+" Delivery Orders",1)])]),e("div",us,[e("div",cs,[t[45]||(t[45]=e("p",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1"},"Total Invoices to Generate",-1)),e("p",bs,i(J.value)+" Invoices",1)]),e("div",vs,[t[46]||(t[46]=e("p",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1"},"Total Delivery Orders",-1)),e("p",xs,i(A.value?.total_dos)+" DOs",1)])]),e("div",ps,[(a(!0),o(S,null,j(A.value?.preview,(s,F)=>(a(),o("div",{key:F,class:_(["mb-4 last:mb-0 p-5 rounded-2xl border transition-all shadow-sm flex items-start gap-4",f.value.includes(s.so_id)?"bg-slate-50 dark:bg-slate-800/30 border-slate-100 dark:border-slate-800 opacity-60":"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 hover:border-indigo-500/30"])},[e("div",gs,[e("input",{type:"checkbox",checked:!f.value.includes(s.so_id),onChange:T=>ae(s.so_id),class:"h-5 w-5 rounded-lg border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,40,ms)]),e("div",hs,[e("div",ks,[e("div",null,[e("p",fs,[d(l(Ae),{class:"h-4 w-4 text-slate-400"}),n(" "+i(s.customer_name),1)]),e("p",ws,"SO: "+i(s.so_number)+" | "+i(s.do_count)+" DOs ("+i(s.do_numbers)+")",1)]),e("div",ys,[e("p",_s,i(oe(s.total_amount)),1),e("p",Ss,"Total Qty: "+i(s.total_qty),1)])]),e("div",Cs,[(a(!0),o(S,null,j(s.items,(T,de)=>(a(),o("div",{key:de,class:"flex justify-between text-xs"},[e("span",Ds,i(T.product_name),1),e("span",$s,i(T.qty)+" "+i(T.unit_name),1)]))),128))])])],2))),128))]),e("div",As,[e("button",{onClick:t[18]||(t[18]=s=>$.value=!1),class:"px-6 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 text-sm font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all"}," Cancel "),e("button",{onClick:re,disabled:J.value===0,class:"px-8 py-2.5 rounded-xl bg-indigo-600 text-sm font-bold text-white shadow-lg shadow-indigo-500/25 hover:bg-indigo-500 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[d(l(L),{class:"h-5 w-5"}),n(" Confirm & Process ("+i(J.value)+") ",1)],8,Is)])])])])])):v("",!0)]),_:1})]),_:1})],64))}};export{sa as default};
