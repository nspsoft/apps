import{c as i,b as e,o as l,m as v,s as Z,q as R,f as ve,a as o,u as a,h as pe,w as _,j as N,v as me,n as C,x,d as n,t as d,e as b,l as z,F as S,g as j,k as K,i as q,A as ge,T as Q,z as he,B as fe}from"./app-Cw8kIH1g.js";import{p as ke,e as Y,h as w,j as we,_ as ye}from"./AppLayout-7PtBlGhh.js";import{d as _e}from"./debounce-XrbBa_fJ.js";import Ce from"./Board-CgLz3cSv.js";import{r as Se}from"./MagnifyingGlassIcon-C3qZx1Of.js";import{a as De}from"./WrenchScrewdriverIcon-B2-PLOwo.js";import{r as E}from"./DocumentCheckIcon-BgOkBqIK.js";import{r as $e}from"./ArrowDownTrayIcon-p2LexbGt.js";import{r as Ie}from"./ArrowUpTrayIcon-BYDIPB3Q.js";import{r as Ae}from"./PlusIcon-D48cGMl4.js";import{r as B}from"./ChevronUpIcon-muw_gt9e.js";import{r as G}from"./TruckIcon-ITKCfvF-.js";import{r as je}from"./PrinterIcon-CRF3CpGX.js";import{r as Be}from"./EyeIcon-BT_OZNvP.js";import{r as Me}from"./TrashIcon-DO6VHCEe.js";import{r as Pe}from"./ShieldCheckIcon-CEofleze.js";import{r as Ve}from"./XMarkIcon-CQBGsBOc.js";import{r as Fe}from"./UserIcon-B1bdSIlW.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SunIcon-DA9Q1v03.js";import"./DocumentPlusIcon-CQ_PkTcR.js";import"./DocumentTextIcon-Bt9MGGXS.js";import"./ShoppingCartIcon-c-aWJGOQ.js";import"./MapPinIcon-C1xBtZPW.js";import"./SparklesIcon-DpF7vHpo.js";import"./CubeIcon-BAXCUIFi.js";import"./ClockIcon-DEoSoNjJ.js";import"./CheckCircleIcon-fc6dKFHb.js";function Oe(u,h){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m7.875 14.25 1.214 1.942a2.25 2.25 0 0 0 1.908 1.058h2.006c.776 0 1.497-.4 1.908-1.058l1.214-1.942M2.41 9h4.636a2.25 2.25 0 0 1 1.872 1.002l.164.246a2.25 2.25 0 0 0 1.872 1.002h2.092a2.25 2.25 0 0 0 1.872-1.002l.164-.246A2.25 2.25 0 0 1 16.954 9h4.636M2.41 9a2.25 2.25 0 0 0-.16.832V12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 12V9.832c0-.287-.055-.57-.16-.832M2.41 9a2.25 2.25 0 0 1 .382-.632l3.285-3.832a2.25 2.25 0 0 1 1.708-.786h8.43c.657 0 1.281.287 1.709.786l3.284 3.832c.163.19.291.404.382.632M4.5 20.25h15A2.25 2.25 0 0 0 21.75 18v-2.625c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125V18a2.25 2.25 0 0 0 2.25 2.25Z"})])}function ze(u,h){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})])}const Te={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},He={class:"flex items-center gap-3"},Le={class:"relative flex-1 sm:w-80"},Ne={class:"bg-slate-50 dark:bg-slate-900 p-1 rounded-xl flex items-center border border-slate-200 dark:border-slate-800"},Ee=["disabled"],Je={class:"flex items-center gap-2"},Ue=["href"],Ze={key:0,class:"mb-6 p-4 rounded-xl bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 grid grid-cols-1 md:grid-cols-4 gap-4"},qe={class:"relative group"},Ge={class:"relative"},Re=["value"],Ke={class:"relative group"},Qe={class:"flex items-center gap-1 mb-1"},Ye={class:"relative"},We=["value","title"],Xe={key:1,class:"h-[calc(100vh-280px)] overflow-hidden"},et={key:0,class:"mb-4 bg-amber-50 text-amber-600 px-4 py-2 rounded-lg text-xs font-bold border border-amber-100 flex items-center gap-2"},tt={key:2,class:"rounded-2xl glass-card overflow-hidden"},st={key:0,class:"bg-blue-600/10 dark:bg-blue-500/10 px-6 py-3 border-b border-blue-500/20 flex items-center justify-between"},lt={class:"text-sm text-blue-600 dark:text-blue-400 font-medium"},at={key:0},rt={key:1},ot={class:"overflow-x-auto overflow-y-auto max-h-[600px]"},it={class:"min-w-full divide-y divide-slate-100 dark:divide-slate-800"},dt={class:"border-b border-slate-200 dark:border-slate-700"},nt={class:"flex items-center gap-2"},ut=["checked"],ct={class:"flex items-center gap-1"},bt={key:0,class:"text-blue-600 dark:text-blue-400"},xt={class:"flex items-center gap-1"},vt={key:0,class:"text-blue-600 dark:text-blue-400"},pt={class:"flex items-center gap-1"},mt={key:0,class:"text-blue-600 dark:text-blue-400"},gt={class:"flex items-center gap-1"},ht={key:0,class:"text-blue-600 dark:text-blue-400"},ft={class:"flex items-center justify-center gap-1"},kt={key:0,class:"text-blue-600 dark:text-blue-400"},wt={class:"flex items-center justify-center gap-1"},yt={key:0,class:"text-blue-600 dark:text-blue-400"},_t={class:"divide-y divide-slate-100 dark:divide-slate-800"},Ct={class:"px-4 py-2 whitespace-nowrap"},St={class:"flex items-center gap-3"},Dt=["value","disabled","title"],$t={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-50 dark:bg-slate-800"},It={class:"text-sm font-medium text-slate-900 dark:text-white"},At={class:"text-xs text-slate-500"},jt={class:"px-4 py-2 whitespace-nowrap text-sm"},Bt={class:"px-4 py-2 whitespace-nowrap"},Mt={class:"text-sm text-slate-900 dark:text-white font-medium"},Pt={key:0,class:"text-[10px] text-slate-500 uppercase tracking-tighter"},Vt={class:"px-4 py-2 whitespace-nowrap"},Ft={class:"text-sm text-slate-600 dark:text-slate-300"},Ot={class:"px-4 py-2 whitespace-nowrap text-center text-sm text-slate-600 dark:text-slate-300"},zt={class:"px-4 py-2 whitespace-nowrap text-center"},Tt={class:"flex flex-col items-center gap-1"},Ht=["title"],Lt=["title"],Nt={class:"px-4 py-2 whitespace-nowrap text-right"},Et={class:"flex items-center justify-end gap-2"},Jt=["href"],Ut=["onClick"],Zt={key:0},qt={colspan:"7",class:"px-4 py-12 text-center"},Gt={class:"mt-6"},Rt={key:1,class:"border-t border-slate-200 dark:border-slate-800 px-6 py-4 flex items-center justify-between"},Kt={class:"text-sm text-slate-500 dark:text-slate-400"},Qt={class:"flex items-center gap-2"},Yt={class:"mt-12"},Wt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Xt={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},es={class:"flex items-center gap-3 mb-3"},ts={class:"p-2.5 rounded-xl bg-purple-500/10 text-purple-400"},ss={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},ls={class:"flex items-center gap-3 mb-3"},as={class:"p-2.5 rounded-xl bg-blue-500/10 text-blue-400"},rs={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},os={class:"flex items-center gap-3 mb-3"},is={class:"p-2.5 rounded-xl bg-emerald-500/10 text-emerald-400"},ds={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},ns={class:"flex items-center gap-3 mb-3"},us={class:"p-2.5 rounded-xl bg-amber-500/10 text-amber-400"},cs={key:0,class:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},bs={class:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0"},xs={class:"relative inline-block transform overflow-hidden rounded-3xl bg-white dark:bg-slate-900 text-left align-bottom shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:align-middle border border-slate-200 dark:border-slate-800"},vs={class:"absolute top-0 right-0 pt-6 pr-6"},ps={class:"p-8"},ms={class:"flex items-center gap-4 mb-8"},gs={class:"p-3 bg-indigo-500/10 rounded-2xl"},hs={class:"text-slate-500 dark:text-slate-400"},fs={class:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4"},ks={class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700"},ws={class:"text-2xl font-bold text-indigo-500"},ys={class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700"},_s={class:"text-2xl font-bold text-blue-500"},Cs={class:"max-h-[400px] overflow-y-auto mb-8 pr-2 custom-scrollbar"},Ss={class:"pt-1"},Ds=["checked","onChange"],$s={class:"flex-1"},Is={class:"flex flex-wrap justify-between items-start gap-4 mb-4"},As={class:"text-sm font-bold text-slate-900 dark:text-white flex items-center gap-2"},js={class:"text-xs text-slate-500 mt-1"},Bs={class:"text-right"},Ms={class:"text-sm font-bold text-indigo-500"},Ps={class:"text-xs text-slate-500 mt-1"},Vs={class:"space-y-2 pt-3 border-t border-slate-100 dark:border-slate-800"},Fs={class:"text-slate-600 dark:text-slate-400 font-medium"},Os={class:"font-bold text-slate-700 dark:text-slate-300"},zs={class:"flex items-center justify-end gap-3 pt-6 border-t border-slate-100 dark:border-slate-800"},Ts=["disabled"],Hs={key:0,class:"fixed inset-0 z-[100] overflow-y-auto"},Ls={class:"flex min-h-screen items-center justify-center p-4"},Ns={class:"relative w-full max-w-md rounded-2xl bg-white dark:bg-slate-900 p-6 border border-slate-200 dark:border-slate-800 shadow-2xl"},Es={class:"text-xs text-slate-500 dark:text-slate-400"},Js=["href"],Us={class:"flex justify-end gap-3 pt-2"},Zs=["disabled"],wl={__name:"Index",props:{deliveryOrders:Object,pendingSalesOrders:Array,filters:Object,statuses:Array},setup(u){const h=u,y=v(h.filters.search||""),f=v(h.filters.status||""),T=v(!1),M=v("list"),g=v(h.filters.sort||"delivery_date"),m=v(h.filters.direction||"desc"),W=r=>{confirm("Yakin ingin menghapus Draft Surat Jalan ini? Tindakan ini tidak dapat dibatalkan.")&&Z.delete(route("sales.deliveries.destroy",r),{preserveScroll:!0})},J=_e(()=>{Z.get(route("sales.deliveries.index"),{search:y.value||void 0,status:f.value||void 0,invoice_status:$.value||void 0,sort:g.value,direction:m.value},{preserveState:!0,replace:!0})},300),D=r=>{g.value===r?m.value=m.value==="asc"?"desc":"asc":(g.value=r,m.value="asc"),J()};R([y,f],J);const X=r=>({draft:"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",confirmed:"bg-blue-500/20 text-blue-400 border-blue-500/30",picking:"bg-amber-500/20 text-amber-400 border-amber-500/30",packed:"bg-blue-600/20 text-blue-500 border-blue-500/30",shipped:"bg-purple-500/20 text-purple-400 border-purple-500/30",delivered:"bg-teal-500/20 text-teal-400 border-teal-500/30",completed:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",cancelled:"bg-red-500/20 text-red-400 border-red-500/30"})[r]||"bg-slate-500/10 text-slate-400 border-slate-500/20",ee=r=>({pending:"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",partial:"bg-amber-500/20 text-amber-400 border-amber-500/30",invoiced:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"})[r]||"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",te=r=>({pending:"Belum ada item yang dibuatkan invois.",partial:"Baru sebagian item ditagih atau ada penyesuaian tonase.",invoiced:"Seluruh barang sudah berhasil ditagih (Lunas Invois)."})[r]||"",se=r=>new Date(r).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}),le=r=>({draft:"Draft surat jalan, belum diproses.",picking:"Barang sedang diambil di gudang.",packed:"Barang siap dimuat (load).",shipped:"Barang dalam perjalanan.",delivered:"Barang sampai di tujuan (Laporan Driver).",completed:"Selesai (Verifikasi Admin/POD).",cancelled:"Pengiriman dibatalkan."})[r]||"",c=v([]),p=v(!1),$=v(h.filters.invoice_status||""),P=r=>["completed","delivered","shipped"].includes(r.status)&&r.invoice_status!=="invoiced",ae=r=>{p.value=!1,r.target.checked?c.value=h.deliveryOrders.data.filter(t=>P(t)).map(t=>t.id):c.value=[]},re=()=>{p.value=!0},I=v(!1),V=v(!1),A=v(null),k=v([]),oe=r=>{const t=k.value.indexOf(r);t>-1?k.value.splice(t,1):k.value.push(r)},U=fe(()=>A.value?A.value.invoices_count-k.value.length:0),ie=async()=>{if(!(c.value.length===0&&!p.value)){V.value=!0;try{const r=await he.post(route("sales.deliveries.bulk-invoice-preview"),{ids:c.value,select_all:p.value,filters:{search:y.value,status:f.value,invoice_status:$.value}});A.value=r.data,k.value=[],I.value=!0}catch(r){console.error("Preview error:",r),alert(r.response?.data?.error||"Failed to prepare preview. Please try again.")}finally{V.value=!1}}},de=()=>{Z.post(route("sales.deliveries.bulk-invoice"),{ids:c.value,select_all:p.value,filters:{search:y.value,status:f.value,invoice_status:$.value},excluded_so_ids:k.value},{onStart:()=>{I.value=!1},onSuccess:()=>{c.value=[],p.value=!1}})},ne=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),ue=[{value:"pending",label:"Pending",description:"Belum ditagih sama sekali."},{value:"partial",label:"Partial",description:"Ditagih sebagian (Item tertentu saja/Koreksi tonase)."},{value:"invoiced",label:"Fully Invoiced",description:"Sudah ditagih lunas seluruh item."}];R([y,f,$],()=>{c.value=[],p.value=!1,J()});const F=v(!1),O=ve({file:null}),ce=r=>{O.file=r.target.files[0]},be=()=>{O.post(route("sales.deliveries.import"),{onSuccess:()=>{F.value=!1,O.reset()},forceFormData:!0})};return(r,t)=>(l(),i(S,null,[o(a(pe),{title:"Delivery Orders"}),o(ye,{title:"Delivery Orders"},{default:_(()=>[e("div",Te,[e("div",He,[e("div",Le,[o(a(Se),{class:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-500"}),N(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),type:"search",placeholder:"Search DO number...",class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 py-2.5 pl-10 pr-4 text-sm text-slate-900 dark:text-white placeholder:text-slate-500 focus:bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500/50 transition-all"},null,512),[[me,y.value]])]),e("div",Ne,[e("button",{onClick:t[1]||(t[1]=s=>M.value="list"),class:C(["p-2 rounded-lg transition-all",M.value==="list"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"])},[o(a(ke),{class:"w-5 h-5"})],2),e("button",{onClick:t[2]||(t[2]=s=>M.value="board"),class:C(["p-2 rounded-lg transition-all",M.value==="board"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"])},[o(a(ze),{class:"w-5 h-5"})],2)]),e("button",{onClick:t[3]||(t[3]=s=>T.value=!T.value),class:C(["flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 px-4 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors",{"ring-2 ring-blue-500/50":T.value}])},[o(a(Y),{class:"h-5 w-5"})],2),c.value.length>0||p.value?(l(),i("button",{key:0,onClick:ie,disabled:V.value,class:"flex items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-indigo-500/25 hover:bg-indigo-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[V.value?(l(),x(a(De),{key:0,class:"h-5 w-5 animate-spin"})):(l(),x(a(E),{key:1,class:"h-5 w-5"})),n(" "+d(V.value?"Preparing Preview...":`Create Invoice (${p.value?u.deliveryOrders.total:c.value.length})`),1)],8,Ee)):b("",!0)]),e("div",Je,[e("a",{href:r.route("sales.deliveries.export"),class:"inline-flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-emerald-500/25 hover:bg-emerald-500 transition-all"},[o(a($e),{class:"h-5 w-5"}),t[22]||(t[22]=n(" Export ",-1))],8,Ue),e("button",{onClick:t[4]||(t[4]=s=>F.value=!0),class:"inline-flex items-center gap-2 rounded-xl bg-amber-600 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-amber-500/25 hover:bg-amber-500 transition-all"},[o(a(Ie),{class:"h-5 w-5"}),t[23]||(t[23]=n(" Import ",-1))]),o(a(z),{href:r.route("sales.deliveries.create"),class:"inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-blue-500 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-blue-500/25 hover:from-blue-500 hover:to-blue-400 transition-all"},{default:_(()=>[o(a(Ae),{class:"h-5 w-5"}),t[24]||(t[24]=n(" Create Delivery ",-1))]),_:1},8,["href"])])]),T.value?(l(),i("div",Ze,[e("div",qe,[t[26]||(t[26]=e("label",{class:"text-xs font-bold text-slate-500 mb-1 block"},"Status",-1)),e("div",Ge,[N(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>f.value=s),class:"w-full bg-white dark:bg-slate-900 border-0 ring-2 ring-slate-200 dark:ring-slate-800 rounded-xl px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all shadow-sm appearance-none"},[t[25]||(t[25]=e("option",{value:""},"All Statuses",-1)),(l(!0),i(S,null,j(u.statuses,s=>(l(),i("option",{key:s.value,value:s.value},d(s.label),9,Re))),128))],512),[[K,f.value]]),o(a(w),{class:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})])]),e("div",Ke,[e("div",Qe,[t[27]||(t[27]=e("label",{class:"text-xs font-bold text-slate-500 block"},"Invoicing Status",-1)),o(a(we),{class:"h-3.5 w-3.5 text-slate-400 cursor-help",title:"Status penagihan Surat Jalan. 'Partial' muncul jika ada item yang belum ditagih atau tonase dikoreksi."})]),e("div",Ye,[N(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>$.value=s),class:"w-full bg-white dark:bg-slate-900 border-0 ring-2 ring-slate-200 dark:ring-slate-800 rounded-xl px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all shadow-sm appearance-none"},[t[28]||(t[28]=e("option",{value:""},"All Invoicing",-1)),(l(),i(S,null,j(ue,s=>e("option",{key:s.value,value:s.value,title:s.description},d(s.label),9,We)),64))],512),[[K,$.value]]),o(a(w),{class:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})])])])):b("",!0),M.value==="board"?(l(),i("div",Xe,[f.value?(l(),i("div",et,[o(a(Y),{class:"w-4 h-4"}),t[29]||(t[29]=n(" Filter aktif: Board mungkin tidak menampilkan semua item. ",-1))])):b("",!0),o(Ce,{orders:u.deliveryOrders},null,8,["orders"])])):(l(),i("div",tt,[c.value.length>0&&c.value.length===u.deliveryOrders.data.filter(s=>P(s)).length&&u.deliveryOrders.total>u.deliveryOrders.data.length?(l(),i("div",st,[e("div",lt,[p.value?(l(),i("span",rt,[n(" All "+d(u.deliveryOrders.total)+" deliveries matching this filter are selected. ",1),e("button",{onClick:t[7]||(t[7]=s=>{c.value=[],p.value=!1}),class:"ml-2 underline font-bold hover:text-blue-700 dark:hover:text-blue-300"}," Clear selection ")])):(l(),i("span",at,[n(" All "+d(c.value.length)+" items on this page are selected. ",1),e("button",{onClick:re,class:"ml-2 underline font-bold hover:text-blue-700 dark:hover:text-blue-300"}," Select all "+d(u.deliveryOrders.total)+" deliveries matching this filter ",1)]))])])):b("",!0),e("div",ot,[e("table",it,[e("thead",null,[e("tr",dt,[e("th",{onClick:t[9]||(t[9]=s=>D("do_number")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",nt,[e("input",{type:"checkbox",onChange:ae,checked:p.value||c.value.length>0&&c.value.length===u.deliveryOrders.data.filter(s=>P(s)).length,onClick:t[8]||(t[8]=q(()=>{},["stop"])),class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,ut),e("div",ct,[t[30]||(t[30]=e("span",null,"Nomor SJ",-1)),g.value==="do_number"?(l(),i("span",bt,[m.value==="asc"?(l(),x(a(B),{key:0,class:"h-3 w-3"})):(l(),x(a(w),{key:1,class:"h-3 w-3"}))])):b("",!0)])])]),e("th",{onClick:t[10]||(t[10]=s=>D("so_number")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",xt,[t[31]||(t[31]=n(" SO Reference ",-1)),g.value==="so_number"?(l(),i("span",vt,[m.value==="asc"?(l(),x(a(B),{key:0,class:"h-3 w-3"})):(l(),x(a(w),{key:1,class:"h-3 w-3"}))])):b("",!0)])]),e("th",{onClick:t[11]||(t[11]=s=>D("customer_name")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",pt,[t[32]||(t[32]=n(" Customer ",-1)),g.value==="customer_name"?(l(),i("span",mt,[m.value==="asc"?(l(),x(a(B),{key:0,class:"h-3 w-3"})):(l(),x(a(w),{key:1,class:"h-3 w-3"}))])):b("",!0)])]),e("th",{onClick:t[12]||(t[12]=s=>D("delivery_date")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",gt,[t[33]||(t[33]=n(" Date ",-1)),g.value==="delivery_date"?(l(),i("span",ht,[m.value==="asc"?(l(),x(a(B),{key:0,class:"h-3 w-3"})):(l(),x(a(w),{key:1,class:"h-3 w-3"}))])):b("",!0)])]),e("th",{onClick:t[13]||(t[13]=s=>D("items_count")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",ft,[t[34]||(t[34]=n(" Items ",-1)),g.value==="items_count"?(l(),i("span",kt,[m.value==="asc"?(l(),x(a(B),{key:0,class:"h-3 w-3"})):(l(),x(a(w),{key:1,class:"h-3 w-3"}))])):b("",!0)])]),e("th",{onClick:t[14]||(t[14]=s=>D("status")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",wt,[t[35]||(t[35]=n(" Status ",-1)),g.value==="status"?(l(),i("span",yt,[m.value==="asc"?(l(),x(a(B),{key:0,class:"h-3 w-3"})):(l(),x(a(w),{key:1,class:"h-3 w-3"}))])):b("",!0)])]),t[36]||(t[36]=e("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-right text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",_t,[(l(!0),i(S,null,j(u.deliveryOrders.data,s=>(l(),i("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30 transition-colors"},[e("td",Ct,[e("div",St,[N(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[15]||(t[15]=H=>c.value=H),disabled:!P(s),title:P(s)?"":"Only completed & uninvoiced DOs can be selected",onClick:t[16]||(t[16]=q(()=>{},["stop"])),class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed"},null,8,Dt),[[ge,c.value]]),e("div",$t,[o(a(G),{class:"h-5 w-5 text-slate-500 dark:text-slate-400"})]),e("div",null,[e("div",It,d(s.do_number),1),e("div",At,d(s.warehouse?.name),1)])])]),e("td",jt,[o(a(z),{href:r.route("sales.orders.show",s.sales_order_id),class:"text-blue-400 hover:underline"},{default:_(()=>[n(d(s.sales_order?.so_number),1)]),_:2},1032,["href"])]),e("td",Bt,[e("div",Mt,d(s.shipping_name||s.sales_order?.customer?.name),1),s.shipping_name&&s.shipping_name!==s.sales_order?.customer?.name?(l(),i("div",Pt,"Member: "+d(s.sales_order?.customer?.name),1)):b("",!0)]),e("td",Vt,[e("span",Ft,d(se(s.delivery_date)),1)]),e("td",Ot,d(s.items_count),1),e("td",zt,[e("div",Tt,[e("span",{class:C(["inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium cursor-help",ee(s.invoice_status)]),title:te(s.invoice_status)},d(s.invoice_status),11,Ht),e("span",{class:C(["inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium cursor-help",X(s.status)]),title:le(s.status)},d(s.status),11,Lt)])]),e("td",Nt,[e("div",Et,[e("a",{href:r.route("sales.deliveries.print",s.id),target:"_blank",class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors"},[o(a(je),{class:"h-4 w-4"})],8,Jt),o(a(z),{href:r.route("sales.deliveries.show",s.id),class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors"},{default:_(()=>[o(a(Be),{class:"h-4 w-4"})]),_:1},8,["href"]),s.status==="draft"||s.items_count===0?(l(),i("button",{key:0,onClick:H=>W(s.id),class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-red-500 hover:bg-red-500/10 transition-colors"},[o(a(Me),{class:"h-4 w-4"})],8,Ut)):b("",!0)])])]))),128)),u.deliveryOrders.data.length===0?(l(),i("tr",Zt,[e("td",qt,[o(a(G),{class:"mx-auto h-12 w-12 text-slate-600"}),t[38]||(t[38]=e("h3",{class:"mt-2 text-sm font-medium text-slate-600 dark:text-slate-300"},"No delivery orders found",-1)),t[39]||(t[39]=e("p",{class:"mt-1 text-sm text-slate-500"},"Deliveries are created from Sales Orders.",-1)),e("div",Gt,[o(a(z),{href:r.route("sales.orders.index"),class:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2.5 text-sm font-medium text-white dark:text-white hover:bg-blue-500 transition-colors shadow-lg shadow-blue-500/20"},{default:_(()=>[...t[37]||(t[37]=[n(" Go to Sales Orders ",-1)])]),_:1},8,["href"])])])])):b("",!0)])])]),u.deliveryOrders.last_page>1?(l(),i("div",Rt,[e("p",Kt," Showing "+d(u.deliveryOrders.from)+" to "+d(u.deliveryOrders.to)+" of "+d(u.deliveryOrders.total)+" deliveries ",1),e("div",Qt,[(l(!0),i(S,null,j(u.deliveryOrders.links,s=>(l(),x(a(z),{key:s.label,href:s.url||"#",class:C(["px-3 py-1.5 rounded-lg text-sm transition-colors",s.active?"bg-blue-600 text-slate-900 dark:text-white":s.url?"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 hover:text-slate-900 dark:text-white":"text-white cursor-not-allowed"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])):b("",!0)])),e("div",Yt,[t[48]||(t[48]=e("div",{class:"flex items-center gap-2 mb-4 px-1"},[e("div",{class:"h-px flex-1 bg-slate-50 dark:bg-slate-800"}),e("span",{class:"text-xs font-bold text-slate-500 uppercase tracking-widest"},"Logistics & Delivery Guide"),e("div",{class:"h-px flex-1 bg-slate-50 dark:bg-slate-800"})],-1)),e("div",Wt,[e("div",Xt,[e("div",es,[e("div",ts,[o(a(G),{class:"h-5 w-5"})]),t[40]||(t[40]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Surat Jalan (DO)",-1))]),t[41]||(t[41]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[n(" Every delivery generates a professional "),e("strong",null,"Surat Jalan"),n(". Use the Print icon to generate the document for the driver. ")],-1))]),e("div",ss,[e("div",ls,[e("div",as,[o(a(Oe),{class:"h-5 w-5"})]),t[42]||(t[42]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Inventory Sync",-1))]),t[43]||(t[43]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[n(" Stock is only deducted from the warehouse once the DO is marked as "),e("strong",null,"Delivered"),n(", ensuring real-time inventory accuracy. ")],-1))]),e("div",rs,[e("div",os,[e("div",is,[o(a(E),{class:"h-5 w-5"})]),t[44]||(t[44]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Direct Invoicing",-1))]),t[45]||(t[45]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[n(" Once a delivery is complete, you can generate a "),e("strong",null,"Sales Invoice"),n(" directly from the DO to ensure billing matches what was shipped. ")],-1))]),e("div",ds,[e("div",ns,[e("div",us,[o(a(Pe),{class:"h-5 w-5"})]),t[46]||(t[46]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Proof of Delivery",-1))]),t[47]||(t[47]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[n(" Maintain "),e("strong",null,"Accountability"),n(" by tracking vehicle numbers and the personnel who prepared each shipment for delivery. ")],-1))])])]),o(Q,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:_(()=>[I.value?(l(),i("div",cs,[e("div",bs,[e("div",{class:"fixed inset-0 bg-slate-900/75 backdrop-blur-sm transition-opacity",onClick:t[17]||(t[17]=s=>I.value=!1)}),t[52]||(t[52]=e("span",{class:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"},"â€‹",-1)),e("div",xs,[e("div",vs,[e("button",{onClick:t[18]||(t[18]=s=>I.value=!1),class:"rounded-xl bg-slate-100 dark:bg-slate-800 p-2 text-slate-400 hover:text-slate-500 focus:outline-none transition-all"},[o(a(Ve),{class:"h-5 w-5"})])]),e("div",ps,[e("div",ms,[e("div",gs,[o(a(E),{class:"h-8 w-8 text-indigo-500"})]),e("div",null,[t[49]||(t[49]=e("h3",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Batch Invoice Preview",-1)),e("p",hs,"Review results before processing "+d(A.value?.total_dos)+" Delivery Orders",1)])]),e("div",fs,[e("div",ks,[t[50]||(t[50]=e("p",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1"},"Total Invoices to Generate",-1)),e("p",ws,d(U.value)+" Invoices",1)]),e("div",ys,[t[51]||(t[51]=e("p",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1"},"Total Delivery Orders",-1)),e("p",_s,d(A.value?.total_dos)+" DOs",1)])]),e("div",Cs,[(l(!0),i(S,null,j(A.value?.preview,(s,H)=>(l(),i("div",{key:H,class:C(["mb-4 last:mb-0 p-5 rounded-2xl border transition-all shadow-sm flex items-start gap-4",k.value.includes(s.so_id)?"bg-slate-50 dark:bg-slate-800/30 border-slate-100 dark:border-slate-800 opacity-60":"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 hover:border-indigo-500/30"])},[e("div",Ss,[e("input",{type:"checkbox",checked:!k.value.includes(s.so_id),onChange:L=>oe(s.so_id),class:"h-5 w-5 rounded-lg border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,40,Ds)]),e("div",$s,[e("div",Is,[e("div",null,[e("p",As,[o(a(Fe),{class:"h-4 w-4 text-slate-400"}),n(" "+d(s.customer_name),1)]),e("p",js,"SO: "+d(s.so_number)+" | "+d(s.do_count)+" DOs ("+d(s.do_numbers)+")",1)]),e("div",Bs,[e("p",Ms,d(ne(s.total_amount)),1),e("p",Ps,"Total Qty: "+d(s.total_qty),1)])]),e("div",Vs,[(l(!0),i(S,null,j(s.items,(L,xe)=>(l(),i("div",{key:xe,class:"flex justify-between text-xs"},[e("span",Fs,d(L.product_name),1),e("span",Os,d(L.qty)+" "+d(L.unit_name),1)]))),128))])])],2))),128))]),e("div",zs,[e("button",{onClick:t[19]||(t[19]=s=>I.value=!1),class:"px-6 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 text-sm font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all"}," Cancel "),e("button",{onClick:de,disabled:U.value===0,class:"px-8 py-2.5 rounded-xl bg-indigo-600 text-sm font-bold text-white shadow-lg shadow-indigo-500/25 hover:bg-indigo-500 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[o(a(E),{class:"h-5 w-5"}),n(" Confirm & Process ("+d(U.value)+") ",1)],8,Ts)])])])])])):b("",!0)]),_:1})]),_:1}),o(Q,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:_(()=>[F.value?(l(),i("div",Hs,[e("div",Ls,[e("div",{class:"fixed inset-0 bg-slate-900/75 backdrop-blur-sm",onClick:t[20]||(t[20]=s=>F.value=!1)}),e("div",Ns,[t[55]||(t[55]=e("h3",{class:"text-lg font-bold text-slate-900 dark:text-white mb-4"},"Import Delivery Orders",-1)),e("form",{onSubmit:q(be,["prevent"]),class:"space-y-4"},[e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2"},"Excel File (.xlsx)",-1)),e("input",{type:"file",onChange:ce,accept:".xlsx,.xls,.csv",class:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-slate-800 dark:file:text-blue-400",required:""},null,32)]),e("div",Es,[e("a",{href:r.route("sales.deliveries.template"),class:"text-blue-400 hover:underline"},"Download template",8,Js),t[54]||(t[54]=n(" for the correct format. ",-1))]),e("div",Us,[e("button",{type:"button",onClick:t[21]||(t[21]=s=>F.value=!1),class:"px-4 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-sm font-semibold text-slate-600 dark:text-slate-300"},"Cancel"),e("button",{type:"submit",disabled:a(O).processing,class:"px-4 py-2 rounded-xl bg-blue-600 text-sm font-semibold text-white hover:bg-blue-500 disabled:opacity-50"},d(a(O).processing?"Importing...":"Import"),9,Zs)])],32)])])])):b("",!0)]),_:1})],64))}};export{wl as default};
