import{c as n,e,o as a,p as P,w as U,b as g,u as l,h as $,d as S,F as f,g as v,j as k,t as d,m as w,Z as I,y as T,f as p,v as x,k as c,i as Y,r as h}from"./app-D_UiwwGY.js";import{_ as X}from"./AppLayout-j_bqvUdd.js";import{_ as O}from"./lodash-DzS6sABh.js";import{r as D}from"./PencilSquareIcon-pKJG8Tah.js";import{r as E}from"./PlusIcon-CNffxIAs.js";import{r as L}from"./ArrowPathIcon-MMR-hzFR.js";/* empty css            */import"./XMarkIcon-Bk2VDfUN.js";import"./SunIcon-DsBk-RNV.js";import"./WrenchScrewdriverIcon-D2iFWpWW.js";import"./CheckBadgeIcon-CXai5z2u.js";import"./ShoppingCartIcon-Ch4xf8_E.js";import"./CubeIcon-DvVPDFE0.js";import"./TruckIcon-yq9WF2-2.js";function z(N,u){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"})])}const Z={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},q={class:"flex items-center gap-3"},A={class:"p-2 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl shadow-lg"},G={class:"p-6 space-y-8"},H={class:"text-lg font-bold text-slate-800 dark:text-gray-200 mb-4 px-1 flex items-center gap-2"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},K={class:"flex justify-between items-start mb-3"},Q={class:"font-bold text-slate-900 dark:text-white"},W={class:"text-xs text-slate-500 font-mono"},ee={class:"px-2 py-1 rounded-lg text-[10px] uppercase tracking-wider font-bold bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-700"},te={class:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-3 mb-4 border border-slate-200 dark:border-slate-700"},se={class:"font-mono text-sm font-semibold text-blue-600 dark:text-blue-400 break-all"},le={class:"flex items-center justify-between mt-4"},re={class:"text-xs text-slate-500"},oe={class:"font-bold text-slate-900 dark:text-white"},ae=["onClick"],de={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ne={class:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl p-6 max-w-md w-full border border-slate-200 dark:border-slate-800"},ie={class:"flex items-center justify-between mb-6"},ue={class:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2"},be={class:"grid grid-cols-2 gap-4"},pe=["disabled"],xe={key:0,class:"mt-1 text-xs text-red-500"},ce=["disabled"],me={key:0,class:"mt-1 text-xs text-red-500"},ge={key:0,class:"mt-1 text-xs text-red-500"},fe={class:"grid grid-cols-2 gap-4"},ke={key:0,class:"mt-1 text-xs text-red-500"},ve=["value"],we={class:"relative"},he={class:"mt-2 flex flex-wrap gap-2"},ye=["onClick"],_e={class:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-900/50"},Ne={class:"text-lg font-mono font-bold text-blue-700 dark:text-blue-200 break-all"},Ce={class:"flex justify-end gap-3 pt-4 border-t border-slate-100 dark:border-slate-800"},Se=["disabled"],Oe={__name:"DocumentNumbering",props:{numberings:Object},setup(N){const u=h(!1),y=h(null),C=h(""),b=h(!1),s=P({module:"",code:"",name:"",prefix:"",format:"{PREFIX}/{Y}/{m}/{NUMBER}",padding:4,reset_period:"monthly"}),M=()=>{u.value=!1,y.value=null,s.reset(),s.clearErrors(),b.value=!0,_()},R=o=>{u.value=!0,y.value=o.id,s.clearErrors(),s.module=o.module,s.code=o.code,s.name=o.name,s.prefix=o.prefix,s.format=o.format,s.padding=o.padding,s.reset_period=o.reset_period,b.value=!0,_()},_=O.debounce(async()=>{const o=new Date;let t=s.format.replace("{PREFIX}",s.prefix||"[PREFIX]").replace("{Y}",o.getFullYear()).replace("{y}",String(o.getFullYear()).slice(-2)).replace("{m}",String(o.getMonth()+1).padStart(2,"0")).replace("{d}",String(o.getDate()).padStart(2,"0")).replace("{NUMBER}","0".repeat(Math.max(0,(s.padding||4)-1))+"1");C.value=t},300);U(()=>[s.prefix,s.format,s.padding],_);const F=()=>{u.value?s.put(route("settings.numbering.update",y.value),{onSuccess:()=>{b.value=!1}}):s.post(route("settings.numbering.store"),{onSuccess:()=>{b.value=!1,s.reset()}})},V=[{value:"never",label:"Never Reset (Continuous)"},{value:"daily",label:"Daily (Reset every day)"},{value:"monthly",label:"Monthly (Reset every month)"},{value:"yearly",label:"Yearly (Reset every year)"}],j=["{PREFIX}","{Y}","{m}","{d}","{NUMBER}"],B=o=>{const t=document.getElementById("formatInput");if(t){const r=t.selectionStart,m=t.selectionEnd,i=s.format;s.format=i.substring(0,r)+o+i.substring(m),setTimeout(()=>{t.focus(),t.selectionStart=t.selectionEnd=r+o.length},0)}else s.format+=o};return(o,t)=>(a(),n(f,null,[g(l($),{title:"Document Numbering"}),g(X,{title:"Document Numbering"},{header:S(()=>[e("div",Z,[e("div",q,[e("div",A,[g(l(z),{class:"h-6 w-6 text-white"})]),t[10]||(t[10]=e("div",null,[e("h2",{class:"text-xl font-bold text-slate-900 dark:text-white"},"Document Numbering"),e("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Manage number formats for all documents")],-1))]),e("button",{onClick:M,class:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl shadow-lg transition-all transform hover:scale-105 active:scale-95"},[g(l(E),{class:"h-5 w-5"}),t[11]||(t[11]=k(" Register New Document ",-1))])])]),default:S(()=>[e("div",G,[(a(!0),n(f,null,v(N.numberings,(r,m)=>(a(),n("div",{key:m},[e("h3",H,[t[12]||(t[12]=e("span",{class:"w-1.5 h-6 bg-blue-500 rounded-full"},null,-1)),k(" "+d(m),1)]),e("div",J,[(a(!0),n(f,null,v(r,i=>(a(),n("div",{key:i.id,class:"glass-card p-5 rounded-2xl relative group hover:ring-2 hover:ring-blue-500/20 transition-all border border-slate-200 dark:border-slate-800"},[e("div",K,[e("div",null,[e("h4",Q,d(i.name),1),e("p",W,d(i.code),1)]),e("span",ee,d(i.reset_period),1)]),e("div",te,[t[13]||(t[13]=e("p",{class:"text-[10px] text-slate-500 mb-1 uppercase tracking-widest font-bold"},"Format Pattern",-1)),e("p",se,d(i.format),1)]),e("div",le,[e("div",re,[t[14]||(t[14]=k(" Next #: ",-1)),e("span",oe,d(i.current_number+1),1)]),e("button",{onClick:De=>R(i),class:"p-2 bg-blue-50 text-blue-600 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400 dark:hover:bg-blue-900/40 rounded-lg transition-colors border border-blue-100 dark:border-blue-900/50"},[g(l(D),{class:"h-4 w-4"})],8,ae)])]))),128))])]))),128))]),(a(),w(I,{to:"body"},[b.value?(a(),n("div",de,[e("div",{class:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm",onClick:t[0]||(t[0]=r=>b.value=!1)}),e("div",ne,[e("div",ie,[e("h3",ue,[u.value?(a(),w(l(D),{key:1,class:"h-5 w-5 text-blue-500"})):(a(),w(l(E),{key:0,class:"h-5 w-5 text-blue-500"})),k(" "+d(u.value?"Edit Document Format":"Register New Document"),1)]),e("button",{onClick:t[1]||(t[1]=r=>b.value=!1),class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"},[...t[15]||(t[15]=[e("span",{class:"sr-only"},"Close",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:T(F,["prevent"]),class:"space-y-4"},[e("div",be,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1"},"Module Name",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>l(s).module=r),type:"text",class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white focus:ring-blue-500 text-sm",placeholder:"e.g. Sales",disabled:u.value},null,8,pe),[[x,l(s).module]]),l(s).errors.module?(a(),n("p",xe,d(l(s).errors.module),1)):c("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1"},"System Code",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>l(s).code=r),type:"text",class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white focus:ring-blue-500 text-sm font-mono",placeholder:"e.g. sales_order",disabled:u.value},null,8,ce),[[x,l(s).code]]),l(s).errors.code?(a(),n("p",me,d(l(s).errors.code),1)):c("",!0)])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1"},"Display Name",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>l(s).name=r),type:"text",class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white focus:ring-blue-500 text-sm",placeholder:"e.g. Sales Order"},null,512),[[x,l(s).name]]),l(s).errors.name?(a(),n("p",ge,d(l(s).errors.name),1)):c("",!0)]),e("div",fe,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1"},"Prefix",-1)),p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>l(s).prefix=r),type:"text",class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white focus:ring-blue-500 text-sm",placeholder:"e.g. SO"},null,512),[[x,l(s).prefix]]),l(s).errors.prefix?(a(),n("p",ke,d(l(s).errors.prefix),1)):c("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1"},"Padding (Digits)",-1)),p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>l(s).padding=r),type:"number",min:"2",max:"10",class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white focus:ring-blue-500 text-sm"},null,512),[[x,l(s).padding]])])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1"},"Reset Counter",-1)),p(e("select",{"onUpdate:modelValue":t[7]||(t[7]=r=>l(s).reset_period=r),class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white focus:ring-blue-500 text-sm"},[(a(),n(f,null,v(V,r=>e("option",{key:r.value,value:r.value},d(r.label),9,ve)),64))],512),[[Y,l(s).reset_period]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1"},"Number Format",-1)),e("div",we,[p(e("input",{id:"formatInput","onUpdate:modelValue":t[8]||(t[8]=r=>l(s).format=r),type:"text",class:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white focus:ring-blue-500 font-mono text-sm pl-3 pr-10"},null,512),[[x,l(s).format]])]),e("div",he,[(a(),n(f,null,v(j,r=>e("button",{type:"button",key:r,onClick:m=>B(r),class:"px-2 py-1 text-[10px] bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 shadow-sm transition-all"},d(r),9,ye)),64))])]),e("div",_e,[t[23]||(t[23]=e("p",{class:"text-[10px] text-blue-600 dark:text-blue-300 uppercase tracking-widest font-bold mb-1"},"Visual Preview",-1)),e("p",Ne,d(C.value),1)]),e("div",Ce,[e("button",{type:"button",onClick:t[9]||(t[9]=r=>b.value=!1),class:"px-4 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors text-sm font-medium"}," Cancel "),e("button",{type:"submit",disabled:l(s).processing,class:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl shadow-lg transition-all flex items-center gap-2 text-sm font-bold disabled:opacity-50"},[l(s).processing?(a(),w(l(L),{key:0,class:"h-4 w-4 animate-spin"})):c("",!0),k(" "+d(u.value?"Save Changes":"Register Document"),1)],8,Se)])],32)])])):c("",!0)]))]),_:1})],64))}};export{Oe as default};
