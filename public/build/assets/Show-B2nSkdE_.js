import{p as I,c as r,b as m,u as a,h as V,d as g,e as t,l as j,j as c,o as n,k as u,n as b,t as i,f as k,v as w,F as v,g as B,a as f,r as O,D as A}from"./app-4JM5Q7Bz.js";import{_ as F}from"./AppLayout-CZ_34682.js";import{f as y}from"./helpers-BjqMQcOq.js";import{r as z}from"./ArrowLeftIcon-D1iyZfW6.js";import{r as T}from"./TrashIcon-BVveVHl0.js";import{r as _}from"./ArrowPathIcon-Bz0Qqgar.js";import{r as U}from"./CheckCircleIcon-D_uzV2fE.js";import{r as Q}from"./PrinterIcon-c_GkyI-Y.js";import{r as E}from"./MagnifyingGlassIcon-DMAiFIh5.js";/* empty css            */import"./XMarkIcon-DdWPYkX3.js";import"./SunIcon-DGTVQmNn.js";import"./WrenchScrewdriverIcon-BG2Mj286.js";import"./CheckBadgeIcon-B3ZSWPVA.js";import"./ShoppingCartIcon-CMY99rVh.js";import"./CubeIcon-Dr5km-T0.js";import"./TruckIcon-f3zA02q_.js";const M={class:"flex flex-col gap-6"},W={class:"flex items-center justify-between"},G={class:"flex items-center gap-3"},H=["disabled"],J={key:3,class:"inline-flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-800 px-4 py-2 text-sm font-semibold text-slate-600 dark:text-slate-300 hover:bg-slate-700 transition-colors",onclick:"window.print()"},K={class:"rounded-2xl glass-card p-6"},R={class:"flex items-center justify-between mb-4"},X={class:"grid grid-cols-2 sm:grid-cols-4 gap-6"},Y={class:"text-sm font-medium text-slate-900 dark:text-white"},Z={class:"text-sm font-medium text-slate-900 dark:text-white"},tt={class:"text-sm font-medium text-slate-900 dark:text-white"},et={class:"text-sm font-medium text-slate-900 dark:text-white"},st={class:"rounded-2xl glass-card overflow-hidden"},at={class:"p-4 border-b border-slate-200 dark:border-slate-800 flex flex-col sm:flex-row sm:items-center justify-between gap-4"},ot={class:"relative w-full sm:w-80"},lt={key:0,class:"overflow-x-auto max-h-[600px] overflow-y-auto custom-scrollbar relative"},rt={class:"min-w-full divide-y divide-slate-100 dark:divide-slate-800"},nt={class:"divide-y divide-slate-100 dark:divide-slate-800"},it={class:"px-6 py-3 whitespace-nowrap"},dt={class:"text-sm font-medium text-slate-900 dark:text-white"},mt={class:"text-xs text-slate-500"},ct={class:"px-6 py-3 whitespace-nowrap text-right"},pt={class:"text-sm text-slate-500 dark:text-slate-400"},ut={class:"px-6 py-3 whitespace-nowrap"},xt=["onUpdate:modelValue","onInput"],bt={key:1,class:"text-sm font-medium text-slate-900 dark:text-white block text-right"},ft={class:"px-6 py-3 whitespace-nowrap text-right"},yt={key:1,class:"text-center py-12 text-slate-500"},Ot={__name:"Show",props:{opname:Object},setup(o){const p=o,x=O(""),d=I({items:[]});d.items=p.opname.items.map(l=>({id:l.id,product:l.product,qty_system:Number(l.qty_system),qty_physic:Number(l.qty_physic),qty_difference:Number(l.qty_difference)}));const q=A(()=>{if(!x.value)return d.items;const l=x.value.toLowerCase();return d.items.filter(e=>e.product.name.toLowerCase().includes(l)||e.product.sku.toLowerCase().includes(l))}),C=l=>({draft:"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",in_progress:"bg-blue-500/20 text-blue-400 border-blue-500/30",completed:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",cancelled:"bg-red-500/20 text-red-400 border-red-500/30"})[l]||"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",N=l=>new Date(l).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}),$=()=>{confirm("This will load ALL active products in this warehouse. Continue?")&&f.post(`/inventory/opname/${p.opname.id}/populate`)},D=()=>{d.put(`/inventory/opname/${p.opname.id}/items`,{preserveScroll:!0,onSuccess:()=>{}})},S=()=>{confirm("Are you sure you want to complete this session? Stock adjustments will be posted immediately.")&&f.post(`/inventory/opname/${p.opname.id}/complete`)},L=()=>{confirm("Are you sure you want to delete this session?")&&f.delete(`/inventory/opname/${p.opname.id}`)},P=l=>{const e=Number(l);return e>0?"text-emerald-400":e<0?"text-red-400":"text-slate-500 dark:text-slate-400"};return(l,e)=>(n(),r(v,null,[m(a(V),{title:`Opname ${o.opname.opname_number}`},null,8,["title"]),m(F,{title:`Stock Opname ${o.opname.opname_number}`},{default:g(()=>[t("div",M,[t("div",W,[m(a(j),{href:"/inventory/opname",class:"inline-flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white"},{default:g(()=>[m(a(z),{class:"h-4 w-4"}),e[1]||(e[1]=c(" Back to List ",-1))]),_:1}),t("div",G,[o.opname.status!=="completed"?(n(),r("button",{key:0,onClick:L,class:"inline-flex items-center gap-2 rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-2 text-sm font-semibold text-red-400 hover:bg-red-500/20 transition-colors"},[m(a(T),{class:"h-4 w-4"}),e[2]||(e[2]=c(" Delete ",-1))])):u("",!0),o.opname.status!=="completed"&&a(d).items.length>0?(n(),r("button",{key:1,onClick:D,class:"inline-flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-800 px-4 py-2 text-sm font-semibold text-blue-400 hover:text-blue-300 transition-colors",disabled:a(d).processing},[m(a(_),{class:b(["h-4 w-4",{"animate-spin":a(d).processing}])},null,8,["class"]),e[3]||(e[3]=c(" Save Progress ",-1))],8,H)):u("",!0),o.opname.status!=="completed"&&a(d).items.length>0?(n(),r("button",{key:2,onClick:S,class:"inline-flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2 text-sm font-semibold text-slate-900 dark:text-white shadow-lg shadow-emerald-500/25 hover:bg-emerald-500 transition-colors"},[m(a(U),{class:"h-4 w-4"}),e[4]||(e[4]=c(" Complete & Post ",-1))])):u("",!0),o.opname.status==="completed"?(n(),r("button",J,[m(a(Q),{class:"h-4 w-4"}),e[5]||(e[5]=c(" Print ",-1))])):u("",!0)])]),t("div",K,[t("div",R,[e[6]||(e[6]=t("h2",{class:"text-lg font-semibold text-slate-900 dark:text-white"},"Session Details",-1)),t("span",{class:b(["inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium capitalize",C(o.opname.status)])},i(o.opname.status),3)]),t("div",X,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-xs text-slate-500 mb-1"},"Opname Number",-1)),t("p",Y,i(o.opname.opname_number),1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-xs text-slate-500 mb-1"},"Date",-1)),t("p",Z,i(N(o.opname.opname_date)),1)]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-xs text-slate-500 mb-1"},"Warehouse",-1)),t("p",tt,i(o.opname.warehouse?.name),1)]),t("div",null,[e[10]||(e[10]=t("p",{class:"text-xs text-slate-500 mb-1"},"Created By",-1)),t("p",et,i(o.opname.created_by?.name),1)])])]),t("div",st,[t("div",at,[t("div",ot,[m(a(E),{class:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-500"}),k(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),type:"search",placeholder:"Find product in list...",class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 py-2.5 pl-10 pr-4 text-sm text-slate-900 dark:text-white placeholder:text-slate-500 focus:bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500/50 transition-all"},null,512),[[w,x.value]])]),a(d).items.length===0&&o.opname.status!=="completed"?(n(),r("button",{key:0,onClick:$,class:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-500 transition-colors"},[m(a(_),{class:"h-4 w-4"}),e[11]||(e[11]=c(" Load All Products ",-1))])):u("",!0)]),a(d).items.length>0?(n(),r("div",lt,[t("table",rt,[e[12]||(e[12]=t("thead",{class:"sticky top-0 z-10 bg-slate-50 dark:bg-slate-900 shadow-sm"},[t("tr",{class:"bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50"},[t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Product"),t("th",{class:"px-6 py-4 text-right text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"System Qty"),t("th",{class:"px-6 py-4 text-right text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider w-40"},"Physical Qty"),t("th",{class:"px-6 py-4 text-right text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Difference")])],-1)),t("tbody",nt,[(n(!0),r(v,null,B(q.value,s=>(n(),r("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30"},[t("td",it,[t("div",dt,i(s.product.name),1),t("div",mt,i(s.product.sku),1)]),t("td",ct,[t("span",pt,i(a(y)(s.qty_system)),1)]),t("td",ut,[o.opname.status!=="completed"?k((n(),r("input",{key:0,"onUpdate:modelValue":h=>s.qty_physic=h,type:"number",step:"0.1",class:"block w-full text-right rounded-lg border-0 bg-slate-50 dark:bg-slate-800 py-1.5 px-3 text-sm text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500",onInput:h=>s.qty_difference=Number(s.qty_physic)-Number(s.qty_system)},null,40,xt)),[[w,s.qty_physic]]):(n(),r("span",bt,i(a(y)(s.qty_physic)),1))]),t("td",ft,[t("span",{class:b(["text-sm font-bold",P(s.qty_difference||s.qty_physic-s.qty_system)])},i((s.qty_difference||s.qty_physic-s.qty_system)>0?"+":"")+" "+i(a(y)(s.qty_difference||s.qty_physic-s.qty_system)),3)])]))),128))])])])):(n(),r("div",yt,[...e[13]||(e[13]=[t("p",{class:"mb-2"},"No items in this session.",-1),t("p",{class:"text-xs"},'Click "Load All Products" to populate the list with current system stock.',-1)])]))])])]),_:1},8,["title"])],64))}};export{Ot as default};
