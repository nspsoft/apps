import{m as b,f as B,q as E,c as a,a as x,u as o,h as F,w as $,b as e,j,v as N,d as r,o as s,x as d,e as u,F as M,g as P,t as n,s as L}from"./app-D1RW2fFp.js";import{h as g,y as T,_ as z}from"./AppLayout-DeeCEW8i.js";import{_ as H}from"./Pagination-C66eSqwK.js";import{r as Q}from"./MagnifyingGlassIcon-CYKgtpmV.js";import{r as W}from"./ArrowUpTrayIcon-CNkjFyR1.js";import{r as v}from"./ChevronUpIcon-DJAkkQPp.js";import{r as A}from"./XMarkIcon-DxOdG7BF.js";/* empty css            */import"./SunIcon-CDMMHQQF.js";import"./WrenchScrewdriverIcon-D9VN2rdz.js";import"./DocumentPlusIcon-DRFQIIoB.js";import"./TruckIcon-DGDMHDll.js";import"./DocumentTextIcon-D1-1qszK.js";import"./ShoppingCartIcon-D0Yl73pQ.js";import"./MapPinIcon-B2Ys__mI.js";import"./SparklesIcon-CnHLVUTh.js";import"./CubeIcon-B8ROsGUv.js";import"./ClockIcon-BdI4I9nY.js";import"./CheckCircleIcon-Ci6_7Cyx.js";import"./ShieldCheckIcon-DYRFrwK2.js";const G={class:"py-12"},J={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},K={class:"bg-white dark:bg-slate-800 overflow-hidden shadow-xl sm:rounded-lg p-6"},R={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},X={class:"flex gap-4 w-full md:w-auto"},Y={class:"relative w-full md:w-64"},Z={class:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700"},ee={class:"w-full text-left text-sm text-slate-600 dark:text-slate-400"},te={class:"bg-slate-50 dark:bg-slate-700/50 text-xs uppercase font-semibold text-slate-500 dark:text-slate-300"},se={class:"flex items-center gap-1"},le={key:0,class:"text-blue-600 dark:text-blue-400"},oe={class:"flex items-center gap-1"},ae={key:0,class:"text-blue-600 dark:text-blue-400"},re={class:"flex items-center gap-1"},de={key:0,class:"text-blue-600 dark:text-blue-400"},ie={class:"flex items-center gap-1"},ne={key:0,class:"text-blue-600 dark:text-blue-400"},ce={class:"flex items-center justify-end gap-1"},ue={key:0,class:"text-blue-600 dark:text-blue-400"},me={class:"divide-y divide-slate-200 dark:divide-slate-700"},pe={class:"px-6 py-2"},xe={class:"flex items-center gap-2"},be={class:"px-6 py-2 font-medium text-slate-900 dark:text-white"},fe={class:"px-6 py-2 font-mono text-xs"},ge={class:"px-6 py-2"},ve={class:"font-medium text-slate-900 dark:text-white"},he={class:"text-xs text-slate-500"},ye={class:"px-6 py-2 text-right font-mono"},ke={class:"px-6 py-2"},_e={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-800/20 dark:text-red-400"},we={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-800/20 dark:text-yellow-400"},De={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"},Ce={key:0},Se={class:"mt-6"},Ie={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},$e={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},je={class:"inline-block align-bottom bg-white dark:bg-slate-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ne={class:"bg-white dark:bg-slate-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Me={class:"flex justify-between items-center mb-4 pb-4 border-b border-slate-200 dark:border-slate-700"},Oe={class:"sm:flex sm:items-start"},Ve={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},qe={class:"mt-2"},Ue={key:0,class:"text-red-500 text-xs mt-2"},Be={class:"bg-slate-50 dark:bg-slate-700/50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ee=["disabled"],ot={__name:"Index",props:{schedules:Object,filters:Object},setup(h){const y=h,k=b(y.filters.search||""),_=b(y.filters.date||""),c=b(y.filters.sort||"delivery_date"),i=b(y.filters.direction||"asc"),D=b(!1),C=b(null),m=B({file:null}),f=p=>{c.value===p?i.value=i.value==="asc"?"desc":"asc":(c.value=p,i.value="asc"),S()},S=()=>{L.get(route("planning.schedule.index"),{search:k.value,date:_.value,sort:c.value,direction:i.value},{preserveState:!0,replace:!0})};E([k,_],()=>{S()});const O=()=>{console.log("Opening Schedule Import Modal"),D.value=!0},w=()=>{console.log("Closing Schedule Import Modal"),D.value=!1,m.reset()},V=()=>{C.value.files[0]&&(m.file=C.value.files[0],m.post(route("planning.schedule.import"),{onSuccess:()=>w()}))},q=p=>new Date(p.delivery_date)<new Date().setHours(0,0,0,0),U=p=>{const t=new Date,l=new Date;l.setDate(t.getDate()+7);const I=new Date(p.delivery_date);return I>=t&&I<=l};return(p,t)=>(s(),a(M,null,[x(o(F),{title:"Delivery Schedule"}),x(z,{title:"Delivery Schedule"},{header:$(()=>[...t[7]||(t[7]=[e("h2",{class:"font-semibold text-xl text-slate-800 dark:text-slate-200 leading-tight"}," Delivery Schedule ",-1)])]),default:$(()=>[e("div",G,[e("div",J,[e("div",K,[e("div",R,[e("div",X,[e("div",Y,[j(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>k.value=l),type:"text",placeholder:"Search Customer / PO / Product...",class:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[N,k.value]]),x(o(Q),{class:"w-5 h-5 text-slate-400 absolute left-3 top-2.5"})]),j(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>_.value=l),type:"date",class:"rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[N,_.value]])]),e("button",{onClick:O,class:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors"},[x(o(W),{class:"w-5 h-5"}),t[8]||(t[8]=r(" Import Excel ",-1))])]),e("div",Z,[e("table",ee,[e("thead",te,[e("tr",null,[e("th",{onClick:t[2]||(t[2]=l=>f("delivery_date")),class:"px-6 py-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"},[e("div",se,[t[9]||(t[9]=r(" Delivery Date ",-1)),c.value==="delivery_date"?(s(),a("span",le,[i.value==="asc"?(s(),d(o(v),{key:0,class:"h-3 w-3"})):(s(),d(o(g),{key:1,class:"h-3 w-3"}))])):u("",!0)])]),e("th",{onClick:t[3]||(t[3]=l=>f("customer_name")),class:"px-6 py-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"},[e("div",oe,[t[10]||(t[10]=r(" Customer ",-1)),c.value==="customer_name"?(s(),a("span",ae,[i.value==="asc"?(s(),d(o(v),{key:0,class:"h-3 w-3"})):(s(),d(o(g),{key:1,class:"h-3 w-3"}))])):u("",!0)])]),e("th",{onClick:t[4]||(t[4]=l=>f("po_number")),class:"px-6 py-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"},[e("div",re,[t[11]||(t[11]=r(" PO Number ",-1)),c.value==="po_number"?(s(),a("span",de,[i.value==="asc"?(s(),d(o(v),{key:0,class:"h-3 w-3"})):(s(),d(o(g),{key:1,class:"h-3 w-3"}))])):u("",!0)])]),e("th",{onClick:t[5]||(t[5]=l=>f("product_name")),class:"px-6 py-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"},[e("div",ie,[t[12]||(t[12]=r(" Product ",-1)),c.value==="product_name"?(s(),a("span",ne,[i.value==="asc"?(s(),d(o(v),{key:0,class:"h-3 w-3"})):(s(),d(o(g),{key:1,class:"h-3 w-3"}))])):u("",!0)])]),e("th",{onClick:t[6]||(t[6]=l=>f("qty_scheduled")),class:"px-6 py-3 text-right cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"},[e("div",ce,[t[13]||(t[13]=r(" Qty Scheduled ",-1)),c.value==="qty_scheduled"?(s(),a("span",ue,[i.value==="asc"?(s(),d(o(v),{key:0,class:"h-3 w-3"})):(s(),d(o(g),{key:1,class:"h-3 w-3"}))])):u("",!0)])]),t[14]||(t[14]=e("th",{class:"px-6 py-3"},"Status",-1))])]),e("tbody",me,[(s(!0),a(M,null,P(h.schedules.data,l=>(s(),a("tr",{key:l.id,class:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors"},[e("td",pe,[e("div",xe,[x(o(T),{class:"w-4 h-4 text-slate-400"}),r(" "+n(new Date(l.delivery_date).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})),1)])]),e("td",be,n(l.customer?.name),1),e("td",fe,n(l.po_number||"-"),1),e("td",ge,[e("div",ve,n(l.product?.name),1),e("div",he,n(l.product?.sku),1)]),e("td",ye,n(Number(l.qty_scheduled).toLocaleString("id-ID"))+" "+n(l.product?.unit?.code),1),e("td",ke,[q(l)?(s(),a("span",_e," Delayed ")):U(l)?(s(),a("span",we," Upcoming ")):(s(),a("span",De," Scheduled "))])]))),128)),h.schedules.data.length===0?(s(),a("tr",Ce,[...t[15]||(t[15]=[e("td",{colspan:"6",class:"px-6 py-8 text-center text-slate-500"}," No schedule data found. Import Excel to get started. ",-1)])])):u("",!0)])])]),e("div",Se,[x(H,{links:h.schedules.links},null,8,["links"])])])])]),D.value?(s(),a("div",Ie,[e("div",$e,[e("div",{class:"fixed inset-0 bg-slate-900 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:w}),t[18]||(t[18]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),e("div",je,[e("div",Ne,[e("div",Me,[t[16]||(t[16]=e("h3",{class:"text-lg leading-6 font-bold text-slate-900 dark:text-white",id:"modal-title"}," Import Delivery Schedule ",-1)),e("button",{onClick:w,class:"text-slate-400 hover:text-slate-500 transition-colors"},[x(o(A),{class:"w-6 h-6"})])]),e("div",Oe,[e("div",Ve,[e("div",qe,[t[17]||(t[17]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400 mb-4"},[r(" Upload an Excel file (.xlsx, .xls) with columns: "),e("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"customer_code"),r(", "),e("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"product_sku"),r(", "),e("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"delivery_date"),r(", "),e("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"qty"),r(", "),e("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"po_number"),r(". ")],-1)),e("input",{ref_key:"fileInput",ref:C,type:"file",class:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100 dark:file:bg-emerald-900/30 dark:file:text-emerald-400",accept:".xlsx, .xls, .csv"},null,512),o(m).errors.file?(s(),a("div",Ue,n(o(m).errors.file),1)):u("",!0)])])])]),e("div",Be,[e("button",{onClick:V,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-emerald-600 text-base font-medium text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:ml-3 sm:w-auto sm:text-sm",disabled:o(m).processing},n(o(m).processing?"Importing...":"Import"),9,Ee),e("button",{onClick:w,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-slate-300 dark:border-slate-600 shadow-sm px-4 py-2 bg-white dark:bg-slate-800 text-base font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):u("",!0)]),_:1})],64))}};export{ot as default};
