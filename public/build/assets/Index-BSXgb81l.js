import{c as d,b as e,o as l,m as p,s as U,q as R,f as pe,a as i,u as a,h as ve,w as y,j as H,v as me,n as C,x,d as n,t as o,e as b,l as A,F as S,g as P,k as Q,i as Z,A as ge,T as K,z as he,B as fe}from"./app-IVoQJucO.js";import{p as ke,e as Y,h as w,j as ye,_ as we}from"./AppLayout-CB6itj69.js";import{d as _e}from"./debounce-OcYcB6V6.js";import Ce from"./Board-D2INvVft.js";import{r as Se}from"./MagnifyingGlassIcon-DsL3jw1f.js";import{a as De}from"./WrenchScrewdriverIcon-BFnYhfSI.js";import{r as q}from"./DocumentCheckIcon-DSjH9bxH.js";import{r as $e}from"./ArrowDownTrayIcon-Cqx1nQvd.js";import{r as Ie}from"./ArrowUpTrayIcon-QTbFRtlD.js";import{r as je}from"./PlusIcon-BRjHjXno.js";import{r as B}from"./ChevronUpIcon-j3BRxtpQ.js";import{r as G}from"./TruckIcon-B37qipaX.js";import{r as Ae}from"./PrinterIcon-Dahw9cMz.js";import{r as Pe}from"./EyeIcon-D96GIeVu.js";import{r as Be}from"./TrashIcon-C7R2rb67.js";import{r as Me}from"./ShieldCheckIcon-Dg1cl82W.js";import{r as Ve}from"./XMarkIcon-D_woVOUk.js";import{r as Fe}from"./UserIcon-B5EIQRfb.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SunIcon-CYbLoLnh.js";import"./DocumentPlusIcon-DG_g0Qf-.js";import"./DocumentTextIcon-Bwhp7UlT.js";import"./ShoppingCartIcon-C8LltAfz.js";import"./MapPinIcon-3JoXjwIr.js";import"./SparklesIcon-CkSh7JIs.js";import"./CubeIcon-C_ydCMqF.js";import"./ClockIcon-C7llT3BY.js";import"./CheckCircleIcon-BsWlH7Rj.js";function ze(u,h){return l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m7.875 14.25 1.214 1.942a2.25 2.25 0 0 0 1.908 1.058h2.006c.776 0 1.497-.4 1.908-1.058l1.214-1.942M2.41 9h4.636a2.25 2.25 0 0 1 1.872 1.002l.164.246a2.25 2.25 0 0 0 1.872 1.002h2.092a2.25 2.25 0 0 0 1.872-1.002l.164-.246A2.25 2.25 0 0 1 16.954 9h4.636M2.41 9a2.25 2.25 0 0 0-.16.832V12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 12V9.832c0-.287-.055-.57-.16-.832M2.41 9a2.25 2.25 0 0 1 .382-.632l3.285-3.832a2.25 2.25 0 0 1 1.708-.786h8.43c.657 0 1.281.287 1.709.786l3.284 3.832c.163.19.291.404.382.632M4.5 20.25h15A2.25 2.25 0 0 0 21.75 18v-2.625c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125V18a2.25 2.25 0 0 0 2.25 2.25Z"})])}function Te(u,h){return l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})])}const Oe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},Le={class:"flex items-center gap-3"},Ne={class:"relative flex-1 sm:w-80"},He={class:"bg-slate-50 dark:bg-slate-900 p-1 rounded-xl flex items-center border border-slate-200 dark:border-slate-800"},qe=["disabled"],Ee={class:"flex items-center gap-2"},Je=["href"],Ue={key:0,class:"mb-6 p-4 rounded-xl bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 grid grid-cols-1 md:grid-cols-4 gap-4"},Ze={class:"relative group"},Ge={class:"relative"},Re=["value"],Qe={class:"relative group"},Ke={class:"flex items-center gap-1 mb-1"},Ye={class:"relative"},We=["value","title"],Xe={key:1,class:"h-[calc(100vh-280px)] overflow-hidden"},et={key:0,class:"mb-4 bg-amber-50 text-amber-600 px-4 py-2 rounded-lg text-xs font-bold border border-amber-100 flex items-center gap-2"},tt={key:2,class:"rounded-2xl glass-card overflow-hidden"},st={key:0,class:"bg-blue-600/10 dark:bg-blue-500/10 px-6 py-3 border-b border-blue-500/20 flex items-center justify-between"},lt={class:"text-sm text-blue-600 dark:text-blue-400 font-medium"},at={key:0},rt={key:1},ot={class:"overflow-x-auto overflow-y-auto max-h-[600px]"},it={class:"min-w-full divide-y divide-slate-100 dark:divide-slate-800"},dt={class:"border-b border-slate-200 dark:border-slate-700"},nt={class:"flex items-center gap-2"},ut=["checked"],ct={class:"flex items-center gap-1"},bt={key:0,class:"text-blue-600 dark:text-blue-400"},xt={class:"flex items-center gap-1"},pt={key:0,class:"text-blue-600 dark:text-blue-400"},vt={class:"flex items-center gap-1"},mt={key:0,class:"text-blue-600 dark:text-blue-400"},gt={class:"flex items-center gap-1"},ht={key:0,class:"text-blue-600 dark:text-blue-400"},ft={class:"flex items-center justify-center gap-1"},kt={key:0,class:"text-blue-600 dark:text-blue-400"},yt={class:"flex items-center justify-center gap-1"},wt={key:0,class:"text-blue-600 dark:text-blue-400"},_t={class:"divide-y divide-slate-100 dark:divide-slate-800"},Ct={class:"px-4 py-2 whitespace-nowrap"},St={class:"flex items-center gap-3"},Dt=["value","disabled","title"],$t={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-50 dark:bg-slate-800"},It={class:"text-xs text-slate-500"},jt={class:"px-4 py-2 whitespace-nowrap text-sm"},At={key:0,class:"text-xs text-slate-500"},Pt={class:"px-4 py-2 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300"},Bt={class:"px-4 py-2 whitespace-nowrap"},Mt={class:"text-sm text-slate-900 dark:text-white font-medium"},Vt={key:0,class:"text-[10px] text-slate-500 uppercase tracking-tighter"},Ft={class:"px-4 py-2 whitespace-nowrap"},zt={class:"text-sm text-slate-600 dark:text-slate-300"},Tt={class:"px-4 py-2 whitespace-nowrap text-center text-sm font-bold text-slate-700 dark:text-slate-300"},Ot={class:"px-4 py-2 whitespace-nowrap text-center text-sm text-slate-600 dark:text-slate-300"},Lt={class:"px-4 py-2 whitespace-nowrap text-center"},Nt={class:"flex flex-col items-center gap-1"},Ht=["title"],qt=["title"],Et={class:"px-4 py-2 whitespace-nowrap text-right"},Jt={class:"flex items-center justify-end gap-2"},Ut=["href"],Zt=["onClick"],Gt={key:0},Rt={colspan:"7",class:"px-4 py-12 text-center"},Qt={class:"mt-6"},Kt={key:1,class:"border-t border-slate-200 dark:border-slate-800 px-6 py-4 flex items-center justify-between"},Yt={class:"text-sm text-slate-500 dark:text-slate-400"},Wt={class:"flex items-center gap-2"},Xt={class:"mt-12"},es={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},ts={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},ss={class:"flex items-center gap-3 mb-3"},ls={class:"p-2.5 rounded-xl bg-purple-500/10 text-purple-400"},as={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},rs={class:"flex items-center gap-3 mb-3"},os={class:"p-2.5 rounded-xl bg-blue-500/10 text-blue-400"},is={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},ds={class:"flex items-center gap-3 mb-3"},ns={class:"p-2.5 rounded-xl bg-emerald-500/10 text-emerald-400"},us={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},cs={class:"flex items-center gap-3 mb-3"},bs={class:"p-2.5 rounded-xl bg-amber-500/10 text-amber-400"},xs={key:0,class:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ps={class:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0"},vs={class:"relative inline-block transform overflow-hidden rounded-3xl bg-white dark:bg-slate-900 text-left align-bottom shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:align-middle border border-slate-200 dark:border-slate-800"},ms={class:"absolute top-0 right-0 pt-6 pr-6"},gs={class:"p-8"},hs={class:"flex items-center gap-4 mb-8"},fs={class:"p-3 bg-indigo-500/10 rounded-2xl"},ks={class:"text-slate-500 dark:text-slate-400"},ys={class:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4"},ws={class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700"},_s={class:"text-2xl font-bold text-indigo-500"},Cs={class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700"},Ss={class:"text-2xl font-bold text-blue-500"},Ds={class:"max-h-[400px] overflow-y-auto mb-8 pr-2 custom-scrollbar"},$s={class:"pt-1"},Is=["checked","onChange"],js={class:"flex-1"},As={class:"flex flex-wrap justify-between items-start gap-4 mb-4"},Ps={class:"text-sm font-bold text-slate-900 dark:text-white flex items-center gap-2"},Bs={class:"text-xs text-slate-500 mt-1"},Ms={class:"text-right"},Vs={class:"text-sm font-bold text-indigo-500"},Fs={class:"text-xs text-slate-500 mt-1"},zs={class:"space-y-2 pt-3 border-t border-slate-100 dark:border-slate-800"},Ts={class:"text-slate-600 dark:text-slate-400 font-medium"},Os={class:"font-bold text-slate-700 dark:text-slate-300"},Ls={class:"flex items-center justify-end gap-3 pt-6 border-t border-slate-100 dark:border-slate-800"},Ns=["disabled"],Hs={key:0,class:"fixed inset-0 z-[100] overflow-y-auto"},qs={class:"flex min-h-screen items-center justify-center p-4"},Es={class:"relative w-full max-w-md rounded-2xl bg-white dark:bg-slate-900 p-6 border border-slate-200 dark:border-slate-800 shadow-2xl"},Js={class:"text-xs text-slate-500 dark:text-slate-400"},Us=["href"],Zs={class:"flex justify-end gap-3 pt-2"},Gs=["disabled"],_l={__name:"Index",props:{deliveryOrders:Object,pendingSalesOrders:Array,filters:Object,statuses:Array},setup(u){const h=u,_=p(h.filters.search||""),f=p(h.filters.status||""),O=p(!1),M=p("list"),g=p(h.filters.sort||"delivery_date"),m=p(h.filters.direction||"desc"),W=r=>{confirm("Yakin ingin menghapus Draft Surat Jalan ini? Tindakan ini tidak dapat dibatalkan.")&&U.delete(route("sales.deliveries.destroy",r),{preserveScroll:!0})},E=_e(()=>{U.get(route("sales.deliveries.index"),{search:_.value||void 0,status:f.value||void 0,invoice_status:$.value||void 0,sort:g.value,direction:m.value},{preserveState:!0,replace:!0})},300),D=r=>{g.value===r?m.value=m.value==="asc"?"desc":"asc":(g.value=r,m.value="asc"),E()};R([_,f],E);const X=r=>({draft:"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",confirmed:"bg-blue-500/20 text-blue-400 border-blue-500/30",picking:"bg-amber-500/20 text-amber-400 border-amber-500/30",packed:"bg-blue-600/20 text-blue-500 border-blue-500/30",shipped:"bg-purple-500/20 text-purple-400 border-purple-500/30",delivered:"bg-teal-500/20 text-teal-400 border-teal-500/30",completed:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",cancelled:"bg-red-500/20 text-red-400 border-red-500/30"})[r]||"bg-slate-500/10 text-slate-400 border-slate-500/20",ee=r=>({pending:"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",partial:"bg-amber-500/20 text-amber-400 border-amber-500/30",invoiced:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"})[r]||"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",te=r=>({pending:"Belum ada item yang dibuatkan invois.",partial:"Baru sebagian item ditagih atau ada penyesuaian tonase.",invoiced:"Seluruh barang sudah berhasil ditagih (Lunas Invois)."})[r]||"",se=r=>new Date(r).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}),le=r=>({draft:"Draft surat jalan, belum diproses.",picking:"Barang sedang diambil di gudang.",packed:"Barang siap dimuat (load).",shipped:"Barang dalam perjalanan.",delivered:"Barang sampai di tujuan (Laporan Driver).",completed:"Selesai (Verifikasi Admin/POD).",cancelled:"Pengiriman dibatalkan."})[r]||"",c=p([]),v=p(!1),$=p(h.filters.invoice_status||""),V=r=>["completed","delivered","shipped"].includes(r.status)&&r.invoice_status!=="invoiced",ae=r=>{v.value=!1,r.target.checked?c.value=h.deliveryOrders.data.filter(t=>V(t)).map(t=>t.id):c.value=[]},re=()=>{v.value=!0},I=p(!1),F=p(!1),j=p(null),k=p([]),oe=r=>{const t=k.value.indexOf(r);t>-1?k.value.splice(t,1):k.value.push(r)},J=fe(()=>j.value?j.value.invoices_count-k.value.length:0),ie=async()=>{if(!(c.value.length===0&&!v.value)){F.value=!0;try{const r=await he.post(route("sales.deliveries.bulk-invoice-preview"),{ids:c.value,select_all:v.value,filters:{search:_.value,status:f.value,invoice_status:$.value}});j.value=r.data,k.value=[],I.value=!0}catch(r){console.error("Preview error:",r),alert(r.response?.data?.error||"Failed to prepare preview. Please try again.")}finally{F.value=!1}}},de=()=>{U.post(route("sales.deliveries.bulk-invoice"),{ids:c.value,select_all:v.value,filters:{search:_.value,status:f.value,invoice_status:$.value},excluded_so_ids:k.value},{onStart:()=>{I.value=!1},onSuccess:()=>{c.value=[],v.value=!1}})},ne=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),ue=[{value:"pending",label:"Pending",description:"Belum ditagih sama sekali."},{value:"partial",label:"Partial",description:"Ditagih sebagian (Item tertentu saja/Koreksi tonase)."},{value:"invoiced",label:"Fully Invoiced",description:"Sudah ditagih lunas seluruh item."}];R([_,f,$],()=>{c.value=[],v.value=!1,E()});const z=p(!1),T=pe({file:null}),ce=r=>{T.file=r.target.files[0]},be=()=>{T.post(route("sales.deliveries.import"),{onSuccess:()=>{z.value=!1,T.reset()},forceFormData:!0})};return(r,t)=>(l(),d(S,null,[i(a(ve),{title:"Delivery Orders"}),i(we,{title:"Delivery Orders"},{default:y(()=>[e("div",Oe,[e("div",Le,[e("div",Ne,[i(a(Se),{class:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-500"}),H(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>_.value=s),type:"search",placeholder:"Search DO number...",class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 py-2.5 pl-10 pr-4 text-sm text-slate-900 dark:text-white placeholder:text-slate-500 focus:bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500/50 transition-all"},null,512),[[me,_.value]])]),e("div",He,[e("button",{onClick:t[1]||(t[1]=s=>M.value="list"),class:C(["p-2 rounded-lg transition-all",M.value==="list"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"])},[i(a(ke),{class:"w-5 h-5"})],2),e("button",{onClick:t[2]||(t[2]=s=>M.value="board"),class:C(["p-2 rounded-lg transition-all",M.value==="board"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"])},[i(a(Te),{class:"w-5 h-5"})],2)]),e("button",{onClick:t[3]||(t[3]=s=>O.value=!O.value),class:C(["flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 px-4 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors",{"ring-2 ring-blue-500/50":O.value}])},[i(a(Y),{class:"h-5 w-5"})],2),c.value.length>0||v.value?(l(),d("button",{key:0,onClick:ie,disabled:F.value,class:"flex items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-indigo-500/25 hover:bg-indigo-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[F.value?(l(),x(a(De),{key:0,class:"h-5 w-5 animate-spin"})):(l(),x(a(q),{key:1,class:"h-5 w-5"})),n(" "+o(F.value?"Preparing Preview...":`Create Invoice (${v.value?u.deliveryOrders.total:c.value.length})`),1)],8,qe)):b("",!0)]),e("div",Ee,[e("a",{href:r.route("sales.deliveries.export"),class:"inline-flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-emerald-500/25 hover:bg-emerald-500 transition-all"},[i(a($e),{class:"h-5 w-5"}),t[22]||(t[22]=n(" Export ",-1))],8,Je),e("button",{onClick:t[4]||(t[4]=s=>z.value=!0),class:"inline-flex items-center gap-2 rounded-xl bg-amber-600 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-amber-500/25 hover:bg-amber-500 transition-all"},[i(a(Ie),{class:"h-5 w-5"}),t[23]||(t[23]=n(" Import ",-1))]),i(a(A),{href:r.route("sales.deliveries.create"),class:"inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-blue-500 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-blue-500/25 hover:from-blue-500 hover:to-blue-400 transition-all"},{default:y(()=>[i(a(je),{class:"h-5 w-5"}),t[24]||(t[24]=n(" Create Delivery ",-1))]),_:1},8,["href"])])]),O.value?(l(),d("div",Ue,[e("div",Ze,[t[26]||(t[26]=e("label",{class:"text-xs font-bold text-slate-500 mb-1 block"},"Status",-1)),e("div",Ge,[H(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>f.value=s),class:"w-full bg-white dark:bg-slate-900 border-0 ring-2 ring-slate-200 dark:ring-slate-800 rounded-xl px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all shadow-sm appearance-none"},[t[25]||(t[25]=e("option",{value:""},"All Statuses",-1)),(l(!0),d(S,null,P(u.statuses,s=>(l(),d("option",{key:s.value,value:s.value},o(s.label),9,Re))),128))],512),[[Q,f.value]]),i(a(w),{class:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})])]),e("div",Qe,[e("div",Ke,[t[27]||(t[27]=e("label",{class:"text-xs font-bold text-slate-500 block"},"Invoicing Status",-1)),i(a(ye),{class:"h-3.5 w-3.5 text-slate-400 cursor-help",title:"Status penagihan Surat Jalan. 'Partial' muncul jika ada item yang belum ditagih atau tonase dikoreksi."})]),e("div",Ye,[H(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>$.value=s),class:"w-full bg-white dark:bg-slate-900 border-0 ring-2 ring-slate-200 dark:ring-slate-800 rounded-xl px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all shadow-sm appearance-none"},[t[28]||(t[28]=e("option",{value:""},"All Invoicing",-1)),(l(),d(S,null,P(ue,s=>e("option",{key:s.value,value:s.value,title:s.description},o(s.label),9,We)),64))],512),[[Q,$.value]]),i(a(w),{class:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})])])])):b("",!0),M.value==="board"?(l(),d("div",Xe,[f.value?(l(),d("div",et,[i(a(Y),{class:"w-4 h-4"}),t[29]||(t[29]=n(" Filter aktif: Board mungkin tidak menampilkan semua item. ",-1))])):b("",!0),i(Ce,{orders:u.deliveryOrders},null,8,["orders"])])):(l(),d("div",tt,[c.value.length>0&&c.value.length===u.deliveryOrders.data.filter(s=>V(s)).length&&u.deliveryOrders.total>u.deliveryOrders.data.length?(l(),d("div",st,[e("div",lt,[v.value?(l(),d("span",rt,[n(" All "+o(u.deliveryOrders.total)+" deliveries matching this filter are selected. ",1),e("button",{onClick:t[7]||(t[7]=s=>{c.value=[],v.value=!1}),class:"ml-2 underline font-bold hover:text-blue-700 dark:hover:text-blue-300"}," Clear selection ")])):(l(),d("span",at,[n(" All "+o(c.value.length)+" items on this page are selected. ",1),e("button",{onClick:re,class:"ml-2 underline font-bold hover:text-blue-700 dark:hover:text-blue-300"}," Select all "+o(u.deliveryOrders.total)+" deliveries matching this filter ",1)]))])])):b("",!0),e("div",ot,[e("table",it,[e("thead",null,[e("tr",dt,[e("th",{onClick:t[9]||(t[9]=s=>D("do_number")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",nt,[e("input",{type:"checkbox",onChange:ae,checked:v.value||c.value.length>0&&c.value.length===u.deliveryOrders.data.filter(s=>V(s)).length,onClick:t[8]||(t[8]=Z(()=>{},["stop"])),class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,ut),e("div",ct,[t[30]||(t[30]=e("span",null,"Nomor SJ",-1)),g.value==="do_number"?(l(),d("span",bt,[m.value==="asc"?(l(),x(a(B),{key:0,class:"h-3 w-3"})):(l(),x(a(w),{key:1,class:"h-3 w-3"}))])):b("",!0)])])]),e("th",{onClick:t[10]||(t[10]=s=>D("so_number")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",xt,[t[31]||(t[31]=n(" Reference (SO/PO) ",-1)),g.value==="so_number"?(l(),d("span",pt,[m.value==="asc"?(l(),x(a(B),{key:0,class:"h-3 w-3"})):(l(),x(a(w),{key:1,class:"h-3 w-3"}))])):b("",!0)])]),t[36]||(t[36]=e("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"}," Vehicle ",-1)),e("th",{onClick:t[11]||(t[11]=s=>D("customer_name")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",vt,[t[32]||(t[32]=n(" Customer ",-1)),g.value==="customer_name"?(l(),d("span",mt,[m.value==="asc"?(l(),x(a(B),{key:0,class:"h-3 w-3"})):(l(),x(a(w),{key:1,class:"h-3 w-3"}))])):b("",!0)])]),e("th",{onClick:t[12]||(t[12]=s=>D("delivery_date")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",gt,[t[33]||(t[33]=n(" Date ",-1)),g.value==="delivery_date"?(l(),d("span",ht,[m.value==="asc"?(l(),x(a(B),{key:0,class:"h-3 w-3"})):(l(),x(a(w),{key:1,class:"h-3 w-3"}))])):b("",!0)])]),t[37]||(t[37]=e("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},[e("div",{class:"flex items-center justify-center gap-1"}," Total Qty ")],-1)),e("th",{onClick:t[13]||(t[13]=s=>D("items_count")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",ft,[t[34]||(t[34]=n(" Items ",-1)),g.value==="items_count"?(l(),d("span",kt,[m.value==="asc"?(l(),x(a(B),{key:0,class:"h-3 w-3"})):(l(),x(a(w),{key:1,class:"h-3 w-3"}))])):b("",!0)])]),e("th",{onClick:t[14]||(t[14]=s=>D("status")),class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-900 transition-colors group"},[e("div",yt,[t[35]||(t[35]=n(" Status ",-1)),g.value==="status"?(l(),d("span",wt,[m.value==="asc"?(l(),x(a(B),{key:0,class:"h-3 w-3"})):(l(),x(a(w),{key:1,class:"h-3 w-3"}))])):b("",!0)])]),t[38]||(t[38]=e("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-2 text-right text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",_t,[(l(!0),d(S,null,P(u.deliveryOrders.data,s=>(l(),d("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30 transition-colors"},[e("td",Ct,[e("div",St,[H(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[15]||(t[15]=L=>c.value=L),disabled:!V(s),title:V(s)?"":"Only completed & uninvoiced DOs can be selected",onClick:t[16]||(t[16]=Z(()=>{},["stop"])),class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed"},null,8,Dt),[[ge,c.value]]),e("div",$t,[i(a(G),{class:"h-5 w-5 text-slate-500 dark:text-slate-400"})]),e("div",null,[i(a(A),{href:r.route("sales.deliveries.show",s.id),class:"text-sm font-medium text-slate-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 hover:underline"},{default:y(()=>[n(o(s.do_number),1)]),_:2},1032,["href"]),e("div",It,o(s.warehouse?.name),1)])])]),e("td",jt,[i(a(A),{href:r.route("sales.orders.show",s.sales_order_id),class:"font-medium text-blue-600 dark:text-blue-400 hover:underline"},{default:y(()=>[n(o(s.sales_order?.so_number),1)]),_:2},1032,["href"]),s.sales_order?.customer_po_number?(l(),d("div",At," PO: "+o(s.sales_order?.customer_po_number),1)):b("",!0)]),e("td",Pt,o(s.vehicle_number||"-"),1),e("td",Bt,[e("div",Mt,o(s.shipping_name||s.sales_order?.customer?.name),1),s.shipping_name&&s.shipping_name!==s.sales_order?.customer?.name?(l(),d("div",Vt,"Member: "+o(s.sales_order?.customer?.name),1)):b("",!0)]),e("td",Ft,[e("span",zt,o(se(s.delivery_date)),1)]),e("td",Tt,o(s.total_qty?Number(s.total_qty).toLocaleString("id-ID"):"-"),1),e("td",Ot,o(s.items_count),1),e("td",Lt,[e("div",Nt,[e("span",{class:C(["inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium cursor-help",ee(s.invoice_status)]),title:te(s.invoice_status)},o(s.invoice_status),11,Ht),e("span",{class:C(["inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium cursor-help",X(s.status)]),title:le(s.status)},o(s.status),11,qt)])]),e("td",Et,[e("div",Jt,[e("a",{href:r.route("sales.deliveries.print",s.id),target:"_blank",class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors"},[i(a(Ae),{class:"h-4 w-4"})],8,Ut),i(a(A),{href:r.route("sales.deliveries.show",s.id),class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors"},{default:y(()=>[i(a(Pe),{class:"h-4 w-4"})]),_:1},8,["href"]),s.status==="draft"||s.items_count===0?(l(),d("button",{key:0,onClick:L=>W(s.id),class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-red-500 hover:bg-red-500/10 transition-colors"},[i(a(Be),{class:"h-4 w-4"})],8,Zt)):b("",!0)])])]))),128)),u.deliveryOrders.data.length===0?(l(),d("tr",Gt,[e("td",Rt,[i(a(G),{class:"mx-auto h-12 w-12 text-slate-600"}),t[40]||(t[40]=e("h3",{class:"mt-2 text-sm font-medium text-slate-600 dark:text-slate-300"},"No delivery orders found",-1)),t[41]||(t[41]=e("p",{class:"mt-1 text-sm text-slate-500"},"Deliveries are created from Sales Orders.",-1)),e("div",Qt,[i(a(A),{href:r.route("sales.orders.index"),class:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2.5 text-sm font-medium text-white dark:text-white hover:bg-blue-500 transition-colors shadow-lg shadow-blue-500/20"},{default:y(()=>[...t[39]||(t[39]=[n(" Go to Sales Orders ",-1)])]),_:1},8,["href"])])])])):b("",!0)])])]),u.deliveryOrders.last_page>1?(l(),d("div",Kt,[e("p",Yt," Showing "+o(u.deliveryOrders.from)+" to "+o(u.deliveryOrders.to)+" of "+o(u.deliveryOrders.total)+" deliveries ",1),e("div",Wt,[(l(!0),d(S,null,P(u.deliveryOrders.links,s=>(l(),x(a(A),{key:s.label,href:s.url||"#",class:C(["px-3 py-1.5 rounded-lg text-sm transition-colors",s.active?"bg-blue-600 text-slate-900 dark:text-white":s.url?"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 hover:text-slate-900 dark:text-white":"text-white cursor-not-allowed"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])):b("",!0)])),e("div",Xt,[t[50]||(t[50]=e("div",{class:"flex items-center gap-2 mb-4 px-1"},[e("div",{class:"h-px flex-1 bg-slate-50 dark:bg-slate-800"}),e("span",{class:"text-xs font-bold text-slate-500 uppercase tracking-widest"},"Logistics & Delivery Guide"),e("div",{class:"h-px flex-1 bg-slate-50 dark:bg-slate-800"})],-1)),e("div",es,[e("div",ts,[e("div",ss,[e("div",ls,[i(a(G),{class:"h-5 w-5"})]),t[42]||(t[42]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Surat Jalan (DO)",-1))]),t[43]||(t[43]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[n(" Every delivery generates a professional "),e("strong",null,"Surat Jalan"),n(". Use the Print icon to generate the document for the driver. ")],-1))]),e("div",as,[e("div",rs,[e("div",os,[i(a(ze),{class:"h-5 w-5"})]),t[44]||(t[44]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Inventory Sync",-1))]),t[45]||(t[45]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[n(" Stock is only deducted from the warehouse once the DO is marked as "),e("strong",null,"Delivered"),n(", ensuring real-time inventory accuracy. ")],-1))]),e("div",is,[e("div",ds,[e("div",ns,[i(a(q),{class:"h-5 w-5"})]),t[46]||(t[46]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Direct Invoicing",-1))]),t[47]||(t[47]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[n(" Once a delivery is complete, you can generate a "),e("strong",null,"Sales Invoice"),n(" directly from the DO to ensure billing matches what was shipped. ")],-1))]),e("div",us,[e("div",cs,[e("div",bs,[i(a(Me),{class:"h-5 w-5"})]),t[48]||(t[48]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Proof of Delivery",-1))]),t[49]||(t[49]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[n(" Maintain "),e("strong",null,"Accountability"),n(" by tracking vehicle numbers and the personnel who prepared each shipment for delivery. ")],-1))])])]),i(K,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[I.value?(l(),d("div",xs,[e("div",ps,[e("div",{class:"fixed inset-0 bg-slate-900/75 backdrop-blur-sm transition-opacity",onClick:t[17]||(t[17]=s=>I.value=!1)}),t[54]||(t[54]=e("span",{class:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"},"â€‹",-1)),e("div",vs,[e("div",ms,[e("button",{onClick:t[18]||(t[18]=s=>I.value=!1),class:"rounded-xl bg-slate-100 dark:bg-slate-800 p-2 text-slate-400 hover:text-slate-500 focus:outline-none transition-all"},[i(a(Ve),{class:"h-5 w-5"})])]),e("div",gs,[e("div",hs,[e("div",fs,[i(a(q),{class:"h-8 w-8 text-indigo-500"})]),e("div",null,[t[51]||(t[51]=e("h3",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Batch Invoice Preview",-1)),e("p",ks,"Review results before processing "+o(j.value?.total_dos)+" Delivery Orders",1)])]),e("div",ys,[e("div",ws,[t[52]||(t[52]=e("p",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1"},"Total Invoices to Generate",-1)),e("p",_s,o(J.value)+" Invoices",1)]),e("div",Cs,[t[53]||(t[53]=e("p",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1"},"Total Delivery Orders",-1)),e("p",Ss,o(j.value?.total_dos)+" DOs",1)])]),e("div",Ds,[(l(!0),d(S,null,P(j.value?.preview,(s,L)=>(l(),d("div",{key:L,class:C(["mb-4 last:mb-0 p-5 rounded-2xl border transition-all shadow-sm flex items-start gap-4",k.value.includes(s.so_id)?"bg-slate-50 dark:bg-slate-800/30 border-slate-100 dark:border-slate-800 opacity-60":"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 hover:border-indigo-500/30"])},[e("div",$s,[e("input",{type:"checkbox",checked:!k.value.includes(s.so_id),onChange:N=>oe(s.so_id),class:"h-5 w-5 rounded-lg border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,40,Is)]),e("div",js,[e("div",As,[e("div",null,[e("p",Ps,[i(a(Fe),{class:"h-4 w-4 text-slate-400"}),n(" "+o(s.customer_name),1)]),e("p",Bs,"SO: "+o(s.so_number)+" | "+o(s.do_count)+" DOs ("+o(s.do_numbers)+")",1)]),e("div",Ms,[e("p",Vs,o(ne(s.total_amount)),1),e("p",Fs,"Total Qty: "+o(s.total_qty),1)])]),e("div",zs,[(l(!0),d(S,null,P(s.items,(N,xe)=>(l(),d("div",{key:xe,class:"flex justify-between text-xs"},[e("span",Ts,o(N.product_name),1),e("span",Os,o(N.qty)+" "+o(N.unit_name),1)]))),128))])])],2))),128))]),e("div",Ls,[e("button",{onClick:t[19]||(t[19]=s=>I.value=!1),class:"px-6 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 text-sm font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all"}," Cancel "),e("button",{onClick:de,disabled:J.value===0,class:"px-8 py-2.5 rounded-xl bg-indigo-600 text-sm font-bold text-white shadow-lg shadow-indigo-500/25 hover:bg-indigo-500 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[i(a(q),{class:"h-5 w-5"}),n(" Confirm & Process ("+o(J.value)+") ",1)],8,Ns)])])])])])):b("",!0)]),_:1})]),_:1}),i(K,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[z.value?(l(),d("div",Hs,[e("div",qs,[e("div",{class:"fixed inset-0 bg-slate-900/75 backdrop-blur-sm",onClick:t[20]||(t[20]=s=>z.value=!1)}),e("div",Es,[t[57]||(t[57]=e("h3",{class:"text-lg font-bold text-slate-900 dark:text-white mb-4"},"Import Delivery Orders",-1)),e("form",{onSubmit:Z(be,["prevent"]),class:"space-y-4"},[e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2"},"Excel File (.xlsx)",-1)),e("input",{type:"file",onChange:ce,accept:".xlsx,.xls,.csv",class:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-slate-800 dark:file:text-blue-400",required:""},null,32)]),e("div",Js,[e("a",{href:r.route("sales.deliveries.template"),class:"text-blue-400 hover:underline"},"Download template",8,Us),t[56]||(t[56]=n(" for the correct format. ",-1))]),e("div",Zs,[e("button",{type:"button",onClick:t[21]||(t[21]=s=>z.value=!1),class:"px-4 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-sm font-semibold text-slate-600 dark:text-slate-300"},"Cancel"),e("button",{type:"submit",disabled:a(T).processing,class:"px-4 py-2 rounded-xl bg-blue-600 text-sm font-semibold text-white hover:bg-blue-500 disabled:opacity-50"},o(a(T).processing?"Importing...":"Import"),9,Gs)])],32)])])])):b("",!0)]),_:1})],64))}};export{_l as default};
