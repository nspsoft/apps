import{r as x,p as S,w as F,c as d,b as i,u as o,h as j,d as _,e as t,f as y,v as k,j as r,o as n,F as v,g as D,t as l,n as N,k as g,a as M}from"./app-CVskXPlE.js";import{_ as V}from"./AppLayout-BPbSmNAp.js";import{_ as q}from"./Pagination-tNP4eDyy.js";import{r as O}from"./MagnifyingGlassIcon-z3VKf18-.js";import{r as E}from"./ArrowUpTrayIcon-B6ZNqwD4.js";import{r as L}from"./XMarkIcon-B0wnv3NP.js";/* empty css            */import"./SunIcon-CH0hNqUR.js";import"./WrenchScrewdriverIcon-Ch0-x6ah.js";import"./CheckBadgeIcon-BrVRkF10.js";import"./ShoppingCartIcon-C3CFwejV.js";import"./CubeIcon-B3DTt87X.js";import"./TruckIcon-RPY9s92d.js";const P={class:"py-12"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},$={class:"bg-white dark:bg-slate-800 overflow-hidden shadow-xl sm:rounded-lg p-6"},B={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},z={class:"flex gap-4 w-full md:w-auto"},Q={class:"relative w-full md:w-64"},T={class:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700"},A={class:"w-full text-left text-sm text-slate-600 dark:text-slate-400"},G={class:"divide-y divide-slate-200 dark:divide-slate-700"},H={class:"px-6 py-4"},J={class:"px-6 py-4 font-medium text-slate-900 dark:text-white"},K={class:"px-6 py-4"},R={class:"font-medium text-slate-900 dark:text-white"},W={class:"text-xs text-slate-500"},X={class:"px-6 py-4 text-right font-mono"},Y={class:"px-6 py-4 text-right font-mono"},Z={class:"px-6 py-4"},tt={class:"px-6 py-4 text-xs italic"},et={key:0},st={class:"mt-6"},lt={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ot={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},at={class:"inline-block align-bottom bg-white dark:bg-slate-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},rt={class:"bg-white dark:bg-slate-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},dt={class:"flex justify-between items-center mb-4 pb-4 border-b border-slate-200 dark:border-slate-700"},it={class:"sm:flex sm:items-start"},nt={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},ct={class:"mt-2"},mt={key:0,class:"text-red-500 text-xs mt-2"},ut={class:"bg-slate-50 dark:bg-slate-700/50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},pt=["disabled"],jt={__name:"Index",props:{forecasts:Object,filters:Object},setup(c){const h=c,m=x(h.filters.search||""),u=x(h.filters.month||""),f=x(!1),b=x(null),a=S({file:null}),w=()=>{M.get(route("planning.forecast.index"),{search:m.value,month:u.value},{preserveState:!0,replace:!0})};F([m,u],()=>{w()});const I=()=>{console.log("Opening Forecast Import Modal"),f.value=!0},p=()=>{console.log("Closing Forecast Import Modal"),f.value=!1,a.reset()},C=()=>{b.value.files[0]&&(a.file=b.value.files[0],a.post(route("planning.forecast.import"),{onSuccess:()=>p()}))};return(xt,e)=>(n(),d(v,null,[i(o(j),{title:"Sales Forecast"}),i(V,{title:"Sales Forecast"},{header:_(()=>[...e[2]||(e[2]=[t("h2",{class:"font-semibold text-xl text-slate-800 dark:text-slate-200 leading-tight"}," Sales Forecast ",-1)])]),default:_(()=>[t("div",P,[t("div",U,[t("div",$,[t("div",B,[t("div",z,[t("div",Q,[y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),type:"text",placeholder:"Search Customer / Product...",class:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[k,m.value]]),i(o(O),{class:"w-5 h-5 text-slate-400 absolute left-3 top-2.5"})]),y(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),type:"month",class:"rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[k,u.value]])]),t("button",{onClick:I,class:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors"},[i(o(E),{class:"w-5 h-5"}),e[3]||(e[3]=r(" Import Excel ",-1))])]),t("div",T,[t("table",A,[e[5]||(e[5]=t("thead",{class:"bg-slate-50 dark:bg-slate-700/50 text-xs uppercase font-semibold text-slate-500 dark:text-slate-300"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Period"),t("th",{class:"px-6 py-3"},"Customer"),t("th",{class:"px-6 py-3"},"Product"),t("th",{class:"px-6 py-3 text-right"},"Qty Forecast"),t("th",{class:"px-6 py-3 text-right"},"Qty PO (Actual)"),t("th",{class:"px-6 py-3"},"Unit"),t("th",{class:"px-6 py-3"},"Notes")])],-1)),t("tbody",G,[(n(!0),d(v,null,D(c.forecasts.data,s=>(n(),d("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors"},[t("td",H,l(new Date(s.period).toLocaleDateString("id-ID",{year:"numeric",month:"long"})),1),t("td",J,l(s.customer?.name),1),t("td",K,[t("div",R,l(s.product?.name),1),t("div",W,l(s.product?.sku),1)]),t("td",X,l(Number(s.qty_forecast).toLocaleString("id-ID")),1),t("td",Y,[t("span",{class:N({"text-blue-600 dark:text-blue-400 font-bold":s.qty_actual>0,"text-slate-400":s.qty_actual===0})},l(Number(s.qty_actual).toLocaleString("id-ID")),3)]),t("td",Z,l(s.product?.unit?.code),1),t("td",tt,l(s.notes||"-"),1)]))),128)),c.forecasts.data.length===0?(n(),d("tr",et,[...e[4]||(e[4]=[t("td",{colspan:"7",class:"px-6 py-8 text-center text-slate-500"}," No forecast data found. Import Excel to get started. ",-1)])])):g("",!0)])])]),t("div",st,[i(q,{links:c.forecasts.links},null,8,["links"])])])])]),f.value?(n(),d("div",lt,[t("div",ot,[t("div",{class:"fixed inset-0 bg-slate-900 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:p}),e[8]||(e[8]=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),t("div",at,[t("div",rt,[t("div",dt,[e[6]||(e[6]=t("h3",{class:"text-lg leading-6 font-bold text-slate-900 dark:text-white",id:"modal-title"}," Import Forecast Data ",-1)),t("button",{onClick:p,class:"text-slate-400 hover:text-slate-500 transition-colors"},[i(o(L),{class:"w-6 h-6"})])]),t("div",it,[t("div",nt,[t("div",ct,[e[7]||(e[7]=t("p",{class:"text-sm text-slate-500 dark:text-slate-400 mb-4"},[r(" Upload an Excel file (.xlsx, .xls) with columns: "),t("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"customer_code"),r(", "),t("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"product_sku"),r(", "),t("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"period"),r(", "),t("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"qty"),r(", "),t("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"notes"),r(". ")],-1)),t("input",{ref_key:"fileInput",ref:b,type:"file",class:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100 dark:file:bg-emerald-900/30 dark:file:text-emerald-400",accept:".xlsx, .xls, .csv"},null,512),o(a).errors.file?(n(),d("div",mt,l(o(a).errors.file),1)):g("",!0)])])])]),t("div",ut,[t("button",{onClick:C,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-emerald-600 text-base font-medium text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:ml-3 sm:w-auto sm:text-sm",disabled:o(a).processing},l(o(a).processing?"Importing...":"Import"),9,pt),t("button",{onClick:p,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-slate-300 dark:border-slate-600 shadow-sm px-4 py-2 bg-white dark:bg-slate-800 text-base font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):g("",!0)]),_:1})],64))}};export{jt as default};
