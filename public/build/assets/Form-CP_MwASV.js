import{f as A,c as r,a as i,u as l,h as S,w as g,b as e,l as w,d as y,i as q,j as m,v as x,o as a,t as n,e as b,F as p,g as _,k as v,n as C,z as D}from"./app-zJsw02vx.js";import{_ as U}from"./AppLayout-D4BpQC0B.js";import{r as I}from"./ArrowLeftIcon-BN2kMKgd.js";import{r as B}from"./PlusIcon-Cmb2acl8.js";import{r as F}from"./TrashIcon-XrsR0Tep.js";/* empty css            */import"./XMarkIcon-DfeFp9AX.js";import"./SunIcon-zdIWEs-R.js";import"./WrenchScrewdriverIcon-D_aAqD7I.js";import"./DocumentPlusIcon-pDB4SSRv.js";import"./TruckIcon-DHPnLxIR.js";import"./DocumentTextIcon-Bgyb8RGC.js";import"./ShoppingCartIcon-BP7AbJ38.js";import"./MapPinIcon-CsgHsumu.js";import"./SparklesIcon-Otaa2E01.js";import"./CubeIcon-CZD74TpM.js";import"./ClockIcon-C-qVshqO.js";import"./CheckCircleIcon-BYy8QWv7.js";import"./ShieldCheckIcon-6jFN3elY.js";const M={class:"max-w-full px-4 sm:px-6 lg:px-8 mx-auto"},$={class:"rounded-2xl glass-card p-6"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={key:0,class:"mt-1 text-xs text-red-500"},T={key:0,class:"mt-1 text-xs text-red-500"},z=["value"],E={key:0,class:"mt-1 text-xs text-red-500"},O={key:0,class:"mt-1 text-xs text-red-500"},P={class:"col-span-full"},Q={class:"rounded-2xl glass-card p-6"},W={class:"flex items-center justify-between mb-4"},J={class:"space-y-4 max-h-[500px] overflow-y-auto custom-scrollbar pr-2"},L={key:0,class:"text-center py-8 text-slate-500 border border-dashed border-slate-200 dark:border-slate-700 rounded-xl"},R={class:"flex-1"},G=["onUpdate:modelValue","onChange"],H=["value"],K={class:"w-32"},Z=["value"],tt={class:"w-32"},et=["onUpdate:modelValue"],st={class:"w-24"},lt={class:"flex items-end pb-1"},ot=["onClick"],rt={class:"flex justify-end gap-3"},at=["disabled"],At={__name:"Form",props:{adjustment:Object,adjustmentNumber:String,warehouses:Array,products:Array},setup(c){const s=A({adjustment_number:c.adjustmentNumber,warehouse_id:"",adjustment_date:new Date().toISOString().split("T")[0],reason:"",notes:"",items:[]}),h=()=>{s.items.push({product_id:"",qty_system:0,qty_actual:0})},j=u=>{s.items.splice(u,1)},N=async u=>{const t=s.items[u];if(!(!t.product_id||!s.warehouse_id))try{const o=await D.get("/inventory/stock-check",{params:{product_id:t.product_id,warehouse_id:s.warehouse_id}});t.qty_system=o.data.qty}catch(o){console.error("Error fetching stock:",o),t.qty_system=0}},V=()=>{s.post("/inventory/adjustments")},k=u=>Number(u.qty_actual)-Number(u.qty_system);return(u,t)=>(a(),r(p,null,[i(l(S),{title:"New Adjustment"}),i(U,{title:"New Adjustment"},{default:g(()=>[e("div",M,[i(l(w),{href:"/inventory/adjustments",class:"inline-flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white mb-6"},{default:g(()=>[i(l(I),{class:"h-4 w-4"}),t[5]||(t[5]=y(" Back to Adjustments ",-1))]),_:1}),e("form",{onSubmit:q(V,["prevent"]),class:"space-y-6"},[e("div",$,[t[12]||(t[12]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-white mb-4"},"Adjustment Details",-1)),e("div",X,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2"},"Adjustment Number",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>l(s).adjustment_number=o),type:"text",class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 px-4 text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",placeholder:"ADJ-YYYYMM-XXXX"},null,512),[[x,l(s).adjustment_number]]),l(s).errors.adjustment_number?(a(),r("p",Y,n(l(s).errors.adjustment_number),1)):b("",!0)]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2"},"Date",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l(s).adjustment_date=o),type:"date",class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 px-4 text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50"},null,512),[[x,l(s).adjustment_date]]),l(s).errors.adjustment_date?(a(),r("p",T,n(l(s).errors.adjustment_date),1)):b("",!0)]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2"},"Warehouse",-1)),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>l(s).warehouse_id=o),class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 px-4 text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50"},[t[8]||(t[8]=e("option",{value:""},"Select Warehouse",-1)),(a(!0),r(p,null,_(c.warehouses,o=>(a(),r("option",{key:o.id,value:o.id},n(o.name),9,z))),128))],512),[[v,l(s).warehouse_id]]),l(s).errors.warehouse_id?(a(),r("p",E,n(l(s).errors.warehouse_id),1)):b("",!0)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2"},"Reason",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l(s).reason=o),type:"text",class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 px-4 text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",placeholder:"e.g. Broken items, Found items"},null,512),[[x,l(s).reason]]),l(s).errors.reason?(a(),r("p",O,n(l(s).errors.reason),1)):b("",!0)]),e("div",P,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2"},"Notes",-1)),m(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>l(s).notes=o),rows:"2",class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 px-4 text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50"},null,512),[[x,l(s).notes]])])])]),e("div",Q,[e("div",W,[t[14]||(t[14]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-white"},"Items to Adjust",-1)),e("button",{type:"button",onClick:h,class:"inline-flex items-center gap-2 text-sm font-medium text-blue-400 hover:text-blue-300"},[i(l(B),{class:"h-4 w-4"}),t[13]||(t[13]=y(" Add Item ",-1))])]),e("div",J,[l(s).items.length===0?(a(),r("div",L,' No items added. Click "Add Item" to start. ')):b("",!0),(a(!0),r(p,null,_(l(s).items,(o,f)=>(a(),r("div",{key:f,class:"flex flex-col sm:flex-row gap-4 p-4 rounded-xl bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700"},[e("div",R,[t[16]||(t[16]=e("label",{class:"block text-xs text-slate-500 dark:text-slate-400 mb-1"},"Product",-1)),m(e("select",{"onUpdate:modelValue":d=>o.product_id=d,onChange:d=>N(f),class:"block w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-800 py-2 px-3 text-sm text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500"},[t[15]||(t[15]=e("option",{value:""},"Select Product",-1)),(a(!0),r(p,null,_(c.products,d=>(a(),r("option",{key:d.id,value:d.id},n(d.name)+" ("+n(d.sku)+") ",9,H))),128))],40,G),[[v,o.product_id]])]),e("div",K,[t[17]||(t[17]=e("label",{class:"block text-xs text-slate-500 dark:text-slate-400 mb-1"},"System Qty",-1)),e("input",{type:"text",value:o.qty_system,readonly:"",class:"block w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 py-2 px-3 text-sm text-slate-500 dark:text-slate-400"},null,8,Z)]),e("div",tt,[t[18]||(t[18]=e("label",{class:"block text-xs text-slate-500 dark:text-slate-400 mb-1"},"Actual Qty",-1)),m(e("input",{"onUpdate:modelValue":d=>o.qty_actual=d,type:"number",step:"0.0001",class:"block w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-800 py-2 px-3 text-sm text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500"},null,8,et),[[x,o.qty_actual]])]),e("div",st,[t[19]||(t[19]=e("label",{class:"block text-xs text-slate-500 dark:text-slate-400 mb-1"},"Difference",-1)),e("div",{class:C(["py-2 text-sm font-medium",k(o)>=0?"text-emerald-400":"text-red-400"])},n(k(o)>0?"+":"")+n(k(o)),3)]),e("div",lt,[e("button",{type:"button",onClick:d=>j(f),class:"p-1.5 text-slate-500 dark:text-slate-400 hover:text-red-400 transition-colors"},[i(l(F),{class:"h-5 w-5"})],8,ot)])]))),128))])]),e("div",rt,[i(l(w),{href:"/inventory/adjustments",class:"rounded-xl bg-slate-50 dark:bg-slate-800 px-6 py-2.5 text-sm font-semibold text-slate-600 dark:text-slate-300 hover:bg-slate-700 transition-colors"},{default:g(()=>[...t[20]||(t[20]=[y(" Cancel ",-1)])]),_:1}),e("button",{type:"submit",class:"rounded-xl bg-blue-600 px-6 py-2.5 text-sm font-semibold text-white shadow-lg shadow-blue-500/25 hover:bg-blue-500 transition-colors",disabled:l(s).processing}," Save Draft ",8,at)])],32)])]),_:1})],64))}};export{At as default};
