import{p as g,c as n,b as u,u as o,h as P,d as U,e as t,j as k,o as b,F as m,g as f,t as r,n as I,C as T,k as v,y as E,f as x,v as c,i as y,r as h}from"./app-BmlxQAUG.js";import{c as w,_ as j}from"./AppLayout-DPgtj7gw.js";import{r as D}from"./MagnifyingGlassIcon-DurYBA2a.js";import{r as L}from"./PencilSquareIcon-QP7UPNP3.js";import{r as F}from"./TrashIcon-CpzKjMD-.js";/* empty css            */import"./XMarkIcon-Bt_PljEc.js";import"./SunIcon-IX4FHdcm.js";import"./WrenchScrewdriverIcon-Ceyd6Wp4.js";import"./CheckBadgeIcon-_hPURfRy.js";import"./ShoppingCartIcon-BjgskwZE.js";import"./CubeIcon-CS_qZvHW.js";import"./TruckIcon-CqydzLcT.js";const A={class:"space-y-6"},B={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},M={class:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2"},R={class:"grid grid-cols-1 gap-6"},z={class:"glass-card p-6"},W={class:"flex items-center gap-4 mb-6"},Y={class:"relative flex-1 max-w-md"},q={class:"overflow-x-auto overflow-y-auto max-h-[600px]"},G={class:"w-full text-left"},H={class:"divide-y divide-slate-100 dark:divide-white/5"},J={class:"px-4 py-3"},K={class:"font-bold text-slate-900 dark:text-white"},Q={class:"text-xs text-slate-500 dark:text-slate-400"},X={class:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300"},Z={class:"px-4 py-3"},tt={class:"px-4 py-3"},et={class:"flex items-center gap-2"},lt={class:"flex-1 h-1.5 w-24 bg-slate-200 dark:bg-slate-800 rounded-full overflow-hidden"},st={class:"text-xs text-slate-500 dark:text-slate-400 font-mono"},ot={class:"px-4 py-3 text-right font-mono font-bold text-emerald-600 dark:text-emerald-400"},at={class:"px-4 py-3 text-right"},rt={class:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-all"},dt=["onClick"],it=["onClick"],nt={key:0},ut={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},bt={class:"relative w-full max-w-lg bg-white dark:bg-slate-900 border border-slate-200 dark:border-white/10 rounded-2xl p-6 shadow-2xl"},pt={class:"text-lg font-bold text-slate-900 dark:text-white mb-6"},xt=["value"],ct={class:"grid grid-cols-2 gap-4"},mt={class:"grid grid-cols-2 gap-4"},gt={class:"flex justify-end gap-3 mt-6"},kt={type:"submit",class:"px-4 py-2 bg-emerald-600 dark:bg-emerald-500 hover:bg-emerald-500 dark:hover:bg-emerald-400 text-white dark:text-slate-900 font-bold rounded-lg transition-colors"},Ut={__name:"Index",props:{opportunities:Array,leads:Array,title:String},setup(p){const _=p,s=g({name:"",lead_id:"",amount:0,stage:"prospecting",close_date:"",probability:10}),d=h(!1),i=h(null),C=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),N=()=>{i.value?s.put(route("crm.opportunities.update",i.value.id),{onSuccess:()=>{d.value=!1,i.value=null,s.reset()}}):s.post(route("crm.opportunities.store"),{onSuccess:()=>{d.value=!1,s.reset()}})},O=a=>{i.value=a,s.name=a.name,s.lead_id=_.leads.find(e=>e.name===a.lead)?.id||"",s.amount=a.amount,s.stage=a.stage,s.close_date=a.close_date,s.probability=a.probability,d.value=!0},S=a=>{confirm("Are you sure you want to delete this opportunity?")&&g({}).delete(route("crm.opportunities.destroy",a.id))},V=a=>({prospecting:"bg-blue-500/10 text-blue-400 border-blue-500/20",negotiation:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",closed_won:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20",closed_lost:"bg-slate-500/10 text-slate-400 border-slate-500/20"})[a]||"bg-slate-500/10 text-slate-400 border-slate-500/20";return(a,e)=>(b(),n(m,null,[u(o(P),{title:p.title},null,8,["title"]),u(j,{title:p.title},{default:U(()=>[t("div",A,[t("div",B,[t("div",null,[t("h2",M,[u(o(w),{class:"h-6 w-6 text-emerald-600 dark:text-emerald-400"}),e[9]||(e[9]=k(" OPPORTUNITY PIPELINE ",-1))]),e[10]||(e[10]=t("p",{class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},"Track deals, negotiations, and projected revenue.",-1))]),t("button",{onClick:e[0]||(e[0]=l=>{d.value=!0,i.value=null,o(s).reset()}),class:"px-4 py-2 bg-emerald-600 dark:bg-emerald-500 hover:bg-emerald-500 dark:hover:bg-emerald-400 text-white dark:text-slate-900 font-bold rounded-lg transition-all flex items-center gap-2 shadow-lg shadow-emerald-500/30"},[u(o(w),{class:"h-5 w-5"}),e[11]||(e[11]=k(" NEW OPPORTUNITY ",-1))])]),t("div",R,[t("div",z,[t("div",W,[t("div",Y,[u(o(D),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400 dark:text-slate-500"}),e[12]||(e[12]=t("input",{type:"text",placeholder:"Search opportunities...",class:"w-full bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg pl-10 pr-4 py-2 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:border-emerald-500/50 focus:ring-1 focus:ring-emerald-500/50 transition-all outline-none"},null,-1))])]),t("div",q,[t("table",G,[e[14]||(e[14]=t("thead",null,[t("tr",{class:"text-xs text-slate-500 font-bold uppercase tracking-wider border-b border-slate-200 dark:border-white/10"},[t("th",{class:"px-4 py-3"},"Opportunity Name"),t("th",{class:"px-4 py-3"},"Lead / Customer"),t("th",{class:"px-4 py-3"},"Stage"),t("th",{class:"px-4 py-3"},"Probability"),t("th",{class:"px-4 py-3 text-right"},"Value"),t("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),t("tbody",H,[(b(!0),n(m,null,f(p.opportunities,l=>(b(),n("tr",{key:l.id,class:"group hover:bg-slate-50 dark:hover:bg-white/5 transition-all"},[t("td",J,[t("div",K,r(l.name),1),t("div",Q,"Close: "+r(l.close_date||"TBD"),1)]),t("td",X,r(l.lead),1),t("td",Z,[t("span",{class:I(["px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider border",V(l.stage)])},r(l.stage.replace("_"," ")),3)]),t("td",tt,[t("div",et,[t("div",lt,[t("div",{class:"h-full bg-emerald-500",style:T({width:`${l.probability}%`})},null,4)]),t("span",st,r(l.probability)+"%",1)])]),t("td",ot,r(C(l.amount)),1),t("td",at,[t("div",rt,[t("button",{onClick:$=>O(l),class:"p-1.5 text-slate-400 hover:text-cyan-600 dark:hover:text-cyan-400 hover:bg-cyan-50 dark:hover:bg-cyan-500/10 rounded transition-all"},[u(o(L),{class:"h-4 w-4"})],8,dt),t("button",{onClick:$=>S(l),class:"p-1.5 text-slate-400 hover:text-rose-600 dark:hover:text-rose-400 hover:bg-rose-50 dark:hover:bg-rose-500/10 rounded transition-all"},[u(o(F),{class:"h-4 w-4"})],8,it)])])]))),128)),p.opportunities.length===0?(b(),n("tr",nt,[...e[13]||(e[13]=[t("td",{colspan:"6",class:"px-4 py-12 text-center text-slate-500 uppercase tracking-widest text-sm"}," No opportunities found ",-1)])])):v("",!0)])])])])])]),d.value?(b(),n("div",ut,[t("div",{class:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:e[1]||(e[1]=l=>d.value=!1)}),t("div",bt,[t("h3",pt,r(i.value?"Edit Opportunity":"New Opportunity"),1),t("form",{onSubmit:E(N,["prevent"]),class:"space-y-4"},[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1"},"Opportunity Name",-1)),x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o(s).name=l),type:"text",class:"w-full bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg px-4 py-2 text-slate-900 dark:text-white focus:border-emerald-500 outline-none transition-colors",required:""},null,512),[[c,o(s).name]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1"},"Related Lead",-1)),x(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>o(s).lead_id=l),class:"w-full bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg px-4 py-2 text-slate-900 dark:text-white focus:border-emerald-500 outline-none transition-colors"},[e[16]||(e[16]=t("option",{value:""},"Select Lead...",-1)),(b(!0),n(m,null,f(p.leads,l=>(b(),n("option",{key:l.id,value:l.id},r(l.name),9,xt))),128))],512),[[y,o(s).lead_id]])]),t("div",ct,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1"},"Estimated Value",-1)),x(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o(s).amount=l),type:"number",class:"w-full bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg px-4 py-2 text-slate-900 dark:text-white focus:border-emerald-500 outline-none transition-colors"},null,512),[[c,o(s).amount]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1"},"Stage",-1)),x(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>o(s).stage=l),class:"w-full bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg px-4 py-2 text-slate-900 dark:text-white focus:border-emerald-500 outline-none transition-colors"},[...e[19]||(e[19]=[t("option",{value:"prospecting"},"Prospecting",-1),t("option",{value:"negotiation"},"Negotiation",-1),t("option",{value:"closed_won"},"Closed Won",-1),t("option",{value:"closed_lost"},"Closed Lost",-1)])],512),[[y,o(s).stage]])])]),t("div",mt,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1"},"Probability (%)",-1)),x(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>o(s).probability=l),type:"number",min:"0",max:"100",class:"w-full bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg px-4 py-2 text-slate-900 dark:text-white focus:border-emerald-500 outline-none transition-colors"},null,512),[[c,o(s).probability]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1"},"Expected Close",-1)),x(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>o(s).close_date=l),type:"date",class:"w-full bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg px-4 py-2 text-slate-900 dark:text-white focus:border-emerald-500 outline-none transition-colors"},null,512),[[c,o(s).close_date]])])]),t("div",gt,[t("button",{type:"button",onClick:e[8]||(e[8]=l=>d.value=!1),class:"px-4 py-2 text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white transition-colors"},"Cancel"),t("button",kt,r(i.value?"Update Opportunity":"Create Opportunity"),1)])],32)])])):v("",!0)]),_:1},8,["title"])],64))}};export{Ut as default};
