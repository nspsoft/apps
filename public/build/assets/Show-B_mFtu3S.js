import{f as I,c as i,a as d,u as s,h as R,w as O,b as t,l as $,d as x,o as n,F as y,e as b,t as o,n as C,g as L,j as M,K as U,v as S,s as w,m as A}from"./app-CmHGKYZj.js";import{_ as H}from"./AppLayout-CzRMOHcg.js";import{f as p,a as g}from"./helpers-DnzC1tLX.js";import{r as Q}from"./ArrowLeftIcon--n6xgfdm.js";import{r as z}from"./PrinterIcon-D16qQpjs.js";import{r as G}from"./PaperAirplaneIcon-Dy_kUT2g.js";import{r as j}from"./PencilSquareIcon-BtxTc6SP.js";import{r as D}from"./CheckIcon-CUU1kN4g.js";import{r as P}from"./XMarkIcon-DXh7FWmY.js";import{r as W}from"./TruckIcon-CUCCfv9T.js";import{r as J}from"./DocumentTextIcon-BdIaA6Ll.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SunIcon-02OMQ6sZ.js";import"./WrenchScrewdriverIcon-CprG2P8y.js";import"./DocumentPlusIcon-D3fGGAQC.js";import"./ShoppingCartIcon-BMiDQGoD.js";import"./MapPinIcon-D7atlnzK.js";import"./SparklesIcon-o8BcquHx.js";import"./CubeIcon-DtouJRep.js";import"./ClockIcon-BobWk61W.js";import"./CheckCircleIcon-BmBwtu4v.js";import"./ShieldCheckIcon-BpQJQprw.js";const X={class:"max-w-7xl mx-auto"},Y={class:"flex items-center justify-between mb-6"},Z={class:"flex items-center gap-3"},tt=["href"],et={class:"space-y-6"},st={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},rt={class:"md:col-span-2 glass-card rounded-2xl p-6"},at={class:"flex items-center gap-4 mb-6"},ot={class:"flex h-12 w-12 items-center justify-center rounded-xl bg-blue-500/10"},dt={class:"text-xl font-bold text-slate-900 dark:text-white"},lt={class:"flex items-center gap-2 mt-1"},it={class:"text-sm text-slate-500"},nt={key:0,class:"text-sm font-medium text-blue-400 animate-pulse"},ct={class:"grid grid-cols-2 sm:grid-cols-4 gap-6 pt-6 border-t border-slate-200 dark:border-slate-800"},xt={class:"text-sm font-medium text-slate-900 dark:text-white"},ut={class:"text-sm font-medium text-slate-900 dark:text-white"},pt={class:"text-sm font-medium text-slate-900 dark:text-white"},mt={class:"text-sm font-bold text-slate-900 dark:text-white"},ht={class:"glass-card rounded-2xl p-6"},bt={class:"mb-4"},gt={class:"text-sm font-medium text-slate-900 dark:text-white"},ft={class:"mb-4"},vt={class:"text-sm text-slate-600 dark:text-slate-300 whitespace-pre-line"},kt={class:"glass-card rounded-2xl overflow-hidden"},yt={class:"overflow-x-auto"},wt={class:"min-w-full divide-y divide-slate-100 dark:divide-slate-800"},_t={class:"divide-y divide-slate-100 dark:divide-slate-800"},Ot={class:"px-6 py-4 whitespace-nowrap"},qt={class:"flex items-center"},$t={class:"text-sm font-medium text-slate-900 dark:text-white"},Ct={class:"text-xs text-slate-500"},Mt={class:"px-6 py-4 whitespace-nowrap text-right min-w-[200px]"},St={key:0,class:"flex flex-col gap-2 items-end"},At={class:"flex items-center gap-2"},jt=["onKeyup"],Dt={class:"flex items-center gap-1"},Pt=["onClick"],Tt={key:0,class:"text-[9px] text-red-500 font-bold uppercase"},Nt={key:1,class:"flex items-center justify-end gap-2 group"},Ft={class:"text-sm font-medium text-slate-900 dark:text-white"},Vt=["onClick"],Bt={class:"px-6 py-4 whitespace-nowrap text-right"},Et={class:"text-sm text-slate-600 dark:text-slate-300"},Kt={class:"px-6 py-4 whitespace-nowrap text-right"},It={class:"text-sm text-red-400"},Rt={class:"px-6 py-4 whitespace-nowrap text-right"},Lt={class:"px-6 py-4 whitespace-nowrap text-right"},Ut={class:"text-sm text-slate-600 dark:text-slate-300"},Ht={class:"px-6 py-4 whitespace-nowrap text-right"},Qt={class:"text-sm text-slate-600 dark:text-slate-300"},zt={class:"px-6 py-4 whitespace-nowrap text-right"},Gt={class:"text-sm font-medium text-slate-900 dark:text-white"},Wt={class:"bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50"},Jt={class:"px-6 py-4 text-right text-sm font-medium text-slate-900 dark:text-white"},Xt={colspan:"7",class:"px-6 py-4 text-right text-sm font-medium text-slate-500 dark:text-slate-400"},Yt={class:"px-6 py-4 text-right text-sm font-medium text-slate-900 dark:text-white"},Zt={class:"px-6 py-4 text-right text-base font-bold text-blue-400"},_e={__name:"Show",props:{purchaseOrder:Object},setup(a){const f=a,v=A(null),c=I({qty:0,reason:""}),T=l=>{v.value=l.id,c.qty=parseFloat(l.qty)||0,c.reason=""},N=()=>{v.value=null},q=l=>{c.put(route("purchasing.orders.update-item-qty",l),{preserveScroll:!0,onSuccess:()=>{v.value=null}})},F=()=>{confirm("Are you sure you want to submit this order for approval?")&&w.post(route("purchasing.orders.submit",f.purchaseOrder.id))},V=()=>{confirm("Are you sure you want to approve this order?")&&w.post(route("purchasing.orders.approve",f.purchaseOrder.id))},B=()=>{confirm("Are you sure you want to mark this as ordered?")&&w.post(route("purchasing.orders.mark-ordered",f.purchaseOrder.id))},E=()=>{confirm("Are you sure you want to cancel this order?")&&w.post(route("purchasing.orders.cancel",f.purchaseOrder.id))},K=l=>({draft:"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",submitted:"bg-amber-500/20 text-amber-400 border-amber-500/30",approved:"bg-blue-500/20 text-blue-400 border-blue-500/30",ordered:"bg-purple-500/20 text-purple-400 border-purple-500/30",partial:"bg-orange-500/20 text-orange-400 border-orange-500/30",received:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",cancelled:"bg-red-500/20 text-red-400 border-red-500/30"})[l]||"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",k=A(""),m=l=>{k.value=l},h=()=>{k.value=""},_=l=>l?new Date(l).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-";return(l,e)=>(n(),i(y,null,[d(s(R),{title:`PO ${a.purchaseOrder.po_number}`},null,8,["title"]),d(H,{title:"Purchase Orders"},{default:O(()=>[t("div",X,[t("div",Y,[d(s($),{href:"/purchasing/orders",class:"inline-flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white"},{default:O(()=>[d(s(Q),{class:"h-4 w-4"}),e[7]||(e[7]=x(" Back to List ",-1))]),_:1}),t("div",Z,[t("a",{href:`/purchasing/orders/${a.purchaseOrder.id}/print`,target:"_blank",class:"inline-flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-800 px-4 py-2 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-700 hover:text-slate-900 dark:text-white transition-colors"},[d(s(z),{class:"h-4 w-4"}),e[8]||(e[8]=x(" Print ",-1))],8,tt),a.purchaseOrder.status==="draft"?(n(),i(y,{key:0},[t("button",{onClick:F,onMouseenter:e[0]||(e[0]=r=>m("Submit for Approval")),onMouseleave:h,class:"inline-flex items-center gap-2 rounded-xl bg-amber-600/10 border border-amber-600/20 px-4 py-2 text-sm font-semibold text-amber-400 hover:bg-amber-600/20 transition-colors"},[d(s(G),{class:"h-4 w-4"}),e[9]||(e[9]=x(" Submit ",-1))],32),d(s($),{href:`/purchasing/orders/${a.purchaseOrder.id}/edit`,onMouseenter:e[1]||(e[1]=r=>m("Edit Purchase Order")),onMouseleave:h,class:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-500 transition-colors shadow-lg shadow-blue-500/25"},{default:O(()=>[d(s(j),{class:"h-4 w-4"}),e[10]||(e[10]=x(" Edit ",-1))]),_:1},8,["href"])],64)):b("",!0),a.purchaseOrder.status==="submitted"?(n(),i(y,{key:1},[t("button",{onClick:V,onMouseenter:e[2]||(e[2]=r=>m("Approve Order")),onMouseleave:h,class:"inline-flex items-center gap-2 rounded-xl bg-green-600/10 border border-green-600/20 px-4 py-2 text-sm font-semibold text-green-400 hover:bg-green-600/20 transition-colors"},[d(s(D),{class:"h-4 w-4"}),e[11]||(e[11]=x(" Approve ",-1))],32),t("button",{onClick:E,onMouseenter:e[3]||(e[3]=r=>m("Reject/Cancel Order")),onMouseleave:h,class:"inline-flex items-center gap-2 rounded-xl bg-red-600/10 border border-red-600/20 px-4 py-2 text-sm font-semibold text-red-400 hover:bg-red-600/20 transition-colors"},[d(s(P),{class:"h-4 w-4"}),e[12]||(e[12]=x(" Reject ",-1))],32)],64)):b("",!0),a.purchaseOrder.status==="approved"?(n(),i("button",{key:2,onClick:B,onMouseenter:e[4]||(e[4]=r=>m("Mark as Sent to Supplier")),onMouseleave:h,class:"inline-flex items-center gap-2 rounded-xl bg-purple-600/10 border border-purple-600/20 px-4 py-2 text-sm font-semibold text-purple-400 hover:bg-purple-600/20 transition-colors"},[d(s(W),{class:"h-4 w-4"}),e[13]||(e[13]=x(" Mark Ordered ",-1))],32)):b("",!0)])]),t("div",et,[t("div",st,[t("div",rt,[t("div",at,[t("div",ot,[d(s(J),{class:"h-6 w-6 text-blue-400"})]),t("div",null,[t("h1",dt,o(a.purchaseOrder.po_number),1),t("div",lt,[t("span",it,"Created by "+o(a.purchaseOrder.created_by?.name)+" on "+o(_(a.purchaseOrder.created_at)),1),t("span",{class:C(["inline-flex items-center rounded-full border px-2 py-0.5 text-xs font-medium",K(a.purchaseOrder.status)])},o(a.purchaseOrder.status),3),k.value?(n(),i("span",nt,o(k.value),1)):b("",!0)])])]),t("div",ct,[t("div",null,[e[14]||(e[14]=t("div",{class:"text-xs text-slate-500 uppercase tracking-wider mb-1"},"Supplier",-1)),t("div",xt,o(a.purchaseOrder.supplier?.name),1)]),t("div",null,[e[15]||(e[15]=t("div",{class:"text-xs text-slate-500 uppercase tracking-wider mb-1"},"Order Date",-1)),t("div",ut,o(_(a.purchaseOrder.order_date)),1)]),t("div",null,[e[16]||(e[16]=t("div",{class:"text-xs text-slate-500 uppercase tracking-wider mb-1"},"Expected",-1)),t("div",pt,o(_(a.purchaseOrder.expected_date)),1)]),t("div",null,[e[17]||(e[17]=t("div",{class:"text-xs text-slate-500 uppercase tracking-wider mb-1"},"Total Amount",-1)),t("div",mt,o(s(p)(a.purchaseOrder.total)),1)])])]),t("div",ht,[e[20]||(e[20]=t("h3",{class:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-3"},"Warehouse & Notes",-1)),t("div",bt,[e[18]||(e[18]=t("div",{class:"text-xs text-slate-500 uppercase tracking-wider mb-1"},"Destination",-1)),t("div",gt,o(a.purchaseOrder.warehouse?.name),1)]),t("div",ft,[e[19]||(e[19]=t("div",{class:"text-xs text-slate-500 uppercase tracking-wider mb-1"},"Notes",-1)),t("p",vt,o(a.purchaseOrder.notes||"No notes provided."),1)])])]),t("div",kt,[e[24]||(e[24]=t("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-800"},[t("h3",{class:"font-semibold text-slate-900 dark:text-white"},"Order Items")],-1)),t("div",yt,[t("table",wt,[e[23]||(e[23]=t("thead",null,[t("tr",{class:"bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50"},[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Product"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Qty"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Received"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Returned"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Balance"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Unit Price"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Disc %"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Total")])],-1)),t("tbody",_t,[(n(!0),i(y,null,L(a.purchaseOrder.items,r=>(n(),i("tr",{key:r.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30"},[t("td",Ot,[t("div",qt,[t("div",null,[t("div",$t,o(r.product?.name),1),t("div",Ct,o(r.product?.code||r.product?.sku),1)])])]),t("td",Mt,[v.value===r.id?(n(),i("div",St,[t("div",At,[M(t("input",{"onUpdate:modelValue":e[5]||(e[5]=u=>s(c).qty=u),type:"number",step:"any",class:"w-20 rounded-lg border-0 bg-slate-50 dark:bg-slate-800 text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50 py-1 font-bold text-center",onKeyup:U(u=>q(r.id),["enter"])},null,40,jt),[[S,s(c).qty]]),t("div",Dt,[t("button",{onClick:u=>q(r.id),class:"p-1.5 rounded-lg bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500/20 transition-colors",title:"Save"},[d(s(D),{class:"h-4 w-4"})],8,Pt),t("button",{onClick:N,class:"p-1.5 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",title:"Cancel"},[d(s(P),{class:"h-4 w-4"})])])]),M(t("input",{"onUpdate:modelValue":e[6]||(e[6]=u=>s(c).reason=u),type:"text",placeholder:"Alasan koreksi...",class:"w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-800 text-[10px] text-slate-500 dark:text-slate-400 focus:ring-1 focus:ring-blue-500/50 py-1 italic text-right",required:""},null,512),[[S,s(c).reason]]),s(c).errors.qty?(n(),i("div",Tt,o(s(c).errors.qty),1)):b("",!0)])):(n(),i("div",Nt,[t("span",Ft,o(s(g)(r.qty))+" "+o(r.unit?.name),1),t("button",{onClick:u=>T(r),class:"p-1 rounded-md text-blue-500 bg-blue-500/5 hover:bg-blue-500/10 transition-all shadow-sm",title:"Koreksi Qty"},[d(s(j),{class:"h-4 w-4"})],8,Vt)]))]),t("td",Bt,[t("span",Et,o(s(g)(r.qty_received||0)),1)]),t("td",Kt,[t("span",It,o(s(g)(r.qty_returned||0)),1)]),t("td",Rt,[t("span",{class:C(["text-sm font-bold",r.qty-(r.qty_received-(r.qty_returned||0))>0?"text-amber-400":"text-emerald-500"])},o(s(g)(r.qty-((r.qty_received||0)-(r.qty_returned||0)))),3)]),t("td",Lt,[t("div",Ut,o(s(p)(r.unit_price)),1)]),t("td",Ht,[t("div",Qt,o(s(g)(r.discount_percent))+"%",1)]),t("td",zt,[t("div",Gt,o(s(p)(r.qty*r.unit_price*(1-r.discount_percent/100))),1)])]))),128))]),t("tfoot",Wt,[t("tr",null,[e[21]||(e[21]=t("td",{colspan:"7",class:"px-6 py-4 text-right text-sm font-medium text-slate-500 dark:text-slate-400"},"Subtotal",-1)),t("td",Jt,o(s(p)(a.purchaseOrder.total*100/(100+parseFloat(a.purchaseOrder.tax_percent||11)))),1)]),t("tr",null,[t("td",Xt,"VAT ("+o(a.purchaseOrder.tax_percent)+"%)",1),t("td",Yt,o(s(p)(a.purchaseOrder.total-a.purchaseOrder.total*100/(100+parseFloat(a.purchaseOrder.tax_percent||11)))),1)]),t("tr",null,[e[22]||(e[22]=t("td",{colspan:"7",class:"px-6 py-4 text-right text-base font-bold text-slate-900 dark:text-white"},"Grand Total",-1)),t("td",Zt,o(s(p)(a.purchaseOrder.total)),1)])])])])])])])]),_:1})],64))}};export{_e as default};
