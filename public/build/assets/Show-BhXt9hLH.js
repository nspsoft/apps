import{p as j,B as P,c as i,b as d,u as r,h as V,d as u,e,l as g,t as l,n as k,o,m as y,j as h,k as x,F as v,g as O,f as D,a3 as B,v as q,r as E}from"./app-qauTKIkO.js";import{_ as F}from"./AppLayout-BSR6ets9.js";import{a as p,f}from"./helpers-BjqMQcOq.js";import{r as L}from"./ArrowLeftIcon-DjQDffGi.js";import{r as N}from"./DocumentTextIcon-DLoSUz9I.js";import{r as T}from"./TruckIcon-BKwUpA0c.js";import{r as A}from"./PrinterIcon-DQbKGb0C.js";import{r as K}from"./CheckCircleIcon-CeqTUWXh.js";import{r as S}from"./PencilSquareIcon-DiGZvEl1.js";import{r as M}from"./CheckIcon-D9Kyvd0f.js";import{r as R}from"./XMarkIcon-DN8u7QRi.js";/* empty css            */import"./SunIcon-DaJUJklG.js";import"./WrenchScrewdriverIcon-B2TLGCl5.js";import"./CheckBadgeIcon-62T3_Q6t.js";import"./ShoppingCartIcon-D3vITk1U.js";import"./CubeIcon-CtiI10Ot.js";const U={class:"space-y-6"},z={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},G={class:"flex items-center gap-4"},Q={class:"text-2xl font-bold text-slate-900 dark:text-white"},W={class:"flex items-center gap-3 mt-1 text-sm"},H={class:"text-slate-500"},J={class:"flex items-center gap-3"},X={href:"#",class:"flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-800 px-4 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-700 transition-colors"},Y={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Z={class:"lg:col-span-2 space-y-6"},ee={class:"rounded-2xl glass-card overflow-hidden"},te={class:"overflow-x-auto"},se={class:"w-full text-left text-sm text-slate-500 dark:text-slate-400"},ae={class:"divide-y divide-slate-100 dark:divide-slate-800"},re={class:"px-6 py-4"},le={class:"font-medium text-slate-900 dark:text-white"},de={class:"text-xs text-slate-500 font-mono"},oe={class:"px-6 py-4 text-right"},ne={class:"px-6 py-4 text-center font-bold text-slate-900 dark:text-white min-w-[200px]"},ie={key:0,class:"flex flex-col gap-2"},ce={class:"flex items-center gap-2 justify-center"},xe=["onKeyup"],ue={class:"flex items-center gap-1"},me=["onClick"],ge={key:0,class:"text-[9px] text-red-500 font-bold uppercase"},he={key:1,class:"flex items-center justify-center gap-2 group"},pe=["onClick"],fe={class:"px-6 py-4 text-center text-emerald-400 font-medium"},be={class:"px-6 py-4 text-center text-indigo-400 font-medium"},ye={class:"px-6 py-4 text-center text-red-400 font-medium"},ke={class:"px-6 py-4 text-center"},ve={class:"px-6 py-4 text-right font-medium text-slate-900 dark:text-white"},we={class:"bg-white dark:bg-slate-950 font-medium"},_e={class:"px-6 py-4 text-right text-slate-900 dark:text-white"},Oe={key:0},De={colspan:"7",class:"px-6 py-4 text-right text-slate-500 dark:text-slate-400"},qe={class:"px-6 py-4 text-right text-slate-900 dark:text-white"},Se={class:"px-6 py-4 text-right text-slate-900 dark:text-white text-lg font-bold"},Ce={class:"space-y-6"},Ie={class:"rounded-2xl glass-card p-6 space-y-6"},$e={class:"space-y-2"},je={class:"text-slate-900 dark:text-white font-bold text-base"},Pe={class:"flex items-start gap-2 text-sm text-slate-500 dark:text-slate-400"},Ve={class:"leading-relaxed"},Be={class:"flex items-center gap-2 text-sm text-slate-500 pt-1"},Ee={class:"font-medium"},Fe={class:"border-t border-slate-200 dark:border-slate-800 pt-6"},Le={class:"space-y-2"},Ne={class:"text-emerald-400 font-bold text-base"},Te={class:"flex items-start gap-2 text-sm text-slate-600 dark:text-slate-300"},Ae={class:"leading-relaxed"},Ke={key:0,class:"text-[10px] font-bold text-slate-600 uppercase italic pt-1"},Me={class:"rounded-2xl glass-card p-6"},Re={class:"space-y-4"},Ue={class:"text-sm text-slate-900 dark:text-white font-medium"},ze={class:"text-sm text-slate-900 dark:text-white"},Ge={class:"text-sm text-slate-900 dark:text-white"},Qe={key:0,class:"rounded-2xl glass-card p-6"},We={class:"space-y-3"},He={class:"flex flex-col"},Je={class:"text-[10px] text-slate-500"},Xe={class:"text-right"},Ye={class:"text-sm font-medium text-slate-900 dark:text-white"},pt={__name:"Show",props:{salesOrder:Object},setup(s){const b=E(null),c=j({qty:0,reason:""}),C=n=>{b.value=n.id,c.qty=parseFloat(n.qty)||0,c.reason=""},I=()=>{b.value=null},w=n=>{c.put(route("sales.orders.update-item-qty",n),{preserveScroll:!0,onSuccess:()=>{b.value=null}})},$=n=>({draft:"bg-slate-500/10 text-slate-500 dark:text-slate-400 ring-slate-500/20",confirmed:"bg-blue-500/10 text-blue-400 ring-blue-500/20",processing:"bg-amber-500/10 text-amber-400 ring-amber-500/20",shipped:"bg-purple-500/10 text-purple-400 ring-purple-500/20",delivered:"bg-emerald-500/10 text-emerald-400 ring-emerald-500/20",cancelled:"bg-red-500/10 text-red-400 ring-red-500/20"})[n]||"bg-slate-500/10 text-slate-500 dark:text-slate-400 ring-slate-500/20";return(n,t)=>{const _=P("MapPinIcon");return o(),i(v,null,[d(r(V),{title:`SO ${s.salesOrder.so_number}`},null,8,["title"]),d(F,{title:"Sales Order Details"},{default:u(()=>[e("div",U,[e("div",z,[e("div",G,[d(r(g),{href:n.route("sales.orders.index"),class:"p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white transition-colors"},{default:u(()=>[d(r(L),{class:"h-5 w-5"})]),_:1},8,["href"]),e("div",null,[e("h1",Q,l(s.salesOrder.so_number),1),e("div",W,[e("span",{class:k(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset uppercase tracking-wider",$(s.salesOrder.status)])},l(s.salesOrder.status),3),e("span",H," Created on "+l(new Date(s.salesOrder.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})),1)])])]),e("div",J,[["confirmed","processing","shipped","delivered"].includes(s.salesOrder.status)&&s.salesOrder.payment_status!=="paid"?(o(),y(r(g),{key:0,href:n.route("sales.orders.create-invoice",s.salesOrder.id),method:"post",as:"button",class:"flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-800 px-4 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-700 transition-colors"},{default:u(()=>[d(r(N),{class:"h-4 w-4 text-indigo-400"}),t[2]||(t[2]=h(" Create Invoice (All Delivered) ",-1))]),_:1},8,["href"])):x("",!0),["confirmed","processing","partial"].includes(s.salesOrder.status)?(o(),y(r(g),{key:1,href:n.route("sales.deliveries.create",{sales_order_id:s.salesOrder.id}),class:"flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2.5 text-sm font-medium text-slate-900 dark:text-white hover:bg-emerald-500 transition-colors shadow-lg shadow-emerald-500/20"},{default:u(()=>[d(r(T),{class:"h-4 w-4"}),t[3]||(t[3]=h(" Delivery ",-1))]),_:1},8,["href"])):x("",!0),e("a",X,[d(r(A),{class:"h-4 w-4"}),t[4]||(t[4]=h(" Print ",-1))]),s.salesOrder.status==="draft"?(o(),y(r(g),{key:2,href:n.route("sales.orders.confirm",s.salesOrder.id),method:"post",as:"button",class:"flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2.5 text-sm font-medium text-slate-900 dark:text-white hover:bg-emerald-500 transition-colors shadow-lg shadow-emerald-500/20"},{default:u(()=>[d(r(K),{class:"h-4 w-4"}),t[5]||(t[5]=h(" Confirm Order ",-1))]),_:1},8,["href"])):x("",!0),s.salesOrder.status==="draft"?(o(),y(r(g),{key:3,href:n.route("sales.orders.edit",s.salesOrder.id),class:"flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2.5 text-sm font-medium text-white dark:text-white hover:bg-blue-500 transition-colors shadow-lg shadow-blue-500/20"},{default:u(()=>[d(r(S),{class:"h-4 w-4"}),t[6]||(t[6]=h(" Edit Order ",-1))]),_:1},8,["href"])):x("",!0)])]),e("div",Y,[e("div",Z,[e("div",ee,[t[10]||(t[10]=e("div",{class:"p-6 border-b border-slate-200 dark:border-slate-800"},[e("h3",{class:"text-lg font-bold text-slate-900 dark:text-white"},"Order Items")],-1)),e("div",te,[e("table",se,[t[9]||(t[9]=e("thead",{class:"bg-white dark:bg-slate-950 text-slate-200 font-medium"},[e("tr",null,[e("th",{class:"px-6 py-4"},"Product"),e("th",{class:"px-6 py-4 text-right"},"Price"),e("th",{class:"px-6 py-4 text-center"},"Ordered"),e("th",{class:"px-6 py-4 text-center"},"Delivered"),e("th",{class:"px-6 py-4 text-center"},"Invoiced"),e("th",{class:"px-6 py-4 text-center"},"Returned"),e("th",{class:"px-6 py-4 text-center"},"Remaining"),e("th",{class:"px-6 py-4 text-right"},"Total")])],-1)),e("tbody",ae,[(o(!0),i(v,null,O(s.salesOrder.items,a=>(o(),i("tr",{key:a.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-900 dark:bg-slate-800/50"},[e("td",re,[e("div",le,l(a.product?.name||"Unknown Item"),1),e("div",de,l(a.product?.sku||"#"+a.product_id),1)]),e("td",oe,l(r(p)(a.unit_price)),1),e("td",ne,[b.value===a.id?(o(),i("div",ie,[e("div",ce,[D(e("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>r(c).qty=m),type:"number",step:"any",class:"w-20 rounded-lg border-0 bg-slate-50 dark:bg-slate-800 text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50 py-1 font-bold text-center",onKeyup:B(m=>w(a.id),["enter"])},null,40,xe),[[q,r(c).qty]]),e("div",ue,[e("button",{onClick:m=>w(a.id),class:"p-1.5 rounded-lg bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500/20 transition-colors",title:"Save"},[d(r(M),{class:"h-4 w-4"})],8,me),e("button",{onClick:I,class:"p-1.5 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",title:"Cancel"},[d(r(R),{class:"h-4 w-4"})])])]),D(e("input",{"onUpdate:modelValue":t[1]||(t[1]=m=>r(c).reason=m),type:"text",placeholder:"Alasan koreksi...",class:"w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-800 text-[10px] text-slate-500 dark:text-slate-400 focus:ring-1 focus:ring-blue-500/50 py-1 italic",required:""},null,512),[[q,r(c).reason]]),r(c).errors.qty?(o(),i("div",ge,l(r(c).errors.qty),1)):x("",!0)])):(o(),i("div",he,[e("span",null,l(r(f)(a.qty))+" "+l(a.unit?.code),1),e("button",{onClick:m=>C(a),class:"p-1 rounded-md text-blue-500 bg-blue-500/5 hover:bg-blue-500/10 transition-all",title:"Koreksi Qty"},[d(r(S),{class:"h-4 w-4"})],8,pe)]))]),e("td",fe,l(r(f)(a.qty_delivered)),1),e("td",be,l(r(f)(a.qty_invoiced||0)),1),e("td",ye,l(r(f)(a.qty_returned||0)),1),e("td",ke,[e("span",{class:k(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a.qty-(a.qty_delivered-(a.qty_returned||0))>0?"bg-amber-500/10 text-amber-500":"bg-slate-50 dark:bg-slate-800 text-slate-500"])},l(r(f)(a.qty-((a.qty_delivered||0)-(a.qty_returned||0)))),3)]),e("td",ve,l(r(p)(a.subtotal)),1)]))),128))]),e("tfoot",we,[e("tr",null,[t[7]||(t[7]=e("td",{colspan:"7",class:"px-6 py-4 text-right text-slate-500 dark:text-slate-400"}," Subtotal ",-1)),e("td",_e,l(r(p)(s.salesOrder.subtotal)),1)]),s.salesOrder.tax_amount>0?(o(),i("tr",Oe,[e("td",De," VAT ("+l(s.salesOrder.tax_percent)+"%) ",1),e("td",qe,l(r(p)(s.salesOrder.tax_amount)),1)])):x("",!0),e("tr",null,[t[8]||(t[8]=e("td",{colspan:"7",class:"px-6 py-4 text-right text-slate-900 dark:text-white text-lg font-bold"}," Grand Total ",-1)),e("td",Se,l(r(p)(s.salesOrder.total)),1)])])])])])]),e("div",Ce,[e("div",Ie,[e("div",null,[t[12]||(t[12]=e("h3",{class:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] mb-4"},"Sold-to Party (Buyer)",-1)),e("div",$e,[e("div",je,l(s.salesOrder.customer.name),1),e("div",Pe,[d(_,{class:"h-4 w-4 mt-0.5 shrink-0"}),e("p",Ve,l(s.salesOrder.customer.full_address),1)]),e("div",Be,[e("span",Ee,l(s.salesOrder.customer.phone),1),t[11]||(t[11]=e("span",{class:"h-1 w-1 rounded-full bg-slate-700"},null,-1)),e("span",null,l(s.salesOrder.customer.email),1)])])]),e("div",Fe,[t[13]||(t[13]=e("h3",{class:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] mb-4"},"Ship-to Party (Delivery)",-1)),e("div",Le,[e("div",Ne,l(s.salesOrder.shipping_name||s.salesOrder.customer.name),1),e("div",Te,[d(_,{class:"h-4 w-4 mt-0.5 shrink-0 text-emerald-500/50"}),e("p",Ae,l(s.salesOrder.shipping_address||s.salesOrder.customer.full_address),1)]),!s.salesOrder.shipping_name&&!s.salesOrder.shipping_address?(o(),i("div",Ke," Same as Sold-to Party ")):x("",!0)])])]),e("div",Me,[t[17]||(t[17]=e("h3",{class:"text-sm font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-4"},"Order Details",-1)),e("dl",Re,[e("div",null,[t[14]||(t[14]=e("dt",{class:"text-xs text-slate-500"},"Warehouse",-1)),e("dd",Ue,l(s.salesOrder.warehouse.name),1)]),e("div",null,[t[15]||(t[15]=e("dt",{class:"text-xs text-slate-500"},"Order Date",-1)),e("dd",ze,l(new Date(s.salesOrder.order_date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})),1)]),e("div",null,[t[16]||(t[16]=e("dt",{class:"text-xs text-slate-500"},"Expected Delivery",-1)),e("dd",Ge,l(new Date(s.salesOrder.delivery_date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})),1)])])]),s.salesOrder.invoices&&s.salesOrder.invoices.length>0?(o(),i("div",Qe,[t[18]||(t[18]=e("h3",{class:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] mb-4"},"Related Invoices",-1)),e("div",We,[(o(!0),i(v,null,O(s.salesOrder.invoices,a=>(o(),i("div",{key:a.id,class:"flex items-center justify-between p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700"},[e("div",He,[d(r(g),{href:n.route("sales.invoices.show",a.id),class:"text-sm font-bold text-indigo-600 dark:text-indigo-400 hover:underline"},{default:u(()=>[h(l(a.invoice_number),1)]),_:2},1032,["href"]),e("span",Je,l(new Date(a.invoice_date).toLocaleDateString("id-ID")),1)]),e("div",Xe,[e("div",Ye,l(r(p)(a.total)),1),e("span",{class:k(["inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium",{"bg-slate-100 text-slate-800":a.status==="draft","bg-blue-100 text-blue-800":a.status==="issued"||a.status==="sent","bg-emerald-100 text-emerald-800":a.status==="paid","bg-amber-100 text-amber-800":a.status==="partial"}])},l(a.status),3)])]))),128))])])):x("",!0)])])])]),_:1})],64)}}};export{pt as default};
