import{f as z,s as k,c as x,a as r,u as s,h as S,w as p,o as i,F as g,b as e,j as N,v as F,l as u,g as E,d as o,t as c,n as v,x as M,e as m,m as B}from"./app-BVbBi1v-.js";import{_ as V}from"./AppLayout-DOlVvMHK.js";import{_ as A}from"./Pagination-CdZeiKcD.js";import{_ as L,a as T}from"./SecondaryButton-BMKAHdHL.js";import{_ as O}from"./PrimaryButton-3QHqHlP8.js";import{d as U}from"./debounce-Dmgizicj.js";import{r as w}from"./ArrowDownTrayIcon-CZ3EcU5l.js";import{r as y}from"./ArrowUpTrayIcon-Ch7ynHPg.js";import{r as _}from"./PlusIcon-CS6h85nf.js";import{r as Q}from"./EyeIcon-Bfuo_tDS.js";import{r as G}from"./PencilSquareIcon--9HpRUmS.js";import{r as W}from"./TrashIcon-Dvb4hG2f.js";import{r as H}from"./DocumentCheckIcon-BTGTwjXH.js";import{r as J}from"./ShoppingCartIcon-BtxP_-yJ.js";import{b as K}from"./SunIcon-DoQVgGbC.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./XMarkIcon-DleNEIZ9.js";import"./WrenchScrewdriverIcon-DeG5a-oi.js";import"./DocumentPlusIcon-B1nE5q6J.js";import"./TruckIcon-YY_na4eh.js";import"./DocumentTextIcon-DGI6oD-T.js";import"./MapPinIcon-BwUIpz0Y.js";import"./SparklesIcon-D9eFIBft.js";import"./CubeIcon-DaWhtn2l.js";import"./ClockIcon-Q_IIiaCG.js";import"./CheckCircleIcon-CNZlklV5.js";import"./ShieldCheckIcon-Dk4WmDkO.js";import"./dialog-BO9lMyVL.js";import"./transition-ixwK52ZA.js";const X={class:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6"},Y={class:"flex items-center gap-2"},Z={class:"relative"},ee={class:"rounded-2xl glass-card overflow-hidden"},te={class:"overflow-x-auto overflow-y-auto max-h-[600px]"},se={class:"min-w-full divide-y divide-slate-100 dark:divide-slate-800"},re={class:"divide-y divide-slate-100 dark:divide-slate-800"},ae={class:"px-4 py-2 whitespace-nowrap"},le={class:"flex items-center gap-3"},oe={class:"px-4 py-2 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300"},de={class:"px-4 py-2 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300 font-medium"},ie={class:"px-4 py-2 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300"},ne={class:"px-4 py-2 whitespace-nowrap text-center text-sm text-slate-600 dark:text-slate-300"},xe={class:"px-4 py-2 whitespace-nowrap text-center"},pe={class:"px-4 py-2 whitespace-nowrap text-right"},ce={class:"flex items-center justify-end gap-2"},me=["onClick"],ue={key:0},be={key:0,class:"border-t border-slate-200 dark:border-slate-800 px-6 py-4"},fe={class:"mt-12"},ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},he={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},ke={class:"flex items-center gap-3 mb-3"},ve={class:"p-2.5 rounded-xl bg-blue-500/10 text-blue-400"},we={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},ye={class:"flex items-center gap-3 mb-3"},_e={class:"p-2.5 rounded-xl bg-orange-500/10 text-orange-400"},qe={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},Re={class:"flex items-center gap-3 mb-3"},Ce={class:"p-2.5 rounded-xl bg-emerald-500/10 text-emerald-400"},$e={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},De={class:"flex items-center gap-3 mb-3"},Pe={class:"p-2.5 rounded-xl bg-purple-500/10 text-purple-400"},je={class:"p-6 bg-white dark:bg-slate-900 rounded-2xl"},Ie={class:"mb-4"},ze=["href"],Se={class:"flex items-center justify-center w-full"},Ne={for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-32 border-2 border-slate-300 border-dashed rounded-lg cursor-pointer bg-slate-50 dark:hover:bg-slate-800 dark:bg-slate-900 hover:bg-slate-100 dark:border-slate-700 dark:hover:border-slate-500 transition-colors"},Fe={class:"flex flex-col items-center justify-center pt-5 pb-6"},Ee={key:0,class:"text-xs text-slate-500 dark:text-slate-400"},Me={key:0,class:"text-red-500 text-xs mt-1"},Be={class:"flex items-center justify-end gap-3 mt-6"},Ve={key:1,class:"text-slate-900 dark:text-white text-center py-20"},gt={__name:"Index",props:{requests:Object,filters:Object},setup(n){const q=n,b=B(!1),d=z({file:null}),h=U(()=>{k.get("/purchasing/requests",{search:q.filters.search},{preserveState:!0,replace:!0})},300),R=l=>l&&{draft:"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",pending:"bg-amber-500/20 text-amber-400 border-amber-500/30",approved:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",rejected:"bg-red-500/20 text-red-400 border-red-500/30"}[l]||"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",C=l=>{l&&confirm("Are you sure you want to delete this purchase request?")&&k.delete(`/purchasing/requests/${l}`)},$=l=>{if(!l)return"-";try{return new Date(l).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})}catch{return l}},D=()=>{b.value=!0},f=()=>{b.value=!1,d.reset()},P=()=>{d.post(route("requests.import"),{preserveScroll:!0,onSuccess:()=>f()})},j=l=>{d.file=l.target.files[0]},I=()=>{window.location.href=route("requests.export")};return(l,t)=>(i(),x(g,null,[r(s(S),{title:"Purchase Requests"}),r(V,{title:"Purchase Requests"},{default:p(()=>[n.requests?(i(),x(g,{key:0},[e("div",X,[t[6]||(t[6]=e("div",{class:"flex-1"},[e("p",{class:"text-slate-500 dark:text-slate-400 italic text-sm"},"Manage purchase requests from departments")],-1)),e("div",Y,[e("div",Z,[N(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>n.filters.search=a),onInput:t[1]||(t[1]=(...a)=>s(h)&&s(h)(...a)),type:"text",placeholder:"Search requests...",class:"pl-4 pr-10 py-2.5 text-sm rounded-xl border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-blue-500 focus:border-blue-500 w-full md:w-64"},null,544),[[F,n.filters.search]])]),e("button",{onClick:I,class:"inline-flex items-center gap-2 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 px-4 py-2.5 text-sm font-semibold text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 transition-all",title:"Export to Excel"},[r(s(w),{class:"h-5 w-5"}),t[2]||(t[2]=e("span",{class:"hidden md:inline"},"Export",-1))]),e("button",{onClick:D,class:"inline-flex items-center gap-2 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 px-4 py-2.5 text-sm font-semibold text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 transition-all",title:"Import from Excel"},[r(s(y),{class:"h-5 w-5"}),t[3]||(t[3]=e("span",{class:"hidden md:inline"},"Import",-1))]),r(s(u),{href:"/purchasing/requests/create",class:"inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-blue-500 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-blue-500/25 hover:from-blue-500 hover:to-blue-400 transition-all"},{default:p(()=>[r(s(_),{class:"h-5 w-5"}),t[4]||(t[4]=e("span",{class:"hidden md:inline"},"New Request",-1)),t[5]||(t[5]=e("span",{class:"md:hidden"},"New",-1))]),_:1})])]),e("div",ee,[e("div",te,[e("table",se,[t[9]||(t[9]=e("thead",null,[e("tr",{class:"border-b border-slate-200 dark:border-slate-700"},[e("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},[e("div",{class:"flex items-center gap-1"}," PR Number ")]),e("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},[e("div",{class:"flex items-center gap-1"}," Date ")]),e("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},[e("div",{class:"flex items-center gap-1"}," Department ")]),e("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},[e("div",{class:"flex items-center gap-1"}," Requester ")]),e("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-3 text-center text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Items"),e("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-3 text-center text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},[e("div",{class:"flex items-center justify-center gap-1"}," Status ")]),e("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-4 py-3 text-right text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",re,[(i(!0),x(g,null,E(n.requests.data,a=>(i(),x("tr",{key:a.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30 transition-colors"},[e("td",ae,[e("div",le,[t[7]||(t[7]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-50 dark:bg-slate-800 font-mono text-xs text-slate-500"}," PR ",-1)),r(s(u),{href:`/purchasing/requests/${a.id}`,class:"text-sm font-medium text-slate-900 dark:text-white hover:text-blue-400"},{default:p(()=>[o(c(a.pr_number),1)]),_:2},1032,["href"])])]),e("td",oe,c($(a.request_date)),1),e("td",de,c(a.department||"-"),1),e("td",ie,c(a.requester||"-"),1),e("td",ne,c(a.items_count||0),1),e("td",xe,[e("span",{class:v(["inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium",R(a.status)])},c(a.status?.toUpperCase()||"N/A"),3)]),e("td",pe,[e("div",ce,[r(s(u),{href:`/purchasing/requests/${a.id}`,class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors"},{default:p(()=>[r(s(Q),{class:"h-4 w-4"})]),_:1},8,["href"]),a.status==="draft"?(i(),M(s(u),{key:0,href:`/purchasing/requests/${a.id}/edit`,class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-blue-400 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors"},{default:p(()=>[r(s(G),{class:"h-4 w-4"})]),_:1},8,["href"])):m("",!0),e("button",{onClick:Ae=>C(a.id),class:"p-2 text-slate-500 dark:text-slate-400 hover:text-red-400 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 rounded-lg transition-colors"},[r(s(W),{class:"h-4 w-4"})],8,me)])])]))),128)),n.requests.data&&n.requests.data.length===0?(i(),x("tr",ue,[...t[8]||(t[8]=[e("td",{colspan:"7",class:"px-4 py-12 text-center text-slate-500 italic"},"No purchase requests found.",-1)])])):m("",!0)])])]),n.requests.last_page>1?(i(),x("div",be,[r(A,{links:n.requests.links},null,8,["links"])])):m("",!0)]),e("div",fe,[t[18]||(t[18]=e("div",{class:"flex items-center gap-2 mb-4 px-1"},[e("div",{class:"h-px flex-1 bg-slate-50 dark:bg-slate-800"}),e("span",{class:"text-xs font-bold text-slate-500 uppercase tracking-widest"},"Procurement Guide"),e("div",{class:"h-px flex-1 bg-slate-50 dark:bg-slate-800"})],-1)),e("div",ge,[e("div",he,[e("div",ke,[e("div",ve,[r(s(_),{class:"h-5 w-5"})]),t[10]||(t[10]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Create Request",-1))]),t[11]||(t[11]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[o(" Department members can initiate a "),e("strong",null,"Purchase Request (PR)"),o(". ")],-1))]),e("div",we,[e("div",ye,[e("div",_e,[r(s(H),{class:"h-5 w-5"})]),t[12]||(t[12]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Approval Flow",-1))]),t[13]||(t[13]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[o(" PRs go through a "),e("strong",null,"Status Workflow"),o(". ")],-1))]),e("div",qe,[e("div",Re,[e("div",Ce,[r(s(J),{class:"h-5 w-5"})]),t[14]||(t[14]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Convert to PO",-1))]),t[15]||(t[15]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[o(" Save time by "),e("strong",null,"Linking approved PRs"),o(". ")],-1))]),e("div",$e,[e("div",De,[e("div",Pe,[r(s(K),{class:"h-5 w-5"})]),t[16]||(t[16]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Tracking",-1))]),t[17]||(t[17]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[o(" Monitor the "),e("strong",null,"Quantity Requested"),o(". ")],-1))])])]),r(L,{show:b.value,onClose:f},{default:p(()=>[e("div",je,[t[25]||(t[25]=e("h2",{class:"text-lg font-medium text-slate-900 dark:text-white mb-4"}," Import Purchase Requests ",-1)),e("div",Ie,[t[21]||(t[21]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400 mb-2"}," Upload an Excel file (.xlsx, .xls) to import Purchase Requests. Rows with the same Date + Department + Requester will be grouped into one PR. ",-1)),e("a",{href:l.route("purchasing.requests.template"),class:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-500 mb-4 font-medium"},[r(s(w),{class:"h-4 w-4"}),t[19]||(t[19]=o(" Download Template ",-1))],8,ze),t[22]||(t[22]=e("p",{class:"text-xs text-slate-400 dark:text-slate-500 mb-4"}," Required columns: Date, Department, Requester, Product Code, Quantity. ",-1)),e("div",Se,[e("label",Ne,[e("div",Fe,[r(s(y),{class:"w-8 h-8 mb-2 text-slate-500 dark:text-slate-400"}),t[20]||(t[20]=e("p",{class:"mb-2 text-sm text-slate-500 dark:text-slate-400"},[e("span",{class:"font-semibold"},"Click to upload")],-1)),s(d).file?(i(),x("p",Ee,c(s(d).file.name),1)):m("",!0)]),e("input",{id:"dropzone-file",type:"file",class:"hidden",onChange:j,accept:".xlsx, .xls, .csv"},null,32)])]),s(d).errors.file?(i(),x("div",Me,c(s(d).errors.file),1)):m("",!0)]),e("div",Be,[r(T,{onClick:f},{default:p(()=>[...t[23]||(t[23]=[o(" Cancel ",-1)])]),_:1}),r(O,{onClick:P,class:v({"opacity-25":s(d).processing}),disabled:!s(d).file||s(d).processing},{default:p(()=>[...t[24]||(t[24]=[o(" Import Data ",-1)])]),_:1},8,["class","disabled"])])])]),_:1},8,["show"])],64)):(i(),x("div",Ve," Loading requests... "))]),_:1})],64))}};export{gt as default};
