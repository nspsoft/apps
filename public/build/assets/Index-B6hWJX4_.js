import{r as f,p as M,w as O,c as l,b as n,u as o,h as V,d as k,e,f as v,v as w,j as d,o as a,F as D,g as U,t as r,k as h,a as $}from"./app-CVskXPlE.js";import{_ as E}from"./AppLayout-BPbSmNAp.js";import{_ as P}from"./Pagination-tNP4eDyy.js";import{r as B}from"./MagnifyingGlassIcon-z3VKf18-.js";import{r as F}from"./ArrowUpTrayIcon-B6ZNqwD4.js";import{r as L}from"./CalendarDaysIcon-D9V8JmSn.js";import{r as q}from"./XMarkIcon-B0wnv3NP.js";/* empty css            */import"./SunIcon-CH0hNqUR.js";import"./WrenchScrewdriverIcon-Ch0-x6ah.js";import"./CheckBadgeIcon-BrVRkF10.js";import"./ShoppingCartIcon-C3CFwejV.js";import"./CubeIcon-B3DTt87X.js";import"./TruckIcon-RPY9s92d.js";const T={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"bg-white dark:bg-slate-800 overflow-hidden shadow-xl sm:rounded-lg p-6"},Q={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},W={class:"flex gap-4 w-full md:w-auto"},A={class:"relative w-full md:w-64"},G={class:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700"},J={class:"w-full text-left text-sm text-slate-600 dark:text-slate-400"},K={class:"divide-y divide-slate-200 dark:divide-slate-700"},R={class:"px-6 py-4"},X={class:"flex items-center gap-2"},Y={class:"px-6 py-4 font-medium text-slate-900 dark:text-white"},Z={class:"px-6 py-4 font-mono text-xs"},ee={class:"px-6 py-4"},te={class:"font-medium text-slate-900 dark:text-white"},se={class:"text-xs text-slate-500"},le={class:"px-6 py-4 text-right font-mono"},oe={class:"px-6 py-4"},ae={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-800/20 dark:text-red-400"},re={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-800/20 dark:text-yellow-400"},de={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"},ie={key:0},ne={class:"mt-6"},ce={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},me={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ue={class:"inline-block align-bottom bg-white dark:bg-slate-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},pe={class:"bg-white dark:bg-slate-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},xe={class:"flex justify-between items-center mb-4 pb-4 border-b border-slate-200 dark:border-slate-700"},fe={class:"sm:flex sm:items-start"},be={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},ge={class:"mt-2"},he={key:0,class:"text-red-500 text-xs mt-2"},ye={class:"bg-slate-50 dark:bg-slate-700/50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},_e=["disabled"],Ee={__name:"Index",props:{schedules:Object,filters:Object},setup(c){const y=c,m=f(y.filters.search||""),u=f(y.filters.date||""),b=f(!1),g=f(null),i=M({file:null}),S=()=>{$.get(route("planning.schedule.index"),{search:m.value,date:u.value},{preserveState:!0,replace:!0})};O([m,u],()=>{S()});const I=()=>{console.log("Opening Schedule Import Modal"),b.value=!0},p=()=>{console.log("Closing Schedule Import Modal"),b.value=!1,i.reset()},C=()=>{g.value.files[0]&&(i.file=g.value.files[0],i.post(route("planning.schedule.import"),{onSuccess:()=>p()}))},j=x=>new Date(x.delivery_date)<new Date().setHours(0,0,0,0),N=x=>{const t=new Date,s=new Date;s.setDate(t.getDate()+7);const _=new Date(x.delivery_date);return _>=t&&_<=s};return(x,t)=>(a(),l(D,null,[n(o(V),{title:"Delivery Schedule"}),n(E,{title:"Delivery Schedule"},{header:k(()=>[...t[2]||(t[2]=[e("h2",{class:"font-semibold text-xl text-slate-800 dark:text-slate-200 leading-tight"}," Delivery Schedule ",-1)])]),default:k(()=>[e("div",T,[e("div",z,[e("div",H,[e("div",Q,[e("div",W,[e("div",A,[v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),type:"text",placeholder:"Search Customer / PO / Product...",class:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[w,m.value]]),n(o(B),{class:"w-5 h-5 text-slate-400 absolute left-3 top-2.5"})]),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.value=s),type:"date",class:"rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-blue-500 focus:border-blue-500"},null,512),[[w,u.value]])]),e("button",{onClick:I,class:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors"},[n(o(F),{class:"w-5 h-5"}),t[3]||(t[3]=d(" Import Excel ",-1))])]),e("div",G,[e("table",J,[t[5]||(t[5]=e("thead",{class:"bg-slate-50 dark:bg-slate-700/50 text-xs uppercase font-semibold text-slate-500 dark:text-slate-300"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Delivery Date"),e("th",{class:"px-6 py-3"},"Customer"),e("th",{class:"px-6 py-3"},"PO Number"),e("th",{class:"px-6 py-3"},"Product"),e("th",{class:"px-6 py-3 text-right"},"Qty Scheduled"),e("th",{class:"px-6 py-3"},"Status")])],-1)),e("tbody",K,[(a(!0),l(D,null,U(c.schedules.data,s=>(a(),l("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors"},[e("td",R,[e("div",X,[n(o(L),{class:"w-4 h-4 text-slate-400"}),d(" "+r(new Date(s.delivery_date).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})),1)])]),e("td",Y,r(s.customer?.name),1),e("td",Z,r(s.po_number||"-"),1),e("td",ee,[e("div",te,r(s.product?.name),1),e("div",se,r(s.product?.sku),1)]),e("td",le,r(Number(s.qty_scheduled).toLocaleString("id-ID"))+" "+r(s.product?.unit?.code),1),e("td",oe,[j(s)?(a(),l("span",ae," Delayed ")):N(s)?(a(),l("span",re," Upcoming ")):(a(),l("span",de," Scheduled "))])]))),128)),c.schedules.data.length===0?(a(),l("tr",ie,[...t[4]||(t[4]=[e("td",{colspan:"6",class:"px-6 py-8 text-center text-slate-500"}," No schedule data found. Import Excel to get started. ",-1)])])):h("",!0)])])]),e("div",ne,[n(P,{links:c.schedules.links},null,8,["links"])])])])]),b.value?(a(),l("div",ce,[e("div",me,[e("div",{class:"fixed inset-0 bg-slate-900 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:p}),t[8]||(t[8]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),e("div",ue,[e("div",pe,[e("div",xe,[t[6]||(t[6]=e("h3",{class:"text-lg leading-6 font-bold text-slate-900 dark:text-white",id:"modal-title"}," Import Delivery Schedule ",-1)),e("button",{onClick:p,class:"text-slate-400 hover:text-slate-500 transition-colors"},[n(o(q),{class:"w-6 h-6"})])]),e("div",fe,[e("div",be,[e("div",ge,[t[7]||(t[7]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400 mb-4"},[d(" Upload an Excel file (.xlsx, .xls) with columns: "),e("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"customer_code"),d(", "),e("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"product_sku"),d(", "),e("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"delivery_date"),d(", "),e("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"qty"),d(", "),e("code",{class:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded"},"po_number"),d(". ")],-1)),e("input",{ref_key:"fileInput",ref:g,type:"file",class:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100 dark:file:bg-emerald-900/30 dark:file:text-emerald-400",accept:".xlsx, .xls, .csv"},null,512),o(i).errors.file?(a(),l("div",he,r(o(i).errors.file),1)):h("",!0)])])])]),e("div",ye,[e("button",{onClick:C,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-emerald-600 text-base font-medium text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:ml-3 sm:w-auto sm:text-sm",disabled:o(i).processing},r(o(i).processing?"Importing...":"Import"),9,_e),e("button",{onClick:p,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-slate-300 dark:border-slate-600 shadow-sm px-4 py-2 bg-white dark:bg-slate-800 text-base font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):h("",!0)]),_:1})],64))}};export{Ee as default};
