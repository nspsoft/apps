import{m as p,q as X,s as Y,C as Z,c as i,a as c,u as o,h as tt,w as L,o as n,b as t,n as d,t as r,x as S,y as z,e as m,d as b,F as k,g as C,p as B,j as et,v as st,B as I,z as at}from"./app-BAwp6RV6.js";import{x as lt,y as U,_ as rt}from"./AppLayout-CsdKrap4.js";import{a as P,f as ot}from"./helpers-DnzC1tLX.js";import{C as dt,a as nt,L as it,B as ct,b as xt,P as ut,p as bt,c as mt,d as ht,i as gt,f as vt}from"./index-D4pwI9hS.js";import{d as G,r as H}from"./SunIcon-U6OEtv2_.js";import{r as T}from"./ArrowTrendingUpIcon-DkS4e0a1.js";import{r as R}from"./ArrowTrendingDownIcon-BLMLyDn9.js";import{r as ft}from"./TruckIcon-MnhfNnJI.js";import{r as pt}from"./ExclamationTriangleIcon-DQVeuSAP.js";import{r as K}from"./DocumentTextIcon-1pOJE1-L.js";import{r as kt}from"./ClockIcon-DBJGp2Ga.js";import{r as _t}from"./XMarkIcon-V7CKPjvz.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./WrenchScrewdriverIcon-BJW7rLOR.js";import"./DocumentPlusIcon-I8drsc-j.js";import"./ShoppingCartIcon-CCYH61-6.js";import"./MapPinIcon-CDcGfMwb.js";import"./SparklesIcon-_ROZm8t1.js";import"./CubeIcon-DhWsQksD.js";import"./CheckCircleIcon-DLo4mYDO.js";import"./ShieldCheckIcon-C_yXRo_D.js";const yt={class:"flex justify-between items-center"},wt={class:"flex items-center gap-3"},Ct={key:0,class:"p-6 bg-slate-50 dark:bg-slate-950 min-h-[calc(100vh-130px)]"},qt={class:"space-y-6"},Dt={class:"grid grid-cols-2 lg:grid-cols-6 gap-4"},At={class:"col-span-2 bg-white dark:bg-slate-900 rounded-2xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm relative overflow-hidden"},jt={class:"relative z-10 flex items-center gap-6"},Tt={class:"relative w-28 h-28 shrink-0"},Mt={class:"w-28 h-28 -rotate-90",viewBox:"0 0 120 120"},$t=["stroke-dashoffset"],Ft={class:"absolute inset-0 flex flex-col items-center justify-center"},Nt={class:"text-xs text-slate-500 mt-1"},St={class:"text-xs text-slate-500"},zt={class:"bg-white dark:bg-slate-900 rounded-2xl p-5 border border-slate-200 dark:border-slate-800 shadow-sm"},Bt={class:"flex justify-between items-start mb-3"},Pt={class:"p-2 bg-violet-500/10 rounded-lg"},Rt={class:"text-2xl font-black text-slate-900 dark:text-white"},Vt={key:0,class:"mt-2 flex items-center gap-1"},Ot={class:"bg-white dark:bg-slate-900 rounded-2xl p-5 border border-slate-200 dark:border-slate-800 shadow-sm"},Et={class:"flex justify-between items-start mb-3"},Lt={class:"p-2 bg-emerald-500/10 rounded-lg"},It={class:"text-2xl font-black text-slate-900 dark:text-white"},Ut={key:0,class:"mt-2 flex items-center gap-1"},Gt={class:"bg-white dark:bg-slate-900 rounded-2xl p-5 border border-slate-200 dark:border-slate-800 shadow-sm"},Ht={class:"flex justify-between items-start mb-3"},Kt={class:"p-2 bg-blue-500/10 rounded-lg"},Jt={class:"text-lg font-black text-slate-900 dark:text-white"},Qt={key:0,class:"mt-2 flex items-center gap-1"},Wt={class:"flex justify-between items-start mb-3"},Xt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Yt={class:"lg:col-span-2 bg-white dark:bg-slate-900 rounded-2xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm"},Zt={class:"h-80 cursor-pointer"},te={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden"},ee={class:"p-5 border-b border-slate-100 dark:border-slate-800"},se={class:"text-base font-bold text-slate-800 dark:text-white flex items-center gap-2"},ae={class:"divide-y divide-slate-100 dark:divide-slate-800"},le={class:"p-4"},re=["onClick"],oe={class:"w-6 h-6 rounded-full bg-emerald-500/10 text-emerald-600 text-[10px] font-black flex items-center justify-center"},de={class:"flex-1 min-w-0"},ne={class:"text-xs font-semibold text-slate-700 dark:text-slate-300 truncate"},ie={class:"w-full bg-slate-100 dark:bg-slate-800 rounded-full h-1.5 mt-1"},ce={key:0,class:"text-xs text-slate-400 italic"},xe={class:"p-4"},ue=["onClick"],be={class:"w-6 h-6 rounded-full bg-red-500/10 text-red-600 text-[10px] font-black flex items-center justify-center"},me={class:"flex-1 min-w-0"},he={class:"text-xs font-semibold text-slate-700 dark:text-slate-300 truncate"},ge={class:"w-full bg-slate-100 dark:bg-slate-800 rounded-full h-1.5 mt-1"},ve={key:0,class:"text-xs text-slate-400 italic"},fe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},pe={class:"lg:col-span-2 bg-white dark:bg-slate-900 rounded-2xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm"},ke={class:"flex justify-between items-center mb-5"},_e={class:"text-base font-bold text-slate-800 dark:text-white flex items-center gap-2"},ye={class:"px-2.5 py-1 bg-amber-500/10 rounded-lg text-[10px] font-bold text-amber-600"},we={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-3"},Ce={class:"text-center mb-2"},qe={class:"text-center mb-2"},De={class:"space-y-1"},Ae={class:"font-semibold text-slate-600 dark:text-slate-300"},je={key:0,class:"text-[9px] text-slate-400 italic"},Te={key:1,class:"text-center py-10"},Me={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden"},$e={class:"p-5 border-b border-slate-100 dark:border-slate-800"},Fe={class:"text-base font-bold text-slate-800 dark:text-white flex items-center gap-2"},Ne={class:"p-5 space-y-4"},Se={class:"p-4 rounded-xl bg-gradient-to-r from-red-500/5 to-red-500/10 border border-red-100 dark:border-red-900/30"},ze={class:"text-xl font-black text-red-600 dark:text-red-400"},Be={class:"text-[10px] text-slate-500 mt-1"},Pe={class:"flex items-center gap-4 p-3 rounded-xl bg-emerald-50 dark:bg-emerald-900/10 border border-emerald-100 dark:border-emerald-900/30"},Re={class:"p-2 bg-emerald-500/20 rounded-lg"},Ve={class:"text-lg font-bold text-emerald-600"},Oe={class:"bg-white dark:bg-slate-900 rounded-2xl p-4 border border-slate-200 dark:border-slate-800 shadow-sm"},Ee={class:"flex flex-wrap items-center justify-center gap-3"},Le=["href"],Ie=["href"],Ue=["href"],Ge={key:1,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},He={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ke={class:"relative z-10 inline-block align-bottom bg-white dark:bg-slate-900 rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full border border-slate-200 dark:border-slate-800"},Je={class:"px-6 pt-6 pb-5"},Qe={class:"flex justify-between items-center mb-5"},We={class:"text-lg font-bold text-slate-900 dark:text-white"},Xe={class:"text-xs text-slate-500 mt-0.5"},Ye={key:0,class:"py-16 text-center"},Ze={key:1,class:"overflow-x-auto rounded-xl border border-slate-200 dark:border-slate-700"},ts={class:"w-full text-left text-sm text-slate-600 dark:text-slate-400"},es={class:"divide-y divide-slate-100 dark:divide-slate-800"},ss={class:"px-4 py-3"},as={class:"font-semibold text-slate-900 dark:text-white"},ls={class:"text-[10px] text-slate-400 font-mono"},rs={class:"px-4 py-3 text-right font-mono font-semibold"},os={class:"text-[10px] text-slate-400"},ds={class:"px-4 py-3 text-right font-mono font-semibold text-blue-600 dark:text-blue-400"},ns={class:"text-[10px] text-slate-400"},is={class:"px-4 py-3 text-right font-mono font-semibold text-amber-600 dark:text-amber-400"},cs={class:"text-[10px] text-slate-400"},xs={class:"px-4 py-3 text-right"},us={class:"flex items-center justify-end gap-2"},bs={class:"w-16 bg-slate-200 dark:bg-slate-700 rounded-full h-1.5"},ms={key:0},Ps={__name:"Dashboard",props:{chartData:Array,stats:Object,month:String,topCustomers:Array,bottomCustomers:Array,deliveryTimeline:Array},setup(s){dt.register(nt,it,ct,xt,ut,bt,mt,ht,gt);const x=s,_=p(x.month),q=p(!1),D=p([]),g=p(null),M=p(!1),v=p({});X(_,a=>{Y.get(route("sales.planning.dashboard"),{month:a},{preserveState:!0,replace:!0})}),Z(()=>{const a={achievement:x.stats?.achievement_pct??0,forecast:x.stats?.total_forecast_qty??0,actual:x.stats?.total_actual_qty??0,revenue:x.stats?.revenue_this_month??0};v.value={achievement:0,forecast:0,actual:0,revenue:0};const e=1200,l=performance.now(),u=w=>{const E=Math.min((w-l)/e,1),j=1-Math.pow(1-E,3);v.value={achievement:Math.round(a.achievement*j*10)/10,forecast:Math.round(a.forecast*j),actual:Math.round(a.actual*j),revenue:Math.round(a.revenue*j)},E<1&&requestAnimationFrame(u)};requestAnimationFrame(u)});const J=(a,e)=>{if(e.length>0){const l=e[0].index,u=x.chartData[l];$(u)}},$=async a=>{if(a){g.value=a,q.value=!0,M.value=!0,D.value=[];try{const e=await at.get(route("sales.planning.dashboard.details"),{params:{customer_id:a.id,month:_.value}});D.value=e.data}catch(e){console.error("Failed to fetch details:",e),q.value=!1,g.value=null}finally{M.value=!1}}},V=()=>{q.value=!1,g.value=null},Q={responsive:!0,maintainAspectRatio:!1,onClick:J,interaction:{mode:"index",intersect:!1},onHover:(a,e)=>{a.native?.target&&(a.native.target.style.cursor=e.length>0?"pointer":"default")},plugins:{legend:{position:"top",labels:{color:"#94a3b8",font:{size:11,weight:"600"},usePointStyle:!0,pointStyle:"rectRounded"}},title:{display:!1},tooltip:{backgroundColor:"rgba(15,23,42,0.95)",titleFont:{size:13,weight:"bold"},bodyFont:{size:12},padding:12,cornerRadius:10,mode:"index",intersect:!1,callbacks:{afterBody:()=>`
ðŸ‘‰ Klik untuk lihat per-item`,label:a=>{const e=P(a.raw||0);return` ${a.dataset.label}: ${e}`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#64748b",font:{size:10,weight:"600"},maxRotation:45}},y:{grid:{color:"rgba(148,163,184,0.1)"},ticks:{color:"#64748b",font:{size:10},callback:a=>P(a)}}}},W=I(()=>x.chartData?{labels:x.chartData.map(a=>a.customer||"Unknown"),datasets:[{label:"Forecast",backgroundColor:"rgba(139,92,246,0.7)",borderRadius:4,barThickness:18,data:x.chartData.map(a=>Number(a.forecast||0))},{label:"Sales Order",backgroundColor:"rgba(16,185,129,0.8)",borderRadius:4,barThickness:18,data:x.chartData.map(a=>Number(a.actual||0))},{label:"Delivery",backgroundColor:"rgba(245, 158, 11, 0.8)",borderRadius:4,barThickness:18,data:x.chartData.map(a=>Number(a.delivery||0))}]}:{labels:[],datasets:[]}),y=I(()=>{const a=x.stats?.achievement_pct??0;return a>=90?{ring:"text-emerald-500",bg:"bg-emerald-500",label:"Excellent",gradient:"from-emerald-500 to-emerald-600"}:a>=70?{ring:"text-blue-500",bg:"bg-blue-500",label:"Good",gradient:"from-blue-500 to-blue-600"}:a>=50?{ring:"text-amber-500",bg:"bg-amber-500",label:"Average",gradient:"from-amber-500 to-amber-600"}:{ring:"text-red-500",bg:"bg-red-500",label:"Critical",gradient:"from-red-500 to-red-600"}}),f=(a,e)=>a>e?"up":a<e?"down":"flat",O=(a,e)=>!e||e===0?0:Math.round((a-e)/e*100),h=P,F=ot,N=a=>a>=90?"bg-emerald-500":a>=70?"bg-blue-500":a>=50?"bg-amber-500":"bg-red-500",A=a=>a>=90?"text-emerald-600 dark:text-emerald-400":a>=70?"text-blue-600 dark:text-blue-400":a>=50?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400";return(a,e)=>(n(),i(k,null,[c(o(tt),{title:"Sales Planning Dashboard"}),c(rt,{title:"Sales Planning Dashboard"},{header:L(()=>[t("div",yt,[e[2]||(e[2]=t("h2",{class:"font-semibold text-xl text-slate-800 dark:text-slate-200 leading-tight"}," Sales Planning Dashboard ",-1)),t("div",wt,[e[1]||(e[1]=t("span",{class:"text-xs font-bold uppercase tracking-wider text-slate-400"},"Period",-1)),et(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>_.value=l),type:"month",class:"rounded-xl border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-indigo-500 focus:border-indigo-500 text-sm px-4 py-2"},null,512),[[st,_.value]])])])]),default:L(()=>[s.stats?(n(),i("div",Ct,[t("div",qt,[t("div",Dt,[t("div",At,[t("div",{class:d(["absolute top-0 right-0 w-32 h-32 rounded-full blur-[60px] opacity-20",y.value.bg])},null,2),t("div",jt,[t("div",Tt,[(n(),i("svg",Mt,[e[3]||(e[3]=t("circle",{cx:"60",cy:"60",r:"50","stroke-width":"10",fill:"none",class:"stroke-slate-200 dark:stroke-slate-800"},null,-1)),t("circle",{cx:"60",cy:"60",r:"50","stroke-width":"10",fill:"none","stroke-linecap":"round",class:d(y.value.ring.replace("text-","stroke-")),"stroke-dasharray":314,"stroke-dashoffset":314-314*Math.min(s.stats.achievement_pct,100)/100,style:{transition:"stroke-dashoffset 1.2s ease-out"}},null,10,$t)])),t("div",Ft,[t("span",{class:d(["text-2xl font-black",y.value.ring])},r(v.value.achievement||0)+"%",3)])]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-xs font-bold uppercase tracking-wider text-slate-400 mb-1"},"Achievement",-1)),t("p",{class:d(["text-sm font-bold",y.value.ring])},r(y.value.label),3),t("p",Nt,"Target: "+r(o(h)(s.stats.total_forecast_qty)),1),t("p",St,"Actual: "+r(o(h)(s.stats.total_actual_qty)),1)])])]),t("div",zt,[t("div",Bt,[e[5]||(e[5]=t("p",{class:"text-[10px] font-bold uppercase tracking-wider text-slate-400"},"Total Forecast",-1)),t("div",Pt,[c(o(G),{class:"w-4 h-4 text-violet-500"})])]),t("p",Rt,r(o(h)(v.value.forecast)),1),s.stats.prev_forecast_qty?(n(),i("div",Vt,[(n(),S(z(f(s.stats.total_forecast_qty,s.stats.prev_forecast_qty)==="up"?o(T):o(R)),{class:d(["w-3.5 h-3.5",f(s.stats.total_forecast_qty,s.stats.prev_forecast_qty)==="up"?"text-emerald-500":"text-red-500"])},null,8,["class"])),t("span",{class:d(["text-[10px] font-bold",f(s.stats.total_forecast_qty,s.stats.prev_forecast_qty)==="up"?"text-emerald-500":"text-red-500"])},r(O(s.stats.total_forecast_qty,s.stats.prev_forecast_qty))+"% vs prev ",3)])):m("",!0)]),t("div",Ot,[t("div",Et,[e[6]||(e[6]=t("p",{class:"text-[10px] font-bold uppercase tracking-wider text-slate-400"},"Total Actual",-1)),t("div",Lt,[c(o(ft),{class:"w-4 h-4 text-emerald-500"})])]),t("p",It,r(o(h)(v.value.actual)),1),s.stats.prev_actual_qty?(n(),i("div",Ut,[(n(),S(z(f(s.stats.total_actual_qty,s.stats.prev_actual_qty)==="up"?o(T):o(R)),{class:d(["w-3.5 h-3.5",f(s.stats.total_actual_qty,s.stats.prev_actual_qty)==="up"?"text-emerald-500":"text-red-500"])},null,8,["class"])),t("span",{class:d(["text-[10px] font-bold",f(s.stats.total_actual_qty,s.stats.prev_actual_qty)==="up"?"text-emerald-500":"text-red-500"])},r(O(s.stats.total_actual_qty,s.stats.prev_actual_qty))+"% vs prev ",3)])):m("",!0)]),t("div",Gt,[t("div",Ht,[e[7]||(e[7]=t("p",{class:"text-[10px] font-bold uppercase tracking-wider text-slate-400"},"Revenue (SO)",-1)),t("div",Kt,[c(o(H),{class:"w-4 h-4 text-blue-500"})])]),t("p",Jt,r(o(F)(v.value.revenue)),1),s.stats.revenue_prev_month?(n(),i("div",Qt,[(n(),S(z(s.stats.revenue_change_pct>=0?o(T):o(R)),{class:d(["w-3.5 h-3.5",s.stats.revenue_change_pct>=0?"text-emerald-500":"text-red-500"])},null,8,["class"])),t("span",{class:d(["text-[10px] font-bold",s.stats.revenue_change_pct>=0?"text-emerald-500":"text-red-500"])},r(s.stats.revenue_change_pct)+"% vs prev ",3)])):m("",!0)]),t("div",{class:d(["bg-white dark:bg-slate-900 rounded-2xl p-5 border border-slate-200 dark:border-slate-800 shadow-sm",s.stats.delayed_schedules>0?"ring-1 ring-red-500/20":""])},[t("div",Wt,[e[8]||(e[8]=t("p",{class:"text-[10px] font-bold uppercase tracking-wider text-slate-400"},"Delayed",-1)),t("div",{class:d(["p-2 rounded-lg",s.stats.delayed_schedules>0?"bg-red-500/10":"bg-slate-100 dark:bg-slate-800"])},[c(o(pt),{class:d(["w-4 h-4",s.stats.delayed_schedules>0?"text-red-500":"text-slate-400"])},null,8,["class"])],2)]),t("p",{class:d(["text-2xl font-black",s.stats.delayed_schedules>0?"text-red-600 dark:text-red-400":"text-slate-900 dark:text-white"])},r(s.stats.delayed_schedules),3),e[9]||(e[9]=t("p",{class:"text-[10px] text-slate-400 mt-1"},"schedules overdue",-1))],2)]),t("div",Xt,[t("div",Yt,[e[10]||(e[10]=t("div",{class:"flex justify-between items-center mb-4"},[t("h3",{class:"text-base font-bold text-slate-800 dark:text-white"},"Forecast vs Actual Performance"),t("span",{class:"text-[10px] font-bold uppercase tracking-wider text-slate-400"},"Click bar to drill down")],-1)),t("div",Zt,[c(o(vt),{data:W.value,options:Q},null,8,["data"])])]),t("div",te,[t("div",ee,[t("h3",se,[c(o(lt),{class:"w-5 h-5 text-indigo-500"}),e[11]||(e[11]=b(" Customer Ranking ",-1))])]),t("div",ae,[t("div",le,[e[12]||(e[12]=t("p",{class:"text-[10px] font-bold uppercase tracking-wider text-emerald-500 mb-3"},"ðŸ† Top Performers",-1)),(n(!0),i(k,null,C(s.topCustomers,(l,u)=>(n(),i("div",{key:"top-"+u,class:"flex items-center gap-3 py-2 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50 rounded-lg px-2 -mx-2 transition-colors",onClick:w=>$(l)},[t("span",oe,r(u+1),1),t("div",de,[t("p",ne,r(l.customer),1),t("div",ie,[t("div",{class:d([N(l.achievement),"h-1.5 rounded-full transition-all duration-700"]),style:B({width:Math.min(l.achievement,100)+"%"})},null,6)])]),t("span",{class:d(["text-xs font-bold shrink-0",A(l.achievement)])},r(l.achievement)+"%",3)],8,re))),128)),s.topCustomers?.length?m("",!0):(n(),i("p",ce,"No data"))]),t("div",xe,[e[13]||(e[13]=t("p",{class:"text-[10px] font-bold uppercase tracking-wider text-red-500 mb-3"},"âš ï¸ Needs Attention",-1)),(n(!0),i(k,null,C(s.bottomCustomers,(l,u)=>(n(),i("div",{key:"bot-"+u,class:"flex items-center gap-3 py-2 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50 rounded-lg px-2 -mx-2 transition-colors",onClick:w=>$(l)},[t("span",be,r(u+1),1),t("div",me,[t("p",he,r(l.customer),1),t("div",ge,[t("div",{class:d([N(l.achievement),"h-1.5 rounded-full transition-all duration-700"]),style:B({width:Math.min(l.achievement,100)+"%"})},null,6)])]),t("span",{class:d(["text-xs font-bold shrink-0",A(l.achievement)])},r(l.achievement)+"%",3)],8,ue))),128)),s.bottomCustomers?.length?m("",!0):(n(),i("p",ve,"No data"))])])])]),t("div",fe,[t("div",pe,[t("div",ke,[t("h3",_e,[c(o(U),{class:"w-5 h-5 text-amber-500"}),e[14]||(e[14]=b(" Delivery Timeline (7 Days) ",-1))]),t("span",ye,r(s.stats.upcoming_schedules)+" upcoming",1)]),s.deliveryTimeline?.length?(n(),i("div",we,[(n(!0),i(k,null,C(s.deliveryTimeline,l=>(n(),i("div",{key:l.date,class:d(["rounded-xl p-3 border transition-all duration-200 hover:shadow-md",l.is_today?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 ring-1 ring-indigo-500/20":"border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50"])},[t("div",Ce,[t("p",{class:d(["text-[10px] font-bold uppercase",l.is_today?"text-indigo-600":"text-slate-400"])},r(l.day_label),3),t("p",{class:d(["text-sm font-black",l.is_today?"text-indigo-600":"text-slate-700 dark:text-slate-300"])},r(l.date_label),3)]),t("div",qe,[t("span",{class:d(["inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold",l.is_today?"bg-indigo-500 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400"])},r(l.count)+" delivery ",3)]),t("div",De,[(n(!0),i(k,null,C(l.items,(u,w)=>(n(),i("div",{key:w,class:"text-[9px] text-slate-500 dark:text-slate-400 truncate"},[t("span",Ae,r(u.customer),1)]))),128)),l.count>3?(n(),i("p",je,"+"+r(l.count-3)+" more",1)):m("",!0)])],2))),128))])):(n(),i("div",Te,[c(o(U),{class:"w-10 h-10 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),e[15]||(e[15]=t("p",{class:"text-sm text-slate-400"},"No scheduled deliveries in the next 7 days",-1))]))]),t("div",Me,[t("div",$e,[t("h3",Fe,[c(o(K),{class:"w-5 h-5 text-teal-500"}),e[16]||(e[16]=b(" Accounts Receivable ",-1))])]),t("div",Ne,[t("div",Se,[e[17]||(e[17]=t("p",{class:"text-[10px] font-bold uppercase tracking-wider text-red-500 mb-1"},"Total Outstanding",-1)),t("p",ze,r(o(F)(s.stats.total_ar)),1),t("p",Be,r(s.stats.open_invoices_count)+" open invoices",1)]),t("div",{class:d(["flex items-center gap-4 p-3 rounded-xl",s.stats.overdue_invoices>0?"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800":"bg-slate-50 dark:bg-slate-800/50"])},[t("div",{class:d(["p-2 rounded-lg",s.stats.overdue_invoices>0?"bg-amber-500/20":"bg-slate-200 dark:bg-slate-700"])},[c(o(kt),{class:d(["w-5 h-5",s.stats.overdue_invoices>0?"text-amber-600":"text-slate-400"])},null,8,["class"])],2),t("div",null,[e[18]||(e[18]=t("p",{class:"text-xs text-slate-500"},"Overdue Invoices",-1)),t("p",{class:d(["text-lg font-bold",s.stats.overdue_invoices>0?"text-amber-600":"text-slate-700 dark:text-slate-300"])},r(s.stats.overdue_invoices),3)])],2),t("div",Pe,[t("div",Re,[c(o(H),{class:"w-5 h-5 text-emerald-600"})]),t("div",null,[e[19]||(e[19]=t("p",{class:"text-xs text-slate-500"},"Collection This Month",-1)),t("p",Ve,r(o(F)(s.stats.collection_this_month)),1)])])])])]),t("div",Oe,[t("div",Ee,[t("a",{href:a.route("sales.planning.forecast.index"),class:"inline-flex items-center gap-2 px-5 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors shadow-sm"},[c(o(G),{class:"w-4 h-4"}),e[20]||(e[20]=b(" View All Forecasts ",-1))],8,Le),t("a",{href:a.route("sales.planning.forecast.index"),class:"inline-flex items-center gap-2 px-5 py-2.5 bg-violet-600 hover:bg-violet-700 text-white text-sm font-bold rounded-xl transition-colors shadow-sm"},[c(o(K),{class:"w-4 h-4"}),e[21]||(e[21]=b(" Import Forecast ",-1))],8,Ie),t("a",{href:a.route("sales.planning.forecast.export",{month:_.value}),class:"inline-flex items-center gap-2 px-5 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-bold rounded-xl transition-colors shadow-sm"},[c(o(T),{class:"w-4 h-4"}),e[22]||(e[22]=b(" Export Report ",-1))],8,Ue)])])])])):m("",!0),q.value?(n(),i("div",Ge,[t("div",He,[t("div",{class:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm transition-opacity",onClick:V}),e[27]||(e[27]=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"â€‹",-1)),t("div",Ke,[t("div",Je,[t("div",Qe,[t("div",null,[t("h3",We," Item Accuracy: "+r(g.value?.customer),1),t("p",Xe,[e[23]||(e[23]=b(" Overall achievement: ",-1)),t("span",{class:d(["font-bold",A(g.value?.achievement??0)])},r(g.value?.achievement??0)+"% ",3)])]),t("button",{onClick:V,class:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors"},[c(o(_t),{class:"w-5 h-5 text-slate-400"})])]),M.value?(n(),i("div",Ye,[...e[24]||(e[24]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-slate-300 border-t-indigo-600"},null,-1),t("p",{class:"mt-3 text-sm text-slate-500"},"Loading item data...",-1)])])):(n(),i("div",Ze,[t("table",ts,[e[26]||(e[26]=t("thead",{class:"bg-slate-50 dark:bg-slate-800 text-[10px] uppercase font-bold tracking-wider text-slate-500 dark:text-slate-400"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Product Item"),t("th",{class:"px-4 py-3 text-right"},"Forecast"),t("th",{class:"px-4 py-3 text-right"},"Actual"),t("th",{class:"px-4 py-3 text-right"},"Delivery"),t("th",{class:"px-4 py-3 text-right"},"Achievement %"),t("th",{class:"px-4 py-3 text-right"},"Variance")])],-1)),t("tbody",es,[(n(!0),i(k,null,C(D.value,l=>(n(),i("tr",{key:l.product_id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[t("td",ss,[t("div",as,r(l.name),1),t("div",ls,r(l.sku),1)]),t("td",rs,[b(r(o(h)(l.forecast))+" ",1),t("span",os,r(l.unit),1)]),t("td",ds,[b(r(o(h)(l.actual))+" ",1),t("span",ns,r(l.unit),1)]),t("td",is,[b(r(o(h)(l.delivery))+" ",1),t("span",cs,r(l.unit),1)]),t("td",xs,[t("div",us,[t("div",bs,[t("div",{class:d([N(l.achievement),"h-1.5 rounded-full transition-all"]),style:B({width:Math.min(l.achievement,100)+"%"})},null,6)]),t("span",{class:d(["font-bold text-xs",A(l.achievement)])},r(l.achievement.toFixed(1))+"% ",3)])]),t("td",{class:d(["px-4 py-3 text-right font-mono font-semibold",l.variance>=0?"text-emerald-600":"text-red-600"])},r(l.variance>0?"+":"")+r(o(h)(l.variance)),3)]))),128)),D.value.length?m("",!0):(n(),i("tr",ms,[...e[25]||(e[25]=[t("td",{colspan:"5",class:"px-4 py-8 text-center text-slate-400"},"No item data found",-1)])]))])])]))])])])])):m("",!0)]),_:1})],64))}};export{Ps as default};
