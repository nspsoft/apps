import{p as C,c as l,b as p,u as r,h as M,d as B,e,j as h,o as a,F as c,g as x,t as o,k as _,n as P,y as T,f as u,i as k,v as w,r as g}from"./app-Bw0H9ESC.js";import{_ as j}from"./AppLayout-3pCOLbDy.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as S}from"./ExclamationTriangleIcon-CdHoj63x.js";import{r as A}from"./ClockIcon-CbxJVP5u.js";import{r as N}from"./WrenchScrewdriverIcon-DHxM4v6h.js";/* empty css            */import"./XMarkIcon-C7UzD_1X.js";import"./SunIcon-B4CySSBA.js";import"./CheckBadgeIcon-D_9l_0HZ.js";import"./ShoppingCartIcon-N-hkVahq.js";import"./CubeIcon-DrmTRc40.js";import"./TruckIcon-BJDri2b6.js";const $={class:"min-h-screen bg-[#050510] relative overflow-hidden font-mono text-cyan-50 selection:bg-rose-500/30"},E={class:"relative z-10 p-6 space-y-6 max-w-7xl mx-auto"},q={class:"flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-white/10 pb-4"},L={key:0,class:"space-y-4"},z={class:"text-sm font-bold text-rose-400 uppercase tracking-widest flex items-center gap-2"},F={class:"grid md:grid-cols-2 gap-4"},K={class:"flex justify-between items-start mb-4"},G={class:"text-xl font-bold text-white"},Q={class:"text-xs text-rose-400 font-bold uppercase tracking-wider"},W={class:"text-right"},H={class:"text-xs text-slate-300 font-mono"},J={class:"text-sm text-slate-300 mb-6 font-bold bg-black/20 p-2 rounded border border-white/5"},X={class:"flex items-center justify-between mt-auto"},Y={class:"flex items-center gap-2 text-xs text-amber-500"},Z=["onClick"],ee={class:"space-y-4 pt-6 md:col-span-2"},te={class:"text-sm font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2"},se={class:"overflow-x-auto rounded-xl border border-white/10"},oe={class:"w-full text-left text-sm"},re={class:"divide-y divide-white/5 bg-slate-900/50"},le={class:"p-4 font-mono text-slate-400"},ae={class:"p-4 font-bold text-white"},ne={class:"p-4 text-slate-300"},ie={class:"p-4 text-slate-400"},de={class:"p-4 text-xs text-slate-500"},pe={class:"p-4 text-center font-mono text-cyan-400"},ue={class:"p-4 text-center"},ce={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm"},be={class:"bg-[#0f172a] border border-rose-500/30 p-6 rounded-xl w-full max-w-lg shadow-[0_0_50px_rgba(225,29,72,0.2)]"},xe={class:"text-lg font-bold text-rose-400 mb-4 uppercase tracking-wider flex items-center gap-2"},me=["value"],ve={class:"flex justify-end gap-2 pt-4"},fe={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm"},he={class:"bg-[#0f172a] border border-emerald-500/30 p-6 rounded-xl w-full max-w-lg shadow-2xl"},we={class:"grid grid-cols-2 gap-4"},ge={class:"border-t border-white/10 pt-4"},ye={class:"flex gap-2 mb-2"},_e=["value"],ke={class:"space-y-1"},Se=["onClick"],Re={class:"flex justify-end gap-2 pt-4"},Ce={__name:"Breakdown",props:{logs:Array,machines:Array,spareparts:Array},setup(b){const m=g(!1),v=g(!1),R=g(null),i=C({machine_id:"",description:"",started_at:new Date().toISOString().slice(0,16)}),n=C({status:"resolved",technician_name:"",spareparts:[]}),d=g({id:"",qty:1}),D=()=>{d.value.id&&d.value.qty>0&&(n.spareparts.push({...d.value}),d.value={id:"",qty:1})},U=()=>{i.post(route("maintenance.breakdown.store"),{onSuccess:()=>{m.value=!1,i.reset()}})},I=f=>{R.value=f,n.technician_name=f.technician==="-"?"":f.technician,v.value=!0},V=()=>{n.put(route("maintenance.breakdown.update",R.value.id),{onSuccess:()=>{v.value=!1,n.reset()}})};return(f,t)=>(a(),l(c,null,[p(r(M),{title:"Machine Breakdowns"}),p(j,{title:"Breakdown Logs","render-header":!1},{default:B(()=>[e("div",$,[t[28]||(t[28]=e("div",{class:"fixed inset-0 z-0 pointer-events-none"},[e("div",{class:"absolute inset-0 bg-gradient-to-br from-rose-950/20 to-[#050510]"}),e("div",{class:"perspective-grid absolute inset-0 opacity-10"})],-1)),e("div",E,[e("div",q,[t[11]||(t[11]=e("div",null,[e("div",{class:"flex items-center gap-2 mb-2"},[e("span",{class:"px-2 py-0.5 text-[10px] bg-rose-500/10 border border-rose-500/20 rounded text-rose-400 tracking-[0.2em] uppercase animate-pulse"}," Live Monitoring "),e("span",{class:"px-2 py-0.5 text-[10px] bg-white/5 border border-white/10 rounded text-slate-400 tracking-[0.2em] uppercase"},"MAINT.LOGS.V1")]),e("h1",{class:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-rose-400 via-white to-amber-400 tracking-widest uppercase glow-text"}," BREAKDOWN LOGS ")],-1)),e("button",{onClick:t[0]||(t[0]=s=>m.value=!0),class:"px-4 py-2 bg-gradient-to-r from-rose-600 to-rose-500 hover:from-rose-500 hover:to-rose-400 text-white font-bold rounded-lg shadow-[0_0_15px_rgba(244,63,94,0.3)] transition-all flex items-center gap-2 text-sm animate-pulse"},[p(r(S),{class:"h-4 w-4"}),t[10]||(t[10]=h(" REPORT BREAKDOWN ",-1))])]),b.logs.some(s=>s.status==="Open"||s.status==="In_progress")?(a(),l("div",L,[e("h3",z,[p(r(S),{class:"h-4 w-4"}),t[12]||(t[12]=h(" Active Incidents ",-1))]),e("div",F,[(a(!0),l(c,null,x(b.logs.filter(s=>s.status==="Open"||s.status==="In_progress"),s=>(a(),l("div",{key:s.id,class:"hud-panel p-5 border-l-4 border-l-rose-500 bg-rose-500/5 relative overflow-hidden group"},[e("div",K,[e("div",null,[e("h4",G,o(s.machine),1),e("p",Q,o(s.status),1)]),e("div",W,[t[13]||(t[13]=e("p",{class:"text-[10px] text-slate-500 uppercase"},"Started",-1)),e("p",H,o(s.started_at),1)])]),e("p",J,' "'+o(s.description)+'" ',1),e("div",X,[e("div",Y,[p(r(A),{class:"h-4 w-4"}),e("span",null,"Duration: "+o(s.duration),1)]),e("button",{onClick:y=>I(s),class:"px-3 py-1.5 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-400 border border-emerald-500/50 rounded text-xs uppercase tracking-wider transition-colors"}," Update Status ",8,Z)])]))),128))])])):_("",!0),e("div",ee,[e("h3",te,[p(r(N),{class:"h-4 w-4"}),t[14]||(t[14]=h(" Repair History ",-1))]),e("div",se,[e("table",oe,[t[15]||(t[15]=e("thead",{class:"bg-white/5 text-[10px] uppercase tracking-wider text-slate-400 font-bold"},[e("tr",null,[e("th",{class:"p-4"},"Date"),e("th",{class:"p-4"},"Machine"),e("th",{class:"p-4"},"Issue"),e("th",{class:"p-4"},"Technician"),e("th",{class:"p-4"},"Parts Used"),e("th",{class:"p-4 text-center"},"Duration"),e("th",{class:"p-4 text-center"},"Status")])],-1)),e("tbody",re,[(a(!0),l(c,null,x(b.logs.filter(s=>s.status==="Resolved"||s.status==="Cancelled"),s=>(a(),l("tr",{key:s.id,class:"hover:bg-white/5 transition-colors"},[e("td",le,o(s.started_at),1),e("td",ae,o(s.machine_code),1),e("td",ne,o(s.description),1),e("td",ie,o(s.technician),1),e("td",de,o(s.parts_used||"-"),1),e("td",pe,o(s.duration),1),e("td",ue,[e("span",{class:P(["px-2 py-1 rounded text-[10px] font-bold border",s.status_color])},o(s.status),3)])]))),128))])])])])]),m.value?(a(),l("div",ce,[e("div",be,[e("h3",xe,[p(r(S),{class:"h-5 w-5"}),t[16]||(t[16]=h(" Report Issue ",-1))]),e("form",{onSubmit:T(U,["prevent"]),class:"space-y-4"},[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-xs text-slate-400 mb-1"},"Machine",-1)),u(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>r(i).machine_id=s),class:"w-full bg-white/5 border border-white/10 rounded p-2 text-white outline-none focus:border-rose-500"},[(a(!0),l(c,null,x(b.machines,s=>(a(),l("option",{key:s.id,value:s.id},o(s.name)+" ("+o(s.code)+")",9,me))),128))],512),[[k,r(i).machine_id]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-xs text-slate-400 mb-1"},"Problem Description",-1)),u(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>r(i).description=s),class:"w-full bg-white/5 border border-white/10 rounded p-2 text-white outline-none focus:border-rose-500",rows:"3",placeholder:"Describe the sound, error code, or behavior..."},null,512),[[w,r(i).description]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-xs text-slate-400 mb-1"},"Time Detected",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>r(i).started_at=s),type:"datetime-local",class:"w-full bg-white/5 border border-white/10 rounded p-2 text-white outline-none focus:border-rose-500"},null,512),[[w,r(i).started_at]])]),e("div",ve,[e("button",{type:"button",onClick:t[4]||(t[4]=s=>m.value=!1),class:"px-4 py-2 text-slate-400 hover:text-white"},"Cancel"),t[20]||(t[20]=e("button",{type:"submit",class:"px-4 py-2 bg-rose-600 text-white rounded hover:bg-rose-500 font-bold"},"SUBMIT REPORT",-1))])],32)])])):_("",!0),v.value?(a(),l("div",fe,[e("div",he,[t[27]||(t[27]=e("h3",{class:"text-lg font-bold text-emerald-400 mb-4 uppercase tracking-wider"},"Update Status",-1)),e("form",{onSubmit:T(V,["prevent"]),class:"space-y-4"},[e("div",we,[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-xs text-slate-400 mb-1"},"Status",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>r(n).status=s),class:"w-full bg-white/5 border border-white/10 rounded p-2 text-white outline-none focus:border-emerald-500"},[...t[21]||(t[21]=[e("option",{value:"in_progress"},"In Progress",-1),e("option",{value:"resolved"},"Resolved (Close Ticket)",-1)])],512),[[k,r(n).status]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-xs text-slate-400 mb-1"},"Technician",-1)),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>r(n).technician_name=s),type:"text",class:"w-full bg-white/5 border border-white/10 rounded p-2 text-white outline-none focus:border-emerald-500",placeholder:"Name"},null,512),[[w,r(n).technician_name]])])]),e("div",ge,[t[25]||(t[25]=e("label",{class:"block text-xs text-slate-400 mb-2"},"Record Spareparts Used",-1)),e("div",ye,[u(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>d.value.id=s),class:"flex-1 bg-white/5 border border-white/10 rounded p-2 text-white text-xs"},[t[24]||(t[24]=e("option",{value:"",disabled:""},"Select Part",-1)),(a(!0),l(c,null,x(b.spareparts,s=>(a(),l("option",{key:s.id,value:s.id},o(s.part_number)+" - "+o(s.name)+" (Stock: "+o(s.stock)+")",9,_e))),128))],512),[[k,d.value.id]]),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>d.value.qty=s),type:"number",min:"1",class:"w-16 bg-white/5 border border-white/10 rounded p-2 text-white text-xs",placeholder:"Qty"},null,512),[[w,d.value.qty]]),e("button",{type:"button",onClick:D,class:"px-3 bg-white/10 rounded hover:bg-white/20 text-white"},"+")]),e("div",ke,[(a(!0),l(c,null,x(r(n).spareparts,(s,y)=>(a(),l("div",{key:y,class:"flex justify-between text-xs text-slate-300 bg-white/5 p-1 px-2 rounded"},[e("span",null,"Part ID: "+o(s.id)+" (Qty: "+o(s.qty)+")",1),e("button",{type:"button",onClick:Te=>r(n).spareparts.splice(y,1),class:"text-rose-400"},"x",8,Se)]))),128))])]),e("div",Re,[e("button",{type:"button",onClick:t[9]||(t[9]=s=>v.value=!1),class:"px-4 py-2 text-slate-400 hover:text-white"},"Cancel"),t[26]||(t[26]=e("button",{type:"submit",class:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-500 font-bold"},"UPDATE TICKET",-1))])],32)])])):_("",!0)])]),_:1})],64))}},qe=O(Ce,[["__scopeId","data-v-1c03372e"]]);export{qe as default};
