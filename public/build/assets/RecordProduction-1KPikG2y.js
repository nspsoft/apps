import{c as o,b as t,o as a,f as j,a as n,u as s,h as U,w as v,l as h,t as i,i as M,d as p,j as d,v as x,k as f,F as m,g as k,e as y,B as _}from"./app-CayNR7xr.js";import{r as S}from"./ArrowLeftIcon-CeuB3hYS.js";import{r as P}from"./CubeIcon-BpUmjU0R.js";import{r as C}from"./ClockIcon-IDrEBOJl.js";import{r as O}from"./ExclamationTriangleIcon-DVd_cxoy.js";import{r as F}from"./XMarkIcon-CORBeH5J.js";/* empty css            */function L(u,g){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12H12m-8.25 5.25h16.5"})])}const B={class:"min-h-screen bg-white dark:bg-slate-950 text-slate-900 dark:text-white pb-20"},N={class:"sticky top-0 z-30 bg-white dark:bg-slate-950/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 px-4 py-3 flex items-center justify-between"},T={class:"flex items-center gap-3"},$={class:"text-[10px] items-center gap-1.5 text-slate-500 dark:text-slate-400 font-mono flex"},D={class:"text-blue-400 font-bold uppercase"},Q={class:"h-10 w-10 flex items-center justify-center rounded-xl bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700/50"},z={class:"p-4 max-w-lg mx-auto"},K={class:"glass-card rounded-2xl p-4 space-y-4"},R={class:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest mb-1"},A={class:"grid grid-cols-2 gap-3"},H=["value"],I=["value"],E=["value"],J={class:"glass-card rounded-2xl p-4 space-y-4"},W={class:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest mb-1"},G={class:"grid grid-cols-2 gap-3"},X={key:0,class:"bg-amber-500/10 border border-amber-500/30 rounded-xl p-3 flex gap-3 animate-pulse"},Y={class:"text-[10px] text-amber-200"},Z={class:"grid grid-cols-2 gap-3"},ee={key:0,class:"text-red-400 text-[10px] mt-1 font-bold"},te={class:"glass-card rounded-2xl p-4 space-y-4"},se={class:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest mb-1"},re={class:"grid grid-cols-2 gap-3"},le={class:"col-span-2 sm:col-span-1"},oe=["value"],ae={class:"col-span-2 sm:col-span-1"},de={class:"fixed bottom-0 left-0 right-0 p-4 bg-white dark:bg-slate-950/90 backdrop-blur border-t border-slate-200 dark:border-slate-800 z-40"},ne={class:"max-w-lg mx-auto flex gap-3"},ie=["disabled"],ue={key:0,class:"animate-spin h-5 w-5 border-2 border-white/30 border-t-white rounded-full"},ke={__name:"RecordProduction",props:{workOrder:Object,shiftOptions:Object,machineOptions:Object,defectCategories:Object,operators:Array},setup(u){const g=u,l=j({production_date:new Date().toISOString().split("T")[0],shift:"1",produced_by:"",start_time:"",end_time:"",machine_line:"",qty_good:0,qty_rejected:0,defect_category:"",downtime_minutes:0,notes:""}),w=_(()=>{const c=parseFloat(g.workOrder.qty_planned)||0,e=parseFloat(g.workOrder.qty_produced)||0;return Math.max(0,c-e)}),q=_(()=>parseFloat(l.qty_good)>w.value),V=()=>{l.post(route("manufacturing.work-orders.record-production",g.workOrder.id),{onSuccess:()=>{}})};return(c,e)=>(a(),o(m,null,[n(s(U),{title:"Production Report"}),t("div",B,[t("div",N,[t("div",T,[n(s(h),{href:c.route("manufacturing.work-orders.show",u.workOrder.id),class:"p-2 -ml-2 rounded-full text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white active:bg-slate-50 dark:bg-slate-800"},{default:v(()=>[n(s(S),{class:"h-6 w-6"})]),_:1},8,["href"]),t("div",null,[e[12]||(e[12]=t("h1",{class:"font-bold text-lg leading-tight"},"Laporan Produksi",-1)),t("p",$,[t("span",null,i(u.workOrder.wo_number),1),e[11]||(e[11]=t("span",{class:"h-1 w-1 rounded-full bg-slate-600"},null,-1)),t("span",D,i(w.value)+" Left",1)])])]),t("div",Q,[n(s(P),{class:"h-5 w-5 text-emerald-400"})])]),t("div",z,[t("form",{onSubmit:M(V,["prevent"]),class:"space-y-6"},[t("div",K,[t("div",R,[n(s(L),{class:"h-4 w-4"}),e[13]||(e[13]=p(" Identitas ",-1))]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2"},"Tanggal & Shift",-1)),t("div",A,[d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>s(l).production_date=r),type:"date",class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 py-3 px-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-emerald-500/50",required:""},null,512),[[x,s(l).production_date]]),d(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>s(l).shift=r),class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 py-3 px-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-emerald-500/50",required:""},[(a(!0),o(m,null,k(u.shiftOptions,(r,b)=>(a(),o("option",{key:b,value:b},i(r),9,H))),128))],512),[[f,s(l).shift]])])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2"},"Operator",-1)),d(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>s(l).produced_by=r),class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 py-3 px-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-emerald-500/50",required:""},[e[15]||(e[15]=t("option",{value:""},"Pilih Operator...",-1)),(a(!0),o(m,null,k(u.operators,r=>(a(),o("option",{key:r.id,value:r.id},i(r.name),9,I))),128))],512),[[f,s(l).produced_by]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2"},"Mesin / Line",-1)),d(t("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>s(l).machine_line=r),class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 py-3 px-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-emerald-500/50"},[e[17]||(e[17]=t("option",{value:""},"- Pilih Mesin / Line -",-1)),(a(!0),o(m,null,k(u.machineOptions,(r,b)=>(a(),o("option",{key:b,value:b},i(r),9,E))),128))],512),[[f,s(l).machine_line]])])]),t("div",J,[t("div",W,[n(s(C),{class:"h-4 w-4"}),e[19]||(e[19]=p(" Waktu & Hasil ",-1))]),t("div",G,[t("div",null,[e[20]||(e[20]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2"},"Mulai",-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>s(l).start_time=r),type:"time",class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 py-3 px-4 text-slate-900 dark:text-white text-center font-mono focus:ring-2 focus:ring-emerald-500/50"},null,512),[[x,s(l).start_time]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2"},"Selesai",-1)),d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>s(l).end_time=r),type:"time",class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 py-3 px-4 text-slate-900 dark:text-white text-center font-mono focus:ring-2 focus:ring-emerald-500/50"},null,512),[[x,s(l).end_time]])])]),e[25]||(e[25]=t("div",{class:"pt-2 border-t border-slate-200 dark:border-slate-800"},null,-1)),q.value?(a(),o("div",X,[n(s(O),{class:"h-5 w-5 text-amber-500 shrink-0"}),t("div",Y,[e[22]||(e[22]=t("strong",null,"Over Produksi!",-1)),p(" Jumlah yang anda masukkan ("+i(s(l).qty_good)+") melebihi sisa rencana ("+i(w.value)+"). Pastikan data sudah benar. ",1)])])):y("",!0),t("div",Z,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2"},[p("Qty OK "),t("span",{class:"text-emerald-500"},"*")],-1)),d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>s(l).qty_good=r),type:"number",step:"0.0001",min:"0",class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 py-4 px-4 text-emerald-400 text-2xl font-bold font-mono text-center focus:ring-2 focus:ring-emerald-500/50",required:""},null,512),[[x,s(l).qty_good]]),s(l).errors.qty_good?(a(),o("div",ee,i(s(l).errors.qty_good),1)):y("",!0)]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2"},"Qty Reject",-1)),d(t("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>s(l).qty_rejected=r),type:"number",step:"0.0001",min:"0",class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 py-4 px-4 text-red-400 text-2xl font-bold font-mono text-center focus:ring-2 focus:ring-red-500/50"},null,512),[[x,s(l).qty_rejected]])])])]),t("div",te,[t("div",se,[n(s(O),{class:"h-4 w-4"}),e[26]||(e[26]=p(" Quality & Notes ",-1))]),t("div",re,[t("div",le,[e[28]||(e[28]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2"},"Kategori Cacat",-1)),d(t("select",{"onUpdate:modelValue":e[8]||(e[8]=r=>s(l).defect_category=r),class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 py-3 px-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-emerald-500/50"},[e[27]||(e[27]=t("option",{value:""},"- Tidak Ada -",-1)),(a(!0),o(m,null,k(u.defectCategories,(r,b)=>(a(),o("option",{key:b,value:b},i(r),9,oe))),128))],512),[[f,s(l).defect_category]])]),t("div",ae,[e[29]||(e[29]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2"},"Downtime (menit)",-1)),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>s(l).downtime_minutes=r),type:"number",min:"0",class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 py-3 px-4 text-slate-900 dark:text-white font-mono focus:ring-2 focus:ring-emerald-500/50"},null,512),[[x,s(l).downtime_minutes]])])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2"},"Catatan",-1)),d(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=r=>s(l).notes=r),rows:"2",class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 py-3 px-4 text-slate-900 dark:text-white resize-none focus:ring-2 focus:ring-emerald-500/50",placeholder:"Keterangan tambahan..."},null,512),[[x,s(l).notes]])])]),t("div",de,[t("div",ne,[n(s(h),{href:c.route("manufacturing.work-orders.show",u.workOrder.id),class:"px-4 py-3.5 rounded-xl bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 font-bold active:bg-slate-700 active:scale-95 transition-all"},{default:v(()=>[n(s(F),{class:"h-6 w-6"})]),_:1},8,["href"]),t("button",{type:"submit",disabled:s(l).processing,class:"flex-1 py-3.5 rounded-xl bg-gradient-to-r from-emerald-600 to-emerald-500 text-slate-900 dark:text-white font-bold text-lg shadow-lg shadow-emerald-500/25 active:scale-95 transition-all disabled:opacity-50 disabled:scale-100 flex items-center justify-center gap-2"},[s(l).processing?(a(),o("span",ue)):y("",!0),p(" "+i(s(l).processing?"Menyimpan...":"Simpan Laporan"),1)],8,ie)])]),e[31]||(e[31]=t("div",{class:"h-20"},null,-1))],32)])])],64))}};export{ke as default};
