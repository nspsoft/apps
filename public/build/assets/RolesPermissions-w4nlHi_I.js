import{f as H,c as i,a as r,u as s,h as J,w as u,b as e,d as k,o as n,F as f,g as v,t as p,e as w,i as P,j as V,v as Q,x as W,y as X,n as B,M as Z,m as _,s as K}from"./app-BVbBi1v-.js";import{h as ee,_ as te}from"./AppLayout-DOlVvMHK.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as N}from"./ShieldCheckIcon-Dk4WmDkO.js";import{r as oe}from"./PlusIcon-CS6h85nf.js";import{r as le}from"./PencilSquareIcon--9HpRUmS.js";import{r as ae}from"./TrashIcon-Dvb4hG2f.js";import{r as T}from"./ChevronRightIcon-fwWWz-iA.js";import{r as re}from"./XMarkIcon-DleNEIZ9.js";import{r as ne}from"./ExclamationTriangleIcon-ojOmJVCo.js";import{S as z,h as A}from"./transition-ixwK52ZA.js";import{Y as G,G as F,V as L}from"./dialog-BO9lMyVL.js";/* empty css            */import"./SunIcon-DoQVgGbC.js";import"./WrenchScrewdriverIcon-DeG5a-oi.js";import"./DocumentPlusIcon-B1nE5q6J.js";import"./TruckIcon-YY_na4eh.js";import"./DocumentTextIcon-DGI6oD-T.js";import"./ShoppingCartIcon-BtxP_-yJ.js";import"./MapPinIcon-BwUIpz0Y.js";import"./SparklesIcon-D9eFIBft.js";import"./CubeIcon-DaWhtn2l.js";import"./ClockIcon-Q_IIiaCG.js";import"./CheckCircleIcon-CNZlklV5.js";const ie={class:"space-y-6"},de={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},ce={class:"flex items-center gap-4"},ue={class:"flex h-12 w-12 items-center justify-center rounded-2xl bg-indigo-500/10 text-indigo-400"},pe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},xe={class:"flex items-start justify-between mb-4"},me={class:"flex items-center gap-3"},be={class:"h-10 w-10 rounded-xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-indigo-400 border border-slate-200 dark:border-slate-700"},fe={class:"font-bold text-slate-900 dark:text-white"},ve={key:0,class:"flex gap-1"},ge=["onClick"],he=["onClick"],ke={class:"mb-6"},we={class:"flex flex-wrap gap-2"},ye={key:0,class:"text-[10px] text-slate-500 font-medium self-center"},_e={key:1,class:"text-xs italic text-slate-600"},$e=["onClick"],Ce={class:"fixed inset-0 z-10 overflow-y-auto"},je={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},Ae={class:"px-8 py-5 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-900"},Se={class:"p-8 space-y-8 max-h-[70vh] overflow-y-auto custom-scrollbar"},Re={key:0,class:"mt-2 text-xs text-red-500 font-medium"},Me={class:"flex items-center justify-between mb-4"},Ee={class:"flex items-center gap-4"},De={class:"text-xs text-slate-500 font-medium"},Pe={class:"space-y-4"},Ve=["onClick"],Be={class:"flex items-center gap-3"},Ne={class:"text-sm font-black text-slate-900 dark:text-white uppercase tracking-wider"},Te={class:"flex items-center gap-4"},ze=["onClick"],Ge={class:"overflow-x-auto"},Fe={class:"w-full text-left"},Le={class:"bg-slate-100 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800/30"},Oe={class:"divide-y divide-slate-100 dark:divide-slate-800/30"},Ye={class:"bg-indigo-500/5 border-b border-indigo-500/10"},Ie=["onClick"],Ue={key:0,class:"h-2.5 w-2.5 text-slate-900 dark:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"4"},qe={class:"px-8 py-3 pl-12"},He={class:"text-xs font-medium text-slate-600 dark:text-slate-300"},Je=["onClick"],Qe={key:0,class:"h-2.5 w-2.5 text-slate-900 dark:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"4"},We={class:"px-4 py-3 text-right"},Xe=["onClick"],Ze={class:"px-8 py-5 bg-slate-50 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800 flex justify-end gap-4"},Ke=["disabled"],et={class:"fixed inset-0 z-10 overflow-y-auto"},tt={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},st={class:"p-8 text-center"},ot={class:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-red-500/10 text-red-500 mb-6 font-bold shadow-inner border border-red-500/20"},lt={class:"text-sm text-slate-500 dark:text-slate-400 px-4 leading-relaxed"},at={class:"text-slate-900 dark:text-white font-bold"},rt={class:"mt-8 flex gap-3"},nt={__name:"RolesPermissions",props:{roles:Array,permissionStructure:Object,availableActions:Array},setup(g){const $=g,b=_(!1),y=_(!1),h=_(null),S=_(null),C=_({}),l=H({name:"",permissions:[]}),O=()=>{h.value=null,l.clearErrors(),l.reset(),b.value=!0},R=d=>{h.value=d,l.clearErrors(),l.name=d.name,l.permissions=d.permissions.map(t=>t.name),b.value=!0},Y=()=>{h.value?l.put(route("settings.roles.update",h.value.id),{onSuccess:()=>b.value=!1}):l.post(route("settings.roles.store"),{onSuccess:()=>b.value=!1})},I=d=>{S.value=d,y.value=!0},U=()=>{K.delete(route("settings.roles.destroy",S.value.id),{onSuccess:()=>y.value=!1})},M=d=>{const t=l.permissions.indexOf(d);t>-1?l.permissions.splice(t,1):l.permissions.push(d)},j=d=>l.permissions.includes(d),q=d=>{C.value[d]=!C.value[d]},E=(d,t=null)=>{let o=[];if(t)o=$.availableActions.map(a=>`${d}.${t}.${a}`);else{const a=$.availableActions.map(m=>`${d}.${m}`),x=[];Object.keys($.permissionStructure[d].menus||{}).forEach(m=>{$.availableActions.forEach(D=>x.push(`${d}.${m}.${D}`))}),o=[...a,...x]}o.every(a=>l.permissions.includes(a))?l.permissions=l.permissions.filter(a=>!o.includes(a)):o.forEach(a=>{l.permissions.includes(a)||l.permissions.push(a)})};return(d,t)=>(n(),i(f,null,[r(s(J),{title:"Roles & Permissions"}),r(te,{title:"Roles & Permissions"},{default:u(()=>[e("div",ie,[e("div",de,[e("div",ce,[e("div",ue,[r(s(N),{class:"h-7 w-7"})]),t[6]||(t[6]=e("div",null,[e("h2",{class:"text-xl font-bold text-slate-900 dark:text-white"},"Access Control"),e("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Configure granular menu access and operational privileges")],-1))]),e("button",{onClick:O,class:"inline-flex items-center justify-center gap-2 rounded-xl bg-indigo-600 px-4 py-2.5 text-sm font-semibold text-slate-900 dark:text-white shadow-lg shadow-indigo-900/20 hover:bg-indigo-500 transition-all duration-200"},[r(s(oe),{class:"h-5 w-5"}),t[7]||(t[7]=k(" Create New Role ",-1))])]),e("div",pe,[(n(!0),i(f,null,v(g.roles,o=>(n(),i("div",{key:o.id,class:"group relative rounded-2xl glass-card p-6 shadow-xl hover:border-indigo-500/50 transition-all duration-300"},[e("div",xe,[e("div",me,[e("div",be,[r(s(N),{class:"h-6 w-6"})]),e("h3",fe,p(o.name),1)]),o.name!=="Super Admin"?(n(),i("div",ve,[e("button",{type:"button",onClick:c=>R(o),class:"p-2 text-slate-500 dark:text-slate-400 hover:text-indigo-400 hover:bg-indigo-400/10 rounded-xl transition-all border border-transparent hover:border-indigo-500/30",title:"Edit Role"},[r(s(le),{class:"h-5 w-5"})],8,ge),e("button",{type:"button",onClick:c=>I(o),class:"p-2 text-slate-500 dark:text-slate-400 hover:text-red-400 hover:bg-red-400/10 rounded-xl transition-all border border-transparent hover:border-red-500/30",title:"Delete Role"},[r(s(ae),{class:"h-5 w-5"})],8,he)])):w("",!0)]),e("div",ke,[t[8]||(t[8]=e("div",{class:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-3"},"Privileges Summary",-1)),e("div",we,[(n(!0),i(f,null,v(o.permissions.slice(0,3),c=>(n(),i("span",{key:c.id,class:"inline-flex px-2 py-0.5 rounded-md bg-slate-50 dark:bg-slate-800 text-[10px] font-medium text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700"},p(c.name),1))),128)),o.permissions.length>3?(n(),i("span",ye,"+"+p(o.permissions.length-3)+" more",1)):w("",!0),o.permissions.length===0?(n(),i("span",_e,"No permissions assigned")):w("",!0)])]),e("button",{onClick:c=>R(o),class:"w-full mt-2 flex items-center justify-between px-4 py-2 rounded-xl bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 text-xs font-medium text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white transition-all group-hover:border-indigo-500/20 border border-transparent"},[t[9]||(t[9]=k(" Configure Granular Access ",-1)),r(s(T),{class:"h-3 w-3"})],8,$e)]))),128))])]),r(s(z),{as:"template",show:b.value},{default:u(()=>[r(s(G),{as:"div",class:"relative z-[99]",onClose:t[3]||(t[3]=o=>b.value=!1)},{default:u(()=>[r(s(A),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:u(()=>[...t[10]||(t[10]=[e("div",{class:"fixed inset-0 bg-slate-950/50 dark:bg-slate-950/80 backdrop-blur-sm transition-opacity"},null,-1)])]),_:1}),e("div",Ce,[e("div",je,[r(s(A),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:u(()=>[r(s(F),{class:"relative transform overflow-hidden rounded-2xl glass-card text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-4xl"},{default:u(()=>[e("form",{onSubmit:P(Y,["prevent"])},[e("div",Ae,[r(s(L),{as:"h3",class:"text-xl font-bold text-slate-900 dark:text-white"},{default:u(()=>[k(p(h.value?"Edit Role: "+h.value.name:"Create New Role"),1)]),_:1}),e("button",{onClick:t[0]||(t[0]=o=>b.value=!1),type:"button",class:"text-slate-500 hover:text-slate-900 dark:text-white transition-colors"},[r(s(re),{class:"h-7 w-7"})])]),e("div",Se,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-widest"},"Role Name",-1)),V(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s(l).name=o),type:"text",class:"block w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-white/10 rounded-xl text-lg font-bold text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all placeholder-slate-400 dark:placeholder-slate-600",placeholder:"e.g. Sales Coordinator"},null,512),[[Q,s(l).name]]),s(l).errors.name?(n(),i("p",Re,p(s(l).errors.name),1)):w("",!0)]),e("div",null,[e("div",Me,[t[12]||(t[12]=e("label",{class:"block text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest"},"Granular Access Matrix",-1)),e("div",Ee,[e("span",De,p(s(l).permissions.length)+" active permissions",1)])]),e("div",Pe,[(n(!0),i(f,null,v(g.permissionStructure,(o,c)=>(n(),i("div",{key:c,class:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900 overflow-hidden shadow-sm"},[e("div",{class:"px-6 py-4 bg-slate-100/80 dark:bg-slate-900 flex items-center justify-between cursor-pointer border-b border-slate-200 dark:border-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",onClick:a=>q(c)},[e("div",Be,[(n(),W(X(C.value[c]?s(ee):s(T)),{class:"h-4 w-4 text-slate-500"})),e("span",Ne,p(o.name),1)]),e("div",Te,[e("button",{type:"button",onClick:P(a=>E(c),["stop"]),class:"text-[10px] font-bold text-indigo-500 hover:text-indigo-400 uppercase tracking-tighter"}," Toggle All Module ",8,ze)])],8,Ve),V(e("div",Ge,[e("table",Fe,[e("thead",null,[e("tr",Le,[t[13]||(t[13]=e("th",{class:"px-8 py-3 text-[10px] font-bold text-slate-600 uppercase"},"Sub-menu / Action",-1)),(n(!0),i(f,null,v(g.availableActions,a=>(n(),i("th",{key:a,class:"px-4 py-3 text-[10px] font-bold text-slate-600 uppercase text-center"},p(a),1))),128)),t[14]||(t[14]=e("th",{class:"px-4 py-3"},null,-1))])]),e("tbody",Oe,[e("tr",Ye,[t[16]||(t[16]=e("td",{class:"px-8 py-3"},[e("span",{class:"text-xs font-bold text-indigo-400 italic"},"General Module Access")],-1)),(n(!0),i(f,null,v(g.availableActions,a=>(n(),i("td",{key:a,class:"px-4 py-3 text-center"},[e("button",{type:"button",onClick:x=>M(`${c}.${a}`),class:B(["h-4 w-4 rounded border transition-all inline-flex items-center justify-center p-0",j(`${c}.${a}`)?"bg-indigo-600 border-indigo-600 shadow-[0_0_8px_rgba(79,70,229,0.4)]":"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"])},[j(`${c}.${a}`)?(n(),i("svg",Ue,[...t[15]||(t[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)])])):w("",!0)],10,Ie)]))),128)),t[17]||(t[17]=e("td",{class:"px-4 py-3"},null,-1))]),(n(!0),i(f,null,v(o.menus,(a,x)=>(n(),i("tr",{key:x,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[e("td",qe,[e("span",He,p(a.name),1)]),(n(!0),i(f,null,v(g.availableActions,m=>(n(),i("td",{key:m,class:"px-4 py-3 text-center"},[e("button",{type:"button",onClick:D=>M(`${c}.${x}.${m}`),class:B(["h-4 w-4 rounded border transition-all inline-flex items-center justify-center p-0",j(`${c}.${x}.${m}`)?"bg-indigo-600 border-indigo-600 shadow-[0_0_8px_rgba(79,70,229,0.4)]":"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"])},[j(`${c}.${x}.${m}`)?(n(),i("svg",Qe,[...t[18]||(t[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)])])):w("",!0)],10,Je)]))),128)),e("td",We,[e("button",{type:"button",onClick:m=>E(c,x),class:"text-[9px] font-bold text-slate-700 hover:text-indigo-400 uppercase transition-colors"}," All ",8,Xe)])]))),128))])])],512),[[Z,C.value[c]]])]))),128))])])]),e("div",Ze,[e("button",{onClick:t[2]||(t[2]=o=>b.value=!1),type:"button",class:"px-4 py-2 text-sm font-medium text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white transition-colors"},"Cancel"),e("button",{type:"submit",disabled:s(l).processing,class:"inline-flex items-center justify-center gap-2 rounded-xl bg-indigo-600 px-8 py-2.5 text-sm font-bold text-slate-900 dark:text-white shadow-lg shadow-indigo-900/20 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all"}," Commit Access Rights ",8,Ke)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),r(s(z),{as:"template",show:y.value},{default:u(()=>[r(s(G),{as:"div",class:"relative z-[99]",onClose:t[5]||(t[5]=o=>y.value=!1)},{default:u(()=>[r(s(A),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:u(()=>[...t[19]||(t[19]=[e("div",{class:"fixed inset-0 bg-slate-950/50 dark:bg-slate-950/80 backdrop-blur-sm transition-opacity"},null,-1)])]),_:1}),e("div",et,[e("div",tt,[r(s(A),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:u(()=>[r(s(F),{class:"relative transform overflow-hidden rounded-2xl glass-card text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-md"},{default:u(()=>[e("div",st,[e("div",ot,[r(s(ne),{class:"h-10 w-10"})]),r(s(L),{as:"h3",class:"text-2xl font-black text-slate-900 dark:text-white mb-2 tracking-tight"},{default:u(()=>[...t[20]||(t[20]=[k("Void Role?",-1)])]),_:1}),e("p",lt,[t[21]||(t[21]=k(" Deleting role ",-1)),e("span",at,p(S.value?.name),1),t[22]||(t[22]=k(" will revoke all granular sub-menu access for assigned users. ",-1))]),e("div",rt,[e("button",{onClick:t[4]||(t[4]=o=>y.value=!1),class:"flex-1 px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-800 text-sm font-bold text-slate-500 hover:text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-all"}," Keep it "),e("button",{onClick:U,class:"flex-1 px-4 py-3 rounded-xl bg-red-600 text-sm font-bold text-slate-900 dark:text-white shadow-lg shadow-red-900/20 hover:bg-red-500 transition-all"}," Delete Permanently ")])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]),_:1})],64))}},Dt=se(nt,[["__scopeId","data-v-479db28b"]]);export{Dt as default};
