import{c as d,e,o as i,r as b,a as T,w as N,b as r,u as o,h as le,d as S,f as M,v as re,n as h,m as F,j as c,t as l,k as v,l as I,F as f,g as D,i as J,y as oe,A as ie,T as de,G as ne,D as ue}from"./app-BYeJTv9y.js";import{e as U,_ as ce}from"./AppLayout-CLufs19w.js";import{d as xe}from"./debounce-CoGdMfIB.js";import be from"./Board-D_Ty2hU5.js";import{r as ve}from"./MagnifyingGlassIcon-DYSWaLOi.js";import{r as pe}from"./ListBulletIcon-BuA2pA5z.js";import{r as Z}from"./FunnelIcon-Bp3KDJyE.js";import{r as ge}from"./ArrowPathIcon-BR-7kGTe.js";import{r as V}from"./DocumentCheckIcon-66xC19gx.js";import{r as me}from"./PlusIcon-zxFxiL4z.js";import{r as he}from"./InformationCircleIcon-C3z4JB7R.js";import{r as H}from"./TruckIcon-BcF8ZRP_.js";import{r as fe}from"./PrinterIcon-CS5qon0v.js";import{r as ke}from"./EyeIcon-BDYQrvwq.js";import{r as we}from"./TrashIcon-Dv57bnGd.js";import{r as ye}from"./ShieldCheckIcon-BBVM8pyV.js";import{r as _e}from"./XMarkIcon-BcBxR29t.js";import{r as Se}from"./UserIcon-C-3rv6zU.js";/* empty css            */import"./SunIcon-Dhyqz8EH.js";import"./WrenchScrewdriverIcon-CtdOG5yc.js";import"./CheckBadgeIcon-DyjiBWBj.js";import"./ShoppingCartIcon-B35ZOMoX.js";import"./CubeIcon-CHgtXOQ2.js";import"./MapPinIcon-DKiy165D.js";import"./DocumentPlusIcon-rKIuxJnY.js";function De(n,k){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m7.875 14.25 1.214 1.942a2.25 2.25 0 0 0 1.908 1.058h2.006c.776 0 1.497-.4 1.908-1.058l1.214-1.942M2.41 9h4.636a2.25 2.25 0 0 1 1.872 1.002l.164.246a2.25 2.25 0 0 0 1.872 1.002h2.092a2.25 2.25 0 0 0 1.872-1.002l.164-.246A2.25 2.25 0 0 1 16.954 9h4.636M2.41 9a2.25 2.25 0 0 0-.16.832V12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 12V9.832c0-.287-.055-.57-.16-.832M2.41 9a2.25 2.25 0 0 1 .382-.632l3.285-3.832a2.25 2.25 0 0 1 1.708-.786h8.43c.657 0 1.281.287 1.709.786l3.284 3.832c.163.19.291.404.382.632M4.5 20.25h15A2.25 2.25 0 0 0 21.75 18v-2.625c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125V18a2.25 2.25 0 0 0 2.25 2.25Z"})])}function Ce(n,k){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})])}const $e={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},Ae={class:"flex items-center gap-3"},Ie={class:"relative flex-1 sm:w-80"},je={class:"bg-slate-50 dark:bg-slate-900 p-1 rounded-xl flex items-center border border-slate-200 dark:border-slate-800"},Pe=["disabled"],Be={key:0,class:"mb-6 p-4 rounded-xl bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 grid grid-cols-1 md:grid-cols-4 gap-4"},Me={class:"relative group"},Ve={class:"relative"},Oe=["value"],Te={class:"relative group"},Fe={class:"flex items-center gap-1 mb-1"},He={class:"relative"},Le=["value","title"],Ne={key:1,class:"h-[calc(100vh-280px)] overflow-hidden"},Je={key:0,class:"mb-4 bg-amber-50 text-amber-600 px-4 py-2 rounded-lg text-xs font-bold border border-amber-100 flex items-center gap-2"},Ue={key:2,class:"rounded-2xl glass-card overflow-hidden"},Ze={key:0,class:"bg-blue-600/10 dark:bg-blue-500/10 px-6 py-3 border-b border-blue-500/20 flex items-center justify-between"},Ge={class:"text-sm text-blue-600 dark:text-blue-400 font-medium"},Ee={key:0},Re={key:1},qe={class:"overflow-x-auto overflow-y-auto max-h-[600px]"},ze={class:"min-w-full divide-y divide-slate-100 dark:divide-slate-800"},Ke={class:"bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50"},Qe={class:"px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},Ye={class:"flex items-center gap-2"},We=["checked"],Xe={class:"divide-y divide-slate-100 dark:divide-slate-800"},et={class:"px-4 py-2 whitespace-nowrap"},tt={class:"flex items-center gap-3"},st=["value","disabled","title"],at={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-50 dark:bg-slate-800"},lt={class:"text-sm font-medium text-slate-900 dark:text-white"},rt={class:"text-xs text-slate-500"},ot={class:"px-4 py-2 whitespace-nowrap text-sm"},it={class:"px-4 py-2 whitespace-nowrap"},dt={class:"text-sm text-slate-900 dark:text-white font-medium"},nt={key:0,class:"text-[10px] text-slate-500 uppercase tracking-tighter"},ut={class:"px-4 py-2 whitespace-nowrap"},ct={class:"text-sm text-slate-600 dark:text-slate-300"},xt={class:"px-4 py-2 whitespace-nowrap text-center text-sm text-slate-600 dark:text-slate-300"},bt={class:"px-4 py-2 whitespace-nowrap text-center"},vt={class:"flex flex-col items-center gap-1"},pt=["title"],gt=["title"],mt={class:"px-4 py-2 whitespace-nowrap text-right"},ht={class:"flex items-center justify-end gap-2"},ft=["href"],kt=["onClick"],wt={key:0},yt={colspan:"7",class:"px-4 py-12 text-center"},_t={class:"mt-6"},St={key:1,class:"border-t border-slate-200 dark:border-slate-800 px-6 py-4 flex items-center justify-between"},Dt={class:"text-sm text-slate-500 dark:text-slate-400"},Ct={class:"flex items-center gap-2"},$t={class:"mt-12"},At={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},It={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},jt={class:"flex items-center gap-3 mb-3"},Pt={class:"p-2.5 rounded-xl bg-purple-500/10 text-purple-400"},Bt={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},Mt={class:"flex items-center gap-3 mb-3"},Vt={class:"p-2.5 rounded-xl bg-blue-500/10 text-blue-400"},Ot={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},Tt={class:"flex items-center gap-3 mb-3"},Ft={class:"p-2.5 rounded-xl bg-emerald-500/10 text-emerald-400"},Ht={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},Lt={class:"flex items-center gap-3 mb-3"},Nt={class:"p-2.5 rounded-xl bg-amber-500/10 text-amber-400"},Jt={key:0,class:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ut={class:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Zt={class:"relative inline-block transform overflow-hidden rounded-3xl bg-white dark:bg-slate-900 text-left align-bottom shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:align-middle border border-slate-200 dark:border-slate-800"},Gt={class:"absolute top-0 right-0 pt-6 pr-6"},Et={class:"p-8"},Rt={class:"flex items-center gap-4 mb-8"},qt={class:"p-3 bg-indigo-500/10 rounded-2xl"},zt={class:"text-slate-500 dark:text-slate-400"},Kt={class:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4"},Qt={class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700"},Yt={class:"text-2xl font-bold text-indigo-500"},Wt={class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700"},Xt={class:"text-2xl font-bold text-blue-500"},es={class:"max-h-[400px] overflow-y-auto mb-8 pr-2 custom-scrollbar"},ts={class:"pt-1"},ss=["checked","onChange"],as={class:"flex-1"},ls={class:"flex flex-wrap justify-between items-start gap-4 mb-4"},rs={class:"text-sm font-bold text-slate-900 dark:text-white flex items-center gap-2"},os={class:"text-xs text-slate-500 mt-1"},is={class:"text-right"},ds={class:"text-sm font-bold text-indigo-500"},ns={class:"text-xs text-slate-500 mt-1"},us={class:"space-y-2 pt-3 border-t border-slate-100 dark:border-slate-800"},cs={class:"text-slate-600 dark:text-slate-400 font-medium"},xs={class:"font-bold text-slate-700 dark:text-slate-300"},bs={class:"flex items-center justify-end gap-3 pt-6 border-t border-slate-100 dark:border-slate-800"},vs=["disabled"],Js={__name:"Index",props:{deliveryOrders:Object,pendingSalesOrders:Array,filters:Object,statuses:Array},setup(n){const k=n,m=b(k.filters.search||""),p=b(k.filters.status||""),j=b(!1),C=b("list"),G=a=>{confirm("Yakin ingin menghapus Draft Surat Jalan ini? Tindakan ini tidak dapat dibatalkan.")&&T.delete(route("sales.deliveries.destroy",a),{preserveScroll:!0})},L=xe(()=>{T.get(route("sales.deliveries.index"),{search:m.value||void 0,status:p.value||void 0,invoice_status:w.value||void 0},{preserveState:!0,replace:!0})},300);N([m,p],L);const E=a=>({draft:"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",confirmed:"bg-blue-500/20 text-blue-400 border-blue-500/30",picking:"bg-amber-500/20 text-amber-400 border-amber-500/30",packed:"bg-blue-600/20 text-blue-500 border-blue-500/30",shipped:"bg-purple-500/20 text-purple-400 border-purple-500/30",delivered:"bg-teal-500/20 text-teal-400 border-teal-500/30",completed:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",cancelled:"bg-red-500/20 text-red-400 border-red-500/30"})[a]||"bg-slate-500/10 text-slate-400 border-slate-500/20",R=a=>({pending:"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",partial:"bg-amber-500/20 text-amber-400 border-amber-500/30",invoiced:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"})[a]||"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",q=a=>({pending:"Belum ada item yang dibuatkan invois.",partial:"Baru sebagian item ditagih atau ada penyesuaian tonase.",invoiced:"Seluruh barang sudah berhasil ditagih (Lunas Invois)."})[a]||"",z=a=>new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}),K=a=>({draft:"Draft surat jalan, belum diproses.",picking:"Barang sedang diambil di gudang.",packed:"Barang siap dimuat (load).",shipped:"Barang dalam perjalanan.",delivered:"Barang sampai di tujuan (Laporan Driver).",completed:"Selesai (Verifikasi Admin/POD).",cancelled:"Pengiriman dibatalkan."})[a]||"",u=b([]),x=b(!1),w=b(k.filters.invoice_status||""),$=a=>["completed","delivered","shipped"].includes(a.status)&&a.invoice_status!=="invoiced",Q=a=>{x.value=!1,a.target.checked?u.value=k.deliveryOrders.data.filter(t=>$(t)).map(t=>t.id):u.value=[]},Y=()=>{x.value=!0},y=b(!1),A=b(!1),_=b(null),g=b([]),W=a=>{const t=g.value.indexOf(a);t>-1?g.value.splice(t,1):g.value.push(a)},O=ue(()=>_.value?_.value.invoices_count-g.value.length:0),X=async()=>{if(!(u.value.length===0&&!x.value)){A.value=!0;try{const a=await ne.post(route("sales.deliveries.bulk-invoice-preview"),{ids:u.value,select_all:x.value,filters:{search:m.value,status:p.value,invoice_status:w.value}});_.value=a.data,g.value=[],y.value=!0}catch(a){console.error("Preview error:",a),alert(a.response?.data?.error||"Failed to prepare preview. Please try again.")}finally{A.value=!1}}},ee=()=>{T.post(route("sales.deliveries.bulk-invoice"),{ids:u.value,select_all:x.value,filters:{search:m.value,status:p.value,invoice_status:w.value},excluded_so_ids:g.value},{onStart:()=>{y.value=!1},onSuccess:()=>{u.value=[],x.value=!1}})},te=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),se=[{value:"pending",label:"Pending",description:"Belum ditagih sama sekali."},{value:"partial",label:"Partial",description:"Ditagih sebagian (Item tertentu saja/Koreksi tonase)."},{value:"invoiced",label:"Fully Invoiced",description:"Sudah ditagih lunas seluruh item."}];return N([m,p,w],()=>{u.value=[],x.value=!1,L()}),(a,t)=>(i(),d(f,null,[r(o(le),{title:"Delivery Orders"}),r(ce,{title:"Delivery Orders"},{default:S(()=>[e("div",$e,[e("div",Ae,[e("div",Ie,[r(o(ve),{class:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-500"}),M(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),type:"search",placeholder:"Search DO number...",class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 py-2.5 pl-10 pr-4 text-sm text-slate-900 dark:text-white placeholder:text-slate-500 focus:bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500/50 transition-all"},null,512),[[re,m.value]])]),e("div",je,[e("button",{onClick:t[1]||(t[1]=s=>C.value="list"),class:h(["p-2 rounded-lg transition-all",C.value==="list"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"])},[r(o(pe),{class:"w-5 h-5"})],2),e("button",{onClick:t[2]||(t[2]=s=>C.value="board"),class:h(["p-2 rounded-lg transition-all",C.value==="board"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"])},[r(o(Ce),{class:"w-5 h-5"})],2)]),e("button",{onClick:t[3]||(t[3]=s=>j.value=!j.value),class:h(["flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 px-4 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors",{"ring-2 ring-blue-500/50":j.value}])},[r(o(Z),{class:"h-5 w-5"})],2),u.value.length>0||x.value?(i(),d("button",{key:0,onClick:X,disabled:A.value,class:"flex items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-indigo-500/25 hover:bg-indigo-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[A.value?(i(),F(o(ge),{key:0,class:"h-5 w-5 animate-spin"})):(i(),F(o(V),{key:1,class:"h-5 w-5"})),c(" "+l(A.value?"Preparing Preview...":`Create Invoice (${x.value?n.deliveryOrders.total:u.value.length})`),1)],8,Pe)):v("",!0)]),r(o(I),{href:a.route("sales.deliveries.create"),class:"inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-blue-500 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-blue-500/25 hover:from-blue-500 hover:to-blue-400 transition-all"},{default:S(()=>[r(o(me),{class:"h-5 w-5"}),t[12]||(t[12]=c(" Create Delivery ",-1))]),_:1},8,["href"])]),j.value?(i(),d("div",Be,[e("div",Me,[t[14]||(t[14]=e("label",{class:"text-xs font-bold text-slate-500 mb-1 block"},"Status",-1)),e("div",Ve,[M(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>p.value=s),class:"w-full bg-white dark:bg-slate-900 border-0 ring-2 ring-slate-200 dark:ring-slate-800 rounded-xl px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all shadow-sm appearance-none"},[t[13]||(t[13]=e("option",{value:""},"All Statuses",-1)),(i(!0),d(f,null,D(n.statuses,s=>(i(),d("option",{key:s.value,value:s.value},l(s.label),9,Oe))),128))],512),[[J,p.value]]),r(o(U),{class:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})])]),e("div",Te,[e("div",Fe,[t[15]||(t[15]=e("label",{class:"text-xs font-bold text-slate-500 block"},"Invoicing Status",-1)),r(o(he),{class:"h-3.5 w-3.5 text-slate-400 cursor-help",title:"Status penagihan Surat Jalan. 'Partial' muncul jika ada item yang belum ditagih atau tonase dikoreksi."})]),e("div",He,[M(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>w.value=s),class:"w-full bg-white dark:bg-slate-900 border-0 ring-2 ring-slate-200 dark:ring-slate-800 rounded-xl px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all shadow-sm appearance-none"},[t[16]||(t[16]=e("option",{value:""},"All Invoicing",-1)),(i(),d(f,null,D(se,s=>e("option",{key:s.value,value:s.value,title:s.description},l(s.label),9,Le)),64))],512),[[J,w.value]]),r(o(U),{class:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})])])])):v("",!0),C.value==="board"?(i(),d("div",Ne,[p.value?(i(),d("div",Je,[r(o(Z),{class:"w-4 h-4"}),t[17]||(t[17]=c(" Filter aktif: Board mungkin tidak menampilkan semua item. ",-1))])):v("",!0),r(be,{orders:n.deliveryOrders},null,8,["orders"])])):(i(),d("div",Ue,[u.value.length>0&&u.value.length===n.deliveryOrders.data.filter(s=>$(s)).length&&n.deliveryOrders.total>n.deliveryOrders.data.length?(i(),d("div",Ze,[e("div",Ge,[x.value?(i(),d("span",Re,[c(" All "+l(n.deliveryOrders.total)+" deliveries matching this filter are selected. ",1),e("button",{onClick:t[6]||(t[6]=s=>{u.value=[],x.value=!1}),class:"ml-2 underline font-bold hover:text-blue-700 dark:hover:text-blue-300"}," Clear selection ")])):(i(),d("span",Ee,[c(" All "+l(u.value.length)+" items on this page are selected. ",1),e("button",{onClick:Y,class:"ml-2 underline font-bold hover:text-blue-700 dark:hover:text-blue-300"}," Select all "+l(n.deliveryOrders.total)+" deliveries matching this filter ",1)]))])])):v("",!0),e("div",qe,[e("table",ze,[e("thead",null,[e("tr",Ke,[e("th",Qe,[e("div",Ye,[e("input",{type:"checkbox",onChange:Q,checked:x.value||u.value.length>0&&u.value.length===n.deliveryOrders.data.filter(s=>$(s)).length,class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,We),t[18]||(t[18]=e("span",null,"Nomor SJ / Pilih",-1))])]),t[19]||(t[19]=e("th",{class:"px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"SO Reference",-1)),t[20]||(t[20]=e("th",{class:"px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Customer",-1)),t[21]||(t[21]=e("th",{class:"px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Date",-1)),t[22]||(t[22]=e("th",{class:"px-4 py-2 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Items",-1)),t[23]||(t[23]=e("th",{class:"px-4 py-2 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Status",-1)),t[24]||(t[24]=e("th",{class:"px-4 py-2 text-right text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",Xe,[(i(!0),d(f,null,D(n.deliveryOrders.data,s=>(i(),d("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30 transition-colors"},[e("td",et,[e("div",tt,[M(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[7]||(t[7]=P=>u.value=P),disabled:!$(s),title:$(s)?"":"Only completed & uninvoiced DOs can be selected",onClick:t[8]||(t[8]=oe(()=>{},["stop"])),class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed"},null,8,st),[[ie,u.value]]),e("div",at,[r(o(H),{class:"h-5 w-5 text-slate-500 dark:text-slate-400"})]),e("div",null,[e("div",lt,l(s.do_number),1),e("div",rt,l(s.warehouse?.name),1)])])]),e("td",ot,[r(o(I),{href:a.route("sales.orders.show",s.sales_order_id),class:"text-blue-400 hover:underline"},{default:S(()=>[c(l(s.sales_order?.so_number),1)]),_:2},1032,["href"])]),e("td",it,[e("div",dt,l(s.shipping_name||s.sales_order?.customer?.name),1),s.shipping_name&&s.shipping_name!==s.sales_order?.customer?.name?(i(),d("div",nt,"Member: "+l(s.sales_order?.customer?.name),1)):v("",!0)]),e("td",ut,[e("span",ct,l(z(s.delivery_date)),1)]),e("td",xt,l(s.items_count),1),e("td",bt,[e("div",vt,[e("span",{class:h(["inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium cursor-help",R(s.invoice_status)]),title:q(s.invoice_status)},l(s.invoice_status),11,pt),e("span",{class:h(["inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium cursor-help",E(s.status)]),title:K(s.status)},l(s.status),11,gt)])]),e("td",mt,[e("div",ht,[e("a",{href:a.route("sales.deliveries.print",s.id),target:"_blank",class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors"},[r(o(fe),{class:"h-4 w-4"})],8,ft),r(o(I),{href:a.route("sales.deliveries.show",s.id),class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-colors"},{default:S(()=>[r(o(ke),{class:"h-4 w-4"})]),_:1},8,["href"]),s.status==="draft"||s.items_count===0?(i(),d("button",{key:0,onClick:P=>G(s.id),class:"p-2 rounded-lg text-slate-500 dark:text-slate-400 hover:text-red-500 hover:bg-red-500/10 transition-colors"},[r(o(we),{class:"h-4 w-4"})],8,kt)):v("",!0)])])]))),128)),n.deliveryOrders.data.length===0?(i(),d("tr",wt,[e("td",yt,[r(o(H),{class:"mx-auto h-12 w-12 text-slate-600"}),t[26]||(t[26]=e("h3",{class:"mt-2 text-sm font-medium text-slate-600 dark:text-slate-300"},"No delivery orders found",-1)),t[27]||(t[27]=e("p",{class:"mt-1 text-sm text-slate-500"},"Deliveries are created from Sales Orders.",-1)),e("div",_t,[r(o(I),{href:a.route("sales.orders.index"),class:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2.5 text-sm font-medium text-white dark:text-white hover:bg-blue-500 transition-colors shadow-lg shadow-blue-500/20"},{default:S(()=>[...t[25]||(t[25]=[c(" Go to Sales Orders ",-1)])]),_:1},8,["href"])])])])):v("",!0)])])]),n.deliveryOrders.last_page>1?(i(),d("div",St,[e("p",Dt," Showing "+l(n.deliveryOrders.from)+" to "+l(n.deliveryOrders.to)+" of "+l(n.deliveryOrders.total)+" deliveries ",1),e("div",Ct,[(i(!0),d(f,null,D(n.deliveryOrders.links,s=>(i(),F(o(I),{key:s.label,href:s.url||"#",class:h(["px-3 py-1.5 rounded-lg text-sm transition-colors",s.active?"bg-blue-600 text-slate-900 dark:text-white":s.url?"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 hover:text-slate-900 dark:text-white":"text-white cursor-not-allowed"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])):v("",!0)])),e("div",$t,[t[36]||(t[36]=e("div",{class:"flex items-center gap-2 mb-4 px-1"},[e("div",{class:"h-px flex-1 bg-slate-50 dark:bg-slate-800"}),e("span",{class:"text-xs font-bold text-slate-500 uppercase tracking-widest"},"Logistics & Delivery Guide"),e("div",{class:"h-px flex-1 bg-slate-50 dark:bg-slate-800"})],-1)),e("div",At,[e("div",It,[e("div",jt,[e("div",Pt,[r(o(H),{class:"h-5 w-5"})]),t[28]||(t[28]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Surat Jalan (DO)",-1))]),t[29]||(t[29]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[c(" Every delivery generates a professional "),e("strong",null,"Surat Jalan"),c(". Use the Print icon to generate the document for the driver. ")],-1))]),e("div",Bt,[e("div",Mt,[e("div",Vt,[r(o(De),{class:"h-5 w-5"})]),t[30]||(t[30]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Inventory Sync",-1))]),t[31]||(t[31]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[c(" Stock is only deducted from the warehouse once the DO is marked as "),e("strong",null,"Delivered"),c(", ensuring real-time inventory accuracy. ")],-1))]),e("div",Ot,[e("div",Tt,[e("div",Ft,[r(o(V),{class:"h-5 w-5"})]),t[32]||(t[32]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Direct Invoicing",-1))]),t[33]||(t[33]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[c(" Once a delivery is complete, you can generate a "),e("strong",null,"Sales Invoice"),c(" directly from the DO to ensure billing matches what was shipped. ")],-1))]),e("div",Ht,[e("div",Lt,[e("div",Nt,[r(o(ye),{class:"h-5 w-5"})]),t[34]||(t[34]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Proof of Delivery",-1))]),t[35]||(t[35]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[c(" Maintain "),e("strong",null,"Accountability"),c(" by tracking vehicle numbers and the personnel who prepared each shipment for delivery. ")],-1))])])]),r(de,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:S(()=>[y.value?(i(),d("div",Jt,[e("div",Ut,[e("div",{class:"fixed inset-0 bg-slate-900/75 backdrop-blur-sm transition-opacity",onClick:t[9]||(t[9]=s=>y.value=!1)}),t[40]||(t[40]=e("span",{class:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"},"â€‹",-1)),e("div",Zt,[e("div",Gt,[e("button",{onClick:t[10]||(t[10]=s=>y.value=!1),class:"rounded-xl bg-slate-100 dark:bg-slate-800 p-2 text-slate-400 hover:text-slate-500 focus:outline-none transition-all"},[r(o(_e),{class:"h-5 w-5"})])]),e("div",Et,[e("div",Rt,[e("div",qt,[r(o(V),{class:"h-8 w-8 text-indigo-500"})]),e("div",null,[t[37]||(t[37]=e("h3",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Batch Invoice Preview",-1)),e("p",zt,"Review results before processing "+l(_.value?.total_dos)+" Delivery Orders",1)])]),e("div",Kt,[e("div",Qt,[t[38]||(t[38]=e("p",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1"},"Total Invoices to Generate",-1)),e("p",Yt,l(O.value)+" Invoices",1)]),e("div",Wt,[t[39]||(t[39]=e("p",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1"},"Total Delivery Orders",-1)),e("p",Xt,l(_.value?.total_dos)+" DOs",1)])]),e("div",es,[(i(!0),d(f,null,D(_.value?.preview,(s,P)=>(i(),d("div",{key:P,class:h(["mb-4 last:mb-0 p-5 rounded-2xl border transition-all shadow-sm flex items-start gap-4",g.value.includes(s.so_id)?"bg-slate-50 dark:bg-slate-800/30 border-slate-100 dark:border-slate-800 opacity-60":"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 hover:border-indigo-500/30"])},[e("div",ts,[e("input",{type:"checkbox",checked:!g.value.includes(s.so_id),onChange:B=>W(s.so_id),class:"h-5 w-5 rounded-lg border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,40,ss)]),e("div",as,[e("div",ls,[e("div",null,[e("p",rs,[r(o(Se),{class:"h-4 w-4 text-slate-400"}),c(" "+l(s.customer_name),1)]),e("p",os,"SO: "+l(s.so_number)+" | "+l(s.do_count)+" DOs ("+l(s.do_numbers)+")",1)]),e("div",is,[e("p",ds,l(te(s.total_amount)),1),e("p",ns,"Total Qty: "+l(s.total_qty),1)])]),e("div",us,[(i(!0),d(f,null,D(s.items,(B,ae)=>(i(),d("div",{key:ae,class:"flex justify-between text-xs"},[e("span",cs,l(B.product_name),1),e("span",xs,l(B.qty)+" "+l(B.unit_name),1)]))),128))])])],2))),128))]),e("div",bs,[e("button",{onClick:t[11]||(t[11]=s=>y.value=!1),class:"px-6 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 text-sm font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all"}," Cancel "),e("button",{onClick:ee,disabled:O.value===0,class:"px-8 py-2.5 rounded-xl bg-indigo-600 text-sm font-bold text-white shadow-lg shadow-indigo-500/25 hover:bg-indigo-500 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[r(o(V),{class:"h-5 w-5"}),c(" Confirm & Process ("+l(O.value)+") ",1)],8,vs)])])])])])):v("",!0)]),_:1})]),_:1})],64))}};export{Js as default};
