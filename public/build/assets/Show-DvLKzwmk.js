import{f as j,r as P,c as i,a as o,u as r,h as V,w as u,b as e,l as m,t as l,n as y,o as d,x as k,d as g,e as x,F as v,g as _,j as D,K as L,v as S,m as B}from"./app-CKQzvzyf.js";import{_ as E}from"./AppLayout-CK2fh2JM.js";import{f as h,a as b}from"./helpers-DnzC1tLX.js";import{r as F}from"./ArrowLeftIcon-CnBxje3M.js";import{r as K}from"./DocumentTextIcon-Dex0qltP.js";import{r as N}from"./TruckIcon-BqdSAK_u.js";import{r as R}from"./PrinterIcon-cLQZiXUp.js";import{r as T}from"./CheckCircleIcon-BObHF1cH.js";import{r as q}from"./PencilSquareIcon-CK41VVQL.js";import{r as A}from"./CheckIcon-D04er_RB.js";import{r as M}from"./XMarkIcon-B2KJaphs.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SunIcon-dsrw8a58.js";import"./WrenchScrewdriverIcon-Dr4pPQtT.js";import"./DocumentPlusIcon-CNFF2MCw.js";import"./ShoppingCartIcon-B7yQfjtQ.js";import"./MapPinIcon-jVm1FI58.js";import"./SparklesIcon-DHNBQV1A.js";import"./CubeIcon-DADqMiG3.js";import"./ClockIcon-WdBsPvPQ.js";import"./ShieldCheckIcon-D39uRVh3.js";const U={class:"space-y-6"},z={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},G={class:"flex items-center gap-4"},Q={class:"text-2xl font-bold text-slate-900 dark:text-white"},W={class:"flex items-center gap-3 mt-1 text-sm"},H={class:"text-slate-500"},J={class:"flex items-center gap-3"},X={href:"#",class:"flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-800 px-4 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-700 transition-colors"},Y={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Z={class:"lg:col-span-2 space-y-6"},ee={class:"rounded-2xl glass-card overflow-hidden"},te={class:"overflow-x-auto"},se={class:"w-full text-left text-sm text-slate-500 dark:text-slate-400"},ae={class:"divide-y divide-slate-100 dark:divide-slate-800"},re={class:"px-6 py-4"},le={class:"font-medium text-slate-900 dark:text-white"},de={class:"text-xs text-slate-500 font-mono"},oe={class:"px-6 py-4 text-right"},ne={class:"px-6 py-4 text-center font-bold text-slate-900 dark:text-white min-w-[200px]"},ie={key:0,class:"flex flex-col gap-2"},ce={class:"flex items-center gap-2 justify-center"},xe=["onKeyup"],ue={class:"flex items-center gap-1"},me=["onClick"],ge={key:0,class:"text-[9px] text-red-500 font-bold uppercase"},pe={key:1,class:"flex items-center justify-center gap-2 group"},he=["onClick"],be={class:"px-6 py-4 text-center text-emerald-400 font-medium"},fe={class:"px-6 py-4 text-center text-amber-500 font-medium"},ye={class:"px-6 py-4 text-center text-indigo-400 font-medium"},ke={class:"px-6 py-4 text-center text-red-400 font-medium"},ve={class:"px-6 py-4 text-center"},_e={class:"px-6 py-4 text-right font-medium text-slate-900 dark:text-white"},we={class:"bg-white dark:bg-slate-950 font-medium"},Oe={class:"px-6 py-4 text-right text-slate-900 dark:text-white"},De={key:0},Se={colspan:"7",class:"px-6 py-4 text-right text-slate-500 dark:text-slate-400"},qe={class:"px-6 py-4 text-right text-slate-900 dark:text-white"},Ce={class:"px-6 py-4 text-right text-slate-900 dark:text-white text-lg font-bold"},Ie={class:"space-y-6"},$e={class:"rounded-2xl glass-card p-6 space-y-6"},je={class:"space-y-2"},Pe={class:"text-slate-900 dark:text-white font-bold text-base"},Ve={class:"flex items-start gap-2 text-sm text-slate-500 dark:text-slate-400"},Le={class:"leading-relaxed"},Be={class:"flex items-center gap-2 text-sm text-slate-500 pt-1"},Ee={class:"font-medium"},Fe={class:"border-t border-slate-200 dark:border-slate-800 pt-6"},Ke={class:"space-y-2"},Ne={class:"text-emerald-400 font-bold text-base"},Re={class:"flex items-start gap-2 text-sm text-slate-600 dark:text-slate-300"},Te={class:"leading-relaxed"},Ae={key:0,class:"text-[10px] font-bold text-slate-600 uppercase italic pt-1"},Me={class:"rounded-2xl glass-card p-6"},Ue={class:"space-y-4"},ze={class:"text-sm text-slate-900 dark:text-white font-medium"},Ge={class:"text-sm text-slate-900 dark:text-white"},Qe={class:"text-sm text-slate-900 dark:text-white"},We={key:0,class:"rounded-2xl glass-card p-6"},He={class:"space-y-3"},Je={class:"flex flex-col"},Xe={class:"text-[10px] text-slate-500"},Ye={class:"text-right"},Ze={key:1,class:"rounded-2xl glass-card p-6"},et={class:"space-y-3"},tt={class:"flex flex-col"},st={class:"text-[10px] text-slate-500"},at={class:"text-right"},rt={class:"text-sm font-medium text-slate-900 dark:text-white"},qt={__name:"Show",props:{salesOrder:Object},setup(a){const f=B(null),c=j({qty:0,reason:""}),C=n=>{f.value=n.id,c.qty=parseFloat(n.qty)||0,c.reason=""},I=()=>{f.value=null},w=n=>{c.put(route("sales.orders.update-item-qty",n),{preserveScroll:!0,onSuccess:()=>{f.value=null}})},$=n=>({draft:"bg-slate-500/10 text-slate-500 dark:text-slate-400 ring-slate-500/20",confirmed:"bg-blue-500/10 text-blue-400 ring-blue-500/20",processing:"bg-amber-500/10 text-amber-400 ring-amber-500/20",shipped:"bg-purple-500/10 text-purple-400 ring-purple-500/20",delivered:"bg-emerald-500/10 text-emerald-400 ring-emerald-500/20",cancelled:"bg-red-500/10 text-red-400 ring-red-500/20"})[n]||"bg-slate-500/10 text-slate-500 dark:text-slate-400 ring-slate-500/20";return(n,s)=>{const O=P("MapPinIcon");return d(),i(v,null,[o(r(V),{title:`SO ${a.salesOrder.so_number}`},null,8,["title"]),o(E,{title:"Sales Order Details"},{default:u(()=>[e("div",U,[e("div",z,[e("div",G,[o(r(m),{href:n.route("sales.orders.index"),class:"p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white transition-colors"},{default:u(()=>[o(r(F),{class:"h-5 w-5"})]),_:1},8,["href"]),e("div",null,[e("h1",Q,l(a.salesOrder.so_number),1),e("div",W,[e("span",{class:y(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset uppercase tracking-wider",$(a.salesOrder.status)])},l(a.salesOrder.status),3),e("span",H," Created on "+l(new Date(a.salesOrder.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})),1)])])]),e("div",J,[["confirmed","processing","shipped","delivered"].includes(a.salesOrder.status)&&a.salesOrder.payment_status!=="paid"?(d(),k(r(m),{key:0,href:n.route("sales.orders.create-invoice",a.salesOrder.id),method:"post",as:"button",class:"flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-800 px-4 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-700 transition-colors"},{default:u(()=>[o(r(K),{class:"h-4 w-4 text-indigo-400"}),s[2]||(s[2]=g(" Create Invoice (All Delivered) ",-1))]),_:1},8,["href"])):x("",!0),["confirmed","processing","partial"].includes(a.salesOrder.status)?(d(),k(r(m),{key:1,href:n.route("sales.deliveries.create",{sales_order_id:a.salesOrder.id}),class:"flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2.5 text-sm font-medium text-slate-900 dark:text-white hover:bg-emerald-500 transition-colors shadow-lg shadow-emerald-500/20"},{default:u(()=>[o(r(N),{class:"h-4 w-4"}),s[3]||(s[3]=g(" Delivery ",-1))]),_:1},8,["href"])):x("",!0),e("a",X,[o(r(R),{class:"h-4 w-4"}),s[4]||(s[4]=g(" Print ",-1))]),a.salesOrder.status==="draft"?(d(),k(r(m),{key:2,href:n.route("sales.orders.confirm",a.salesOrder.id),method:"post",as:"button",class:"flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2.5 text-sm font-medium text-slate-900 dark:text-white hover:bg-emerald-500 transition-colors shadow-lg shadow-emerald-500/20"},{default:u(()=>[o(r(T),{class:"h-4 w-4"}),s[5]||(s[5]=g(" Confirm Order ",-1))]),_:1},8,["href"])):x("",!0),a.salesOrder.status==="draft"?(d(),k(r(m),{key:3,href:n.route("sales.orders.edit",a.salesOrder.id),class:"flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2.5 text-sm font-medium text-white dark:text-white hover:bg-blue-500 transition-colors shadow-lg shadow-blue-500/20"},{default:u(()=>[o(r(q),{class:"h-4 w-4"}),s[6]||(s[6]=g(" Edit Order ",-1))]),_:1},8,["href"])):x("",!0)])]),e("div",Y,[e("div",Z,[e("div",ee,[s[10]||(s[10]=e("div",{class:"p-6 border-b border-slate-200 dark:border-slate-800"},[e("h3",{class:"text-lg font-bold text-slate-900 dark:text-white"},"Order Items")],-1)),e("div",te,[e("table",se,[s[9]||(s[9]=e("thead",{class:"bg-white dark:bg-slate-950 text-slate-200 font-medium"},[e("tr",null,[e("th",{class:"px-6 py-4"},"Product"),e("th",{class:"px-6 py-4 text-right"},"Price"),e("th",{class:"px-6 py-4 text-center"},"Ordered"),e("th",{class:"px-6 py-4 text-center"},"Delivered"),e("th",{class:"px-6 py-4 text-center"},"Reserved"),e("th",{class:"px-6 py-4 text-center"},"Invoiced"),e("th",{class:"px-6 py-4 text-center"},"Returned"),e("th",{class:"px-6 py-4 text-center"},"Remaining"),e("th",{class:"px-6 py-4 text-right"},"Total")])],-1)),e("tbody",ae,[(d(!0),i(v,null,_(a.salesOrder.items,t=>(d(),i("tr",{key:t.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-900 dark:bg-slate-800/50"},[e("td",re,[e("div",le,l(t.product?.name||"Unknown Item"),1),e("div",de,l(t.product?.sku||"#"+t.product_id),1)]),e("td",oe,l(r(h)(t.unit_price)),1),e("td",ne,[f.value===t.id?(d(),i("div",ie,[e("div",ce,[D(e("input",{"onUpdate:modelValue":s[0]||(s[0]=p=>r(c).qty=p),type:"number",step:"any",class:"w-20 rounded-lg border-0 bg-slate-50 dark:bg-slate-800 text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50 py-1 font-bold text-center",onKeyup:L(p=>w(t.id),["enter"])},null,40,xe),[[S,r(c).qty]]),e("div",ue,[e("button",{onClick:p=>w(t.id),class:"p-1.5 rounded-lg bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500/20 transition-colors",title:"Save"},[o(r(A),{class:"h-4 w-4"})],8,me),e("button",{onClick:I,class:"p-1.5 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",title:"Cancel"},[o(r(M),{class:"h-4 w-4"})])])]),D(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>r(c).reason=p),type:"text",placeholder:"Alasan koreksi...",class:"w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-800 text-[10px] text-slate-500 dark:text-slate-400 focus:ring-1 focus:ring-blue-500/50 py-1 italic",required:""},null,512),[[S,r(c).reason]]),r(c).errors.qty?(d(),i("div",ge,l(r(c).errors.qty),1)):x("",!0)])):(d(),i("div",pe,[e("span",null,l(r(b)(t.qty))+" "+l(t.unit?.code),1),e("button",{onClick:p=>C(t),class:"p-1 rounded-md text-blue-500 bg-blue-500/5 hover:bg-blue-500/10 transition-all",title:"Koreksi Qty"},[o(r(q),{class:"h-4 w-4"})],8,he)]))]),e("td",be,l(r(b)(t.qty_delivered)),1),e("td",fe,l(r(b)(t.reserved_qty||0)),1),e("td",ye,l(r(b)(t.qty_invoiced||0)),1),e("td",ke,l(r(b)(t.qty_returned||0)),1),e("td",ve,[e("span",{class:y(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",t.remaining_qty>0?"bg-amber-500/10 text-amber-500":"bg-slate-50 dark:bg-slate-800 text-slate-500"])},l(r(b)(t.remaining_qty)),3)]),e("td",_e,l(r(h)(t.subtotal)),1)]))),128))]),e("tfoot",we,[e("tr",null,[s[7]||(s[7]=e("td",{colspan:"7",class:"px-6 py-4 text-right text-slate-500 dark:text-slate-400"}," Subtotal ",-1)),e("td",Oe,l(r(h)(a.salesOrder.subtotal)),1)]),a.salesOrder.tax_amount>0?(d(),i("tr",De,[e("td",Se," VAT ("+l(a.salesOrder.tax_percent)+"%) ",1),e("td",qe,l(r(h)(a.salesOrder.tax_amount)),1)])):x("",!0),e("tr",null,[s[8]||(s[8]=e("td",{colspan:"7",class:"px-6 py-4 text-right text-slate-900 dark:text-white text-lg font-bold"}," Grand Total ",-1)),e("td",Ce,l(r(h)(a.salesOrder.total)),1)])])])])])]),e("div",Ie,[e("div",$e,[e("div",null,[s[12]||(s[12]=e("h3",{class:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] mb-4"},"Sold-to Party (Buyer)",-1)),e("div",je,[e("div",Pe,l(a.salesOrder.customer.name),1),e("div",Ve,[o(O,{class:"h-4 w-4 mt-0.5 shrink-0"}),e("p",Le,l(a.salesOrder.customer.full_address),1)]),e("div",Be,[e("span",Ee,l(a.salesOrder.customer.phone),1),s[11]||(s[11]=e("span",{class:"h-1 w-1 rounded-full bg-slate-700"},null,-1)),e("span",null,l(a.salesOrder.customer.email),1)])])]),e("div",Fe,[s[13]||(s[13]=e("h3",{class:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] mb-4"},"Ship-to Party (Delivery)",-1)),e("div",Ke,[e("div",Ne,l(a.salesOrder.shipping_name||a.salesOrder.customer.name),1),e("div",Re,[o(O,{class:"h-4 w-4 mt-0.5 shrink-0 text-emerald-500/50"}),e("p",Te,l(a.salesOrder.shipping_address||a.salesOrder.customer.full_address),1)]),!a.salesOrder.shipping_name&&!a.salesOrder.shipping_address?(d(),i("div",Ae," Same as Sold-to Party ")):x("",!0)])])]),e("div",Me,[s[17]||(s[17]=e("h3",{class:"text-sm font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-4"},"Order Details",-1)),e("dl",Ue,[e("div",null,[s[14]||(s[14]=e("dt",{class:"text-xs text-slate-500"},"Warehouse",-1)),e("dd",ze,l(a.salesOrder.warehouse.name),1)]),e("div",null,[s[15]||(s[15]=e("dt",{class:"text-xs text-slate-500"},"Order Date",-1)),e("dd",Ge,l(new Date(a.salesOrder.order_date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})),1)]),e("div",null,[s[16]||(s[16]=e("dt",{class:"text-xs text-slate-500"},"Expected Delivery",-1)),e("dd",Qe,l(new Date(a.salesOrder.delivery_date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})),1)])])]),a.salesOrder.delivery_orders&&a.salesOrder.delivery_orders.length>0?(d(),i("div",We,[s[18]||(s[18]=e("h3",{class:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] mb-4"},"Related Deliveries",-1)),e("div",He,[(d(!0),i(v,null,_(a.salesOrder.delivery_orders,t=>(d(),i("div",{key:t.id,class:"flex items-center justify-between p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700"},[e("div",Je,[o(r(m),{href:n.route("sales.deliveries.show",t.id),class:"text-sm font-bold text-emerald-600 dark:text-emerald-400 hover:underline"},{default:u(()=>[g(l(t.do_number),1)]),_:2},1032,["href"]),e("span",Xe,l(new Date(t.delivery_date).toLocaleDateString("id-ID")),1)]),e("div",Ye,[e("span",{class:y(["inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium uppercase tracking-wider",{"bg-slate-100 text-slate-800":t.status==="draft","bg-amber-100 text-amber-800":t.status==="picking","bg-blue-100 text-blue-800":t.status==="packed"||t.status==="shipped","bg-teal-100 text-teal-800":t.status==="delivered","bg-emerald-100 text-emerald-800":t.status==="completed","bg-red-100 text-red-800":t.status==="cancelled"}])},l(t.status),3)])]))),128))])])):x("",!0),a.salesOrder.invoices&&a.salesOrder.invoices.length>0?(d(),i("div",Ze,[s[19]||(s[19]=e("h3",{class:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] mb-4"},"Related Invoices",-1)),e("div",et,[(d(!0),i(v,null,_(a.salesOrder.invoices,t=>(d(),i("div",{key:t.id,class:"flex items-center justify-between p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700"},[e("div",tt,[o(r(m),{href:n.route("sales.invoices.show",t.id),class:"text-sm font-bold text-indigo-600 dark:text-indigo-400 hover:underline"},{default:u(()=>[g(l(t.invoice_number),1)]),_:2},1032,["href"]),e("span",st,l(new Date(t.invoice_date).toLocaleDateString("id-ID")),1)]),e("div",at,[e("div",rt,l(r(h)(t.total)),1),e("span",{class:y(["inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium",{"bg-slate-100 text-slate-800":t.status==="draft","bg-blue-100 text-blue-800":t.status==="issued"||t.status==="sent","bg-emerald-100 text-emerald-800":t.status==="paid","bg-amber-100 text-amber-800":t.status==="partial"}])},l(t.status),3)])]))),128))])])):x("",!0)])])])]),_:1})],64)}}};export{qt as default};
