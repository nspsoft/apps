import{r as k,a as j,w as D,c,b as n,u as o,h as J,d as S,e,f as $,v as X,n as g,j as a,T as M,o as i,F as C,g as A,t as r,i as Q,k as R,m as Y,l as Z}from"./app-Z6tOaYz2.js";import{_ as ee}from"./AppLayout-DzavhNxD.js";import{_ as te}from"./Pagination-B-np-BTj.js";import{d as se}from"./debounce-Ir-oG-Bn.js";import{f as p}from"./helpers-BjqMQcOq.js";import{r as ae}from"./MagnifyingGlassIcon-BNZQq0Dl.js";import{r as U}from"./FunnelIcon-DOkMZjhR.js";import{r as re}from"./QuestionMarkCircleIcon-Drr9lKIU.js";import{r as I}from"./CubeIcon-CrMVk51M.js";import{r as le}from"./ExclamationTriangleIcon-COJUBmxg.js";import{r as oe}from"./ShoppingCartIcon-CLsYFPjD.js";/* empty css            */import"./XMarkIcon-Cx1kkgTP.js";import"./SunIcon-CRBUerBO.js";import"./WrenchScrewdriverIcon-CveU2ZwK.js";import"./CheckBadgeIcon-B5KitPN2.js";import"./TruckIcon-Dj-pJi3f.js";const de={class:"space-y-6"},ne={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},ie={class:"flex items-center gap-3 flex-1"},ue={class:"relative max-w-sm w-full"},ce={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},xe={key:0,class:"rounded-2xl glass-card p-4"},pe={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},be=["value"],ge=["value"],me={class:"rounded-2xl glass-card overflow-hidden"},fe={class:"overflow-x-auto overflow-y-auto max-h-[600px]"},he={class:"w-full text-left text-sm text-slate-500 dark:text-slate-400"},ve={class:"bg-white dark:bg-slate-950 text-slate-200 font-medium border-b border-slate-200 dark:border-slate-800"},ye={class:"pl-6 pr-3 py-4 w-10"},ke=["checked"],_e={class:"px-4 py-3 text-center"},we={class:"flex items-center justify-center gap-2"},Se={class:"group relative cursor-help"},Ce={class:"divide-y divide-slate-100 dark:divide-slate-800"},Re={key:0},qe={class:"pl-6 pr-3 py-4"},Fe=["checked","onChange"],Oe={class:"px-4 py-2"},$e={class:"flex items-center gap-3"},Ae={class:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-slate-50 dark:bg-slate-800"},Te={class:"font-medium text-slate-900 dark:text-white"},Pe={class:"text-xs text-slate-500 font-mono"},Ne={class:"px-4 py-2"},je={class:"inline-flex rounded-full bg-slate-50 dark:bg-slate-800 px-2 text-xs font-semibold leading-5 text-slate-600 dark:text-slate-300"},Me={class:"px-4 py-2"},Qe={class:"px-4 py-2 text-slate-900 dark:text-white"},Ue={key:0,class:"ml-1 text-xs text-slate-500 font-mono"},Ie={class:"px-4 py-2 text-right text-xs text-slate-500 dark:text-slate-400 font-mono"},Be={class:"px-4 py-2 text-center"},Le={class:"px-4 py-2 text-right font-medium text-blue-400"},Ve={class:"px-4 py-2 text-right text-slate-500 dark:text-slate-400"},We={class:"border-t border-slate-200 dark:border-slate-800 px-6 py-4"},Ee={class:"mt-12"},Ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},He={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},Ke={class:"flex items-center gap-3 mb-3"},ze={class:"p-2.5 rounded-xl bg-blue-500/10 text-blue-400"},De={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},Je={class:"flex items-center gap-3 mb-3"},Xe={class:"p-2.5 rounded-xl bg-amber-500/10 text-amber-400"},Ye={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},Ze={class:"flex items-center gap-3 mb-3"},et={class:"p-2.5 rounded-xl bg-emerald-500/10 text-emerald-400"},tt={class:"bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700/50 rounded-2xl p-5 shadow-sm hover:border-slate-600 transition-colors"},st={class:"flex items-center gap-3 mb-3"},at={class:"p-2.5 rounded-xl bg-purple-500/10 text-purple-400"},rt={key:0,class:"fixed bottom-6 right-6 left-6 md:left-auto md:w-96 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-2xl shadow-black/50 p-4 z-50"},lt={class:"flex items-center justify-between gap-4"},ot={class:"flex items-center gap-3"},dt={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-blue-500/20 text-blue-400 font-bold"},nt={class:"text-sm"},Rt={__name:"Index",props:{stocks:Object,warehouses:Array,categories:Array,filters:Object},setup(b){const f=b,h=k(f.filters.search||""),v=k(f.filters.warehouse_id||""),y=k(f.filters.category||""),_=k(!1),B=se(()=>{j.get("/inventory/stocks",{search:h.value||void 0,warehouse_id:v.value||void 0,category:y.value||void 0},{preserveState:!0,replace:!0})},300);D([h,v,y],B);const L=()=>{h.value="",v.value="",y.value=""},V=l=>({raw_material:"bg-amber-500/10 text-amber-400 ring-amber-500/20",wip:"bg-blue-500/10 text-blue-400 ring-blue-500/20",finished_good:"bg-emerald-500/10 text-emerald-400 ring-emerald-500/20",spare_part:"bg-purple-500/10 text-purple-400 ring-purple-500/20"})[l]||"bg-slate-500/10 text-slate-500 dark:text-slate-400 ring-slate-500/20",W=l=>({raw_material:"Raw Material",wip:"WIP",finished_good:"Finished Good",spare_part:"Spare Part"})[l]||l,x=l=>{const t=l.product,s=parseFloat(l.qty_on_hand||0),m=parseFloat(l.qty_reserved||0),K=parseFloat(l.on_order_qty||0),q=s-m,F=q+K,O=parseFloat(t.min_stock||0),w=parseFloat(t.max_stock||0),T=parseFloat(t.reorder_point||0),P=parseFloat(t.reorder_qty||0),N=()=>{let u=0;if(P>0?u=P:w>0?u=w-F:u=O*2-F,w>0){const z=w-F;u=Math.min(u,z)}return Math.max(0,u)};if(q<=O&&O>0){const u=N();return{label:`URGENT: Reorder ${p(u)}`,class:"bg-red-500/10 text-red-500 ring-red-500/20 hover:bg-red-500 hover:text-slate-900 dark:text-white cursor-pointer",textClass:"text-red-500 font-bold",isCritical:!0,reorderQty:u}}if(q<=T&&T>0){const u=N();return{label:`Reorder ${p(u)}`,class:"bg-amber-500/10 text-amber-500 ring-amber-500/20 hover:bg-amber-500 hover:text-slate-900 dark:text-white cursor-pointer",textClass:"text-amber-500 font-bold",isLow:!0,reorderQty:u}}return{label:"Stock OK",class:"bg-emerald-500/10 text-emerald-500 ring-emerald-500/20",textClass:"text-emerald-500 font-medium",isSafe:!0,reorderQty:0}},d=k([]),E=l=>{const t=d.value.findIndex(s=>s.id===l.id);t===-1?d.value.push(l):d.value.splice(t,1)},G=()=>{d.value.length===f.stocks.data.length?d.value=[]:d.value=[...f.stocks.data]},H=()=>{if(d.value.length===0)return;const l=new URLSearchParams;d.value.forEach(t=>{const s=x(t).reorderQty>0?x(t).reorderQty:1;l.append("products[]",t.product.id),l.append("qtys[]",s)}),j.get(`/purchasing/requests/create?${l.toString()}`)};return(l,t)=>(i(),c(C,null,[n(o(J),{title:"Current Stock"}),n(ee,{title:"Current Stock"},{default:S(()=>[e("div",de,[e("div",ne,[e("div",ie,[e("div",ue,[e("div",ce,[n(o(ae),{class:"h-5 w-5 text-slate-500 dark:text-slate-400"})]),$(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>h.value=s),type:"text",class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 pl-10 pr-4 text-slate-900 dark:text-white placeholder:text-slate-500 focus:ring-2 focus:ring-blue-500/50",placeholder:"Search SKU or Product Name..."},null,512),[[X,h.value]])]),e("button",{onClick:t[1]||(t[1]=s=>_.value=!_.value),class:g(["flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-800 px-4 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-700 transition-colors",{"ring-2 ring-blue-500/50":_.value}])},[n(o(U),{class:"h-5 w-5"}),t[5]||(t[5]=a(" Filters ",-1))],2)])]),n(M,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:S(()=>[_.value?(i(),c("div",xe,[e("div",pe,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2"},"Warehouse",-1)),$(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s),class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 px-4 text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50"},[t[6]||(t[6]=e("option",{value:""},"All Warehouses",-1)),(i(!0),c(C,null,A(b.warehouses,s=>(i(),c("option",{key:s.id,value:s.id},r(s.name)+" "+r(s.type&&s.type!=="warehouse"?`(${s.type.charAt(0).toUpperCase()+s.type.slice(1)})`:""),9,be))),128))],512),[[Q,v.value]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2"},"Category",-1)),$(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>y.value=s),class:"block w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 px-4 text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50"},[t[8]||(t[8]=e("option",{value:""},"All Categories",-1)),(i(!0),c(C,null,A(b.categories,s=>(i(),c("option",{key:s.id,value:s.id},r(s.name),9,ge))),128))],512),[[Q,y.value]])]),e("div",{class:"flex items-end"},[e("button",{onClick:L,class:"w-full rounded-xl bg-slate-50 dark:bg-slate-800 px-4 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-700 transition-colors"}," Clear Filters ")])])])):R("",!0)]),_:1}),e("div",me,[e("div",fe,[e("table",he,[e("thead",ve,[e("tr",null,[e("th",ye,[e("input",{type:"checkbox",checked:d.value.length===b.stocks.data.length&&b.stocks.data.length>0,onChange:G,class:"rounded border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-blue-600 focus:ring-blue-500/50"},null,40,ke)]),t[12]||(t[12]=e("th",{class:"px-4 py-3"},"Product Info",-1)),t[13]||(t[13]=e("th",{class:"px-4 py-3"},"Category",-1)),t[14]||(t[14]=e("th",{class:"px-4 py-3"},"Type",-1)),t[15]||(t[15]=e("th",{class:"px-4 py-3"},"Warehouse",-1)),t[16]||(t[16]=e("th",{class:"px-4 py-3 text-right"},"Levels (Min / Reorder / Max)",-1)),e("th",_e,[e("div",we,[t[11]||(t[11]=a(" Action / Recommendation ",-1)),e("div",Se,[n(o(re),{class:"h-4 w-4 text-slate-500 hover:text-blue-400 transition-colors"}),t[10]||(t[10]=e("div",{class:"absolute top-full right-0 mt-2 w-64 p-3 rounded-lg bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-xl opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 text-left"},[e("p",{class:"text-xs text-slate-900 dark:text-white"},[e("span",{class:"font-bold block mb-1"},"Rekomendasi Tindakan"),a(" Sistem memberikan saran berdasarkan level stok saat ini. "),e("br"),e("br"),a(" • "),e("b",null,"URGENT"),a(": Stok di bawah batas minimun! Segera pesan. "),e("br"),a(" • "),e("b",null,"Reorder"),a(": Stok mencapai titik pesan ulang. Siapkan PO. "),e("br"),a(" • "),e("b",null,"Stock OK"),a(": Stok masih aman. ")]),e("div",{class:"absolute top-0 right-4 -translate-y-1/2 rotate-45 w-2 h-2 bg-slate-50 dark:bg-slate-800 border-l border-t border-slate-200 dark:border-slate-700"})],-1))])])]),t[17]||(t[17]=e("th",{class:"px-4 py-3 text-right text-blue-400"},"On Order",-1)),t[18]||(t[18]=e("th",{class:"px-4 py-3 text-right"},"Qty On Hand",-1)),t[19]||(t[19]=e("th",{class:"px-4 py-3 text-right"},"Reserved",-1)),t[20]||(t[20]=e("th",{class:"px-4 py-3 text-right"},"Available",-1))])]),e("tbody",Ce,[b.stocks.data.length===0?(i(),c("tr",Re,[...t[21]||(t[21]=[e("td",{colspan:"10",class:"px-6 py-8 text-center text-slate-500"}," No stock records found. ",-1)])])):R("",!0),(i(!0),c(C,null,A(b.stocks.data,s=>(i(),c("tr",{key:s.id,class:g(["transition-colors",d.value.find(m=>m.id===s.id)?"bg-blue-500/10 hover:bg-blue-500/20":"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-900 dark:bg-slate-800/50"])},[e("td",qe,[e("input",{type:"checkbox",checked:!!d.value.find(m=>m.id===s.id),onChange:m=>E(s),class:"rounded border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 text-blue-600 focus:ring-blue-500/50"},null,40,Fe)]),e("td",Oe,[e("div",$e,[e("div",Ae,[n(o(I),{class:"h-5 w-5 text-slate-500 dark:text-slate-400"})]),e("div",null,[e("div",Te,r(s.product.name),1),e("div",Pe,r(s.product.sku),1)])])]),e("td",Ne,[e("span",je,r(s.product.category?.name||"-"),1)]),e("td",Me,[e("span",{class:g(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset",V(s.product.product_type)])},r(W(s.product.product_type)),3)]),e("td",Qe,[a(r(s.warehouse.name)+" ",1),s.warehouse.type&&s.warehouse.type!=="warehouse"?(i(),c("span",Ue," ("+r(s.warehouse.type)+") ",1)):R("",!0)]),e("td",Ie,r(o(p)(s.product.min_stock||0))+" / "+r(o(p)(s.product.reorder_point||0))+" / "+r(o(p)(s.product.max_stock||0)),1),e("td",Be,[x(s).reorderQty>0?(i(),Y(o(Z),{key:0,href:`/purchasing/requests/create?product_id=${s.product.id}&qty=${x(s).reorderQty}`,class:g(["inline-flex items-center rounded-md px-2 py-1 text-xs font-bold ring-1 ring-inset uppercase tracking-wider whitespace-nowrap",x(s).class])},{default:S(()=>[a(r(x(s).label),1)]),_:2},1032,["href","class"])):(i(),c("span",{key:1,class:g(["inline-flex items-center rounded-md px-2 py-1 text-xs font-bold ring-1 ring-inset uppercase tracking-wider whitespace-nowrap",x(s).class])},r(x(s).label),3))]),e("td",Le,r(o(p)(s.on_order_qty)),1),e("td",{class:g(["px-4 py-2 text-right font-medium text-slate-900 dark:text-white transition-colors",{"text-red-500 font-bold":x(s).isCritical,"text-amber-500":x(s).isLow}])},r(o(p)(s.qty_on_hand)),3),e("td",Ve,r(o(p)(s.qty_reserved)),1),e("td",{class:g(["px-4 py-2 text-right font-bold transition-colors",x(s).textClass])},r(o(p)(s.qty_on_hand-s.qty_reserved)),3)],2))),128))])])]),e("div",We,[n(te,{links:b.stocks.links},null,8,["links"])])])]),e("div",Ee,[t[30]||(t[30]=e("div",{class:"flex items-center gap-2 mb-4 px-1"},[e("div",{class:"h-px flex-1 bg-slate-50 dark:bg-slate-800"}),e("span",{class:"text-xs font-bold text-slate-500 uppercase tracking-widest"},"Inventory Intelligence Guide"),e("div",{class:"h-px flex-1 bg-slate-50 dark:bg-slate-800"})],-1)),e("div",Ge,[e("div",He,[e("div",Ke,[e("div",ze,[n(o(U),{class:"h-5 w-5"})]),t[22]||(t[22]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Stock Tracking",-1))]),t[23]||(t[23]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[a(" Filter stocks by "),e("strong",null,"Warehouse"),a(" or "),e("strong",null,"Category"),a(' to locate items quickly. Monitor "On Order" vs "Available" for accurate planning. ')],-1))]),e("div",De,[e("div",Je,[e("div",Xe,[n(o(le),{class:"h-5 w-5"})]),t[24]||(t[24]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Level Indicators",-1))]),t[25]||(t[25]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[e("span",{class:"text-red-400 font-bold"},"URGENT"),a(": Below Min Stock."),e("br"),e("span",{class:"text-amber-500 font-bold"},"Reorder"),a(": Hit Reorder Point."),e("br"),e("span",{class:"text-emerald-500 font-bold"},"OK"),a(": Safe levels. ")],-1))]),e("div",Ye,[e("div",Ze,[e("div",et,[n(o(oe),{class:"h-5 w-5"})]),t[26]||(t[26]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Bulk Reorder",-1))]),t[27]||(t[27]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[a(" Select multiple items using the checkboxes and click "),e("strong",null,"Create Request"),a(" to generate a Purchase Request instantly. ")],-1))]),e("div",tt,[e("div",st,[e("div",at,[n(o(I),{class:"h-5 w-5"})]),t[28]||(t[28]=e("h4",{class:"font-bold text-slate-200 text-sm"},"Availability",-1))]),t[29]||(t[29]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed"},[e("strong",null,"Available = On Hand - Reserved"),a("."),e("br"),a(' Always check "Available" stock before committing to new Sales Orders to avoid shortages. ')],-1))])])]),n(M,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-full opacity-0 sm:translate-y-0 sm:translate-x-full","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0 translate-y-full"},{default:S(()=>[d.value.length>0?(i(),c("div",rt,[e("div",lt,[e("div",ot,[e("div",dt,r(d.value.length),1),e("div",nt,[t[31]||(t[31]=e("p",{class:"font-medium text-slate-900 dark:text-white"},"Items Selected",-1)),e("button",{onClick:t[4]||(t[4]=s=>d.value=[]),class:"text-xs text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white hover:underline"},"Clear selection")])]),e("button",{onClick:H,class:"flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-500 shadow-lg shadow-blue-900/20"}," Create Request ")])])):R("",!0)]),_:1})]),_:1})],64))}};export{Rt as default};
