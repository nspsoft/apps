import{c as n,b as t,o as d,m as k,f as j,q as N,s as $,a as o,u as a,h as B,w as p,d as h,j as v,k as T,v as V,F as w,g as A,t as i,n as y,e as _,x as E,l as H,i as P}from"./app-BDCSmORV.js";import{e as U,_ as R}from"./AppLayout-D-MN9Clt.js";import{d as G}from"./debounce-CDPtFsCk.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as q}from"./ArrowUpTrayIcon-SQRBv09T.js";import{r as C}from"./ClockIcon-BiKs3xgx.js";import{r as K}from"./ArrowRightOnRectangleIcon-DzJfnlFd.js";import{r as J}from"./CalendarIcon-CoJNgje0.js";import{r as Q}from"./CheckCircleIcon-pchilZdj.js";import{r as W}from"./ExclamationCircleIcon-DohoY42p.js";import{r as X}from"./MagnifyingGlassIcon-r3Oq-h5I.js";import{S as Z,h as D}from"./transition-_fwserXi.js";import{Y as tt,G as et,V as st}from"./dialog-CEqIynLM.js";import{r as at}from"./XMarkIcon-CqC2ginv.js";import{r as ot}from"./DocumentArrowDownIcon-DAWVAHn8.js";/* empty css            */import"./SunIcon-DIO3ajW4.js";import"./WrenchScrewdriverIcon-Bcgjqimb.js";import"./DocumentPlusIcon-CeAHff71.js";import"./TruckIcon-KSIW3uKV.js";import"./DocumentTextIcon-D13MK6Zf.js";import"./ShoppingCartIcon-C570p5_n.js";import"./MapPinIcon-Bn_n6hkH.js";import"./SparklesIcon-CPtneXCC.js";import"./CubeIcon-D4nQSbpl.js";import"./ShieldCheckIcon-BLDjUQQt.js";function rt(m,u){return d(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"})])}const lt={class:"max-w-full px-4 sm:px-6 lg:px-8 mx-auto"},dt={class:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8"},it={class:"flex items-center gap-3"},nt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},ct={class:"lg:col-span-2 bg-indigo-50 dark:bg-gradient-to-br dark:from-indigo-600/20 dark:to-purple-600/10 border border-indigo-100 dark:border-indigo-500/20 rounded-[2.5rem] p-8 relative overflow-hidden group transition-colors"},pt={class:"absolute top-0 right-0 p-8 opacity-5 group-hover:opacity-10 transition-opacity"},xt={class:"relative z-10"},mt={class:"flex flex-col sm:flex-row items-end gap-4 max-w-xl"},ut={class:"flex-1 w-full space-y-2"},bt=["disabled"],ft={class:"glass-card rounded-[2.5rem] p-8"},gt={class:"flex items-center justify-between mb-6"},kt={class:"space-y-6"},ht={class:"flex items-center justify-between"},vt={class:"flex items-center gap-3"},wt={class:"p-2 rounded-xl bg-emerald-500/10 text-emerald-600 dark:text-emerald-400"},yt={class:"flex items-center justify-between"},_t={class:"flex items-center gap-3"},Ct={class:"p-2 rounded-xl bg-amber-500/10 text-amber-600 dark:text-amber-400"},St={class:"glass-card rounded-[2.5rem] overflow-hidden shadow-xl"},It={class:"p-8 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950/50 flex flex-col md:flex-row md:items-center justify-between gap-6"},jt={class:"flex items-center gap-3"},$t={class:"flex flex-wrap items-center gap-4"},Tt={class:"relative w-full md:w-64"},Vt={class:"overflow-x-auto overflow-y-auto max-h-[600px]"},At={class:"w-full text-left border-collapse"},Dt={class:"divide-y divide-slate-100 dark:divide-slate-800"},Lt={class:"px-8 py-5"},Mt={class:"flex items-center gap-3"},zt={class:"w-10 h-10 rounded-xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-xs font-bold text-slate-500 dark:text-slate-400 border border-slate-200 dark:border-slate-700"},Ft={class:"text-sm font-bold text-slate-900 dark:text-white"},Ot={class:"text-[10px] text-slate-500 font-mono font-bold"},Nt={class:"px-8 py-5"},Bt={class:"text-xs font-medium text-slate-500 dark:text-slate-400"},Et={class:"px-8 py-5"},Ht={class:"flex items-center gap-2"},Pt={class:"text-sm font-mono font-bold text-emerald-400"},Ut={class:"px-8 py-5"},Rt={class:"text-sm font-mono font-bold text-blue-400"},Gt={class:"px-8 py-5"},Yt={class:"px-8 py-5 text-right"},qt=["onClick"],Kt={key:0},Jt={class:"px-8 py-6 bg-white dark:bg-slate-950/20 border-t border-slate-200 dark:border-slate-800 flex justify-center"},Qt={class:"flex gap-1"},Wt={class:"fixed inset-0 z-10 overflow-y-auto"},Xt={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},Zt={class:"px-8 py-6 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center bg-white dark:bg-slate-950/50"},te={class:"p-8 space-y-6"},ee={class:"p-4 rounded-2xl bg-indigo-500/5 border border-indigo-500/10 space-y-3"},se={class:"text-xs font-bold text-indigo-400 uppercase tracking-widest flex items-center gap-2"},ae={class:"space-y-2"},oe={key:0,class:"text-[10px] text-red-500 italic"},re={class:"px-8 py-6 bg-white dark:bg-slate-950 border-t border-slate-200 dark:border-slate-800 flex justify-end gap-4"},le=["disabled"],de={__name:"Index",props:{attendances:Object,departments:Array,filters:Object},setup(m){const u=m,b=k(u.filters.search),f=k(u.filters.date||new Date().toISOString().split("T")[0]),g=k(u.filters.status),x=k(!1),c=j({file:null});N([b,f,g],G(()=>{$.get(route("hr.attendance.index"),{search:b.value,date:f.value,status:g.value},{preserveState:!0,replace:!0})},300));const r=j({employee_id:"",lat:"",lng:""}),L=l=>{confirm("Verify Clock-In at current time?")&&(r.employee_id=l,r.lat="-6.2088",r.lng="106.8456",r.post(route("hr.attendance.clock-in"),{onSuccess:()=>r.reset()}))},M=l=>{confirm("Confirm Clock-Out?")&&$.post(route("hr.attendance.clock-out",l))},z=()=>{c.post(route("hr.attendance.import"),{onSuccess:()=>{x.value=!1,c.reset()}})},F=()=>{window.location.href=route("hr.attendance.template")},S=l=>l?new Date(l).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"--:--",O=l=>({present:"text-emerald-700 dark:text-emerald-400 bg-emerald-500/10 border-emerald-500/20",late:"text-amber-700 dark:text-amber-400 bg-amber-500/10 border-amber-500/20",absent:"text-red-700 dark:text-red-400 bg-red-500/10 border-red-500/20",leave:"text-indigo-700 dark:text-indigo-400 bg-indigo-500/10 border-indigo-500/20"})[l]||"text-slate-700 dark:text-slate-400 bg-slate-500/10 border-slate-500/20";return(l,e)=>(d(),n(w,null,[o(a(B),{title:"Attendance Logs"}),o(R,{title:"HR: Attendance Logs"},{default:p(()=>[t("div",lt,[t("div",dt,[e[12]||(e[12]=t("div",null,[t("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight"},"Time & Attendance"),t("p",{class:"text-sm text-slate-500 mt-1 uppercase tracking-widest font-bold font-mono"},"Daily Presence Tracking")],-1)),t("div",it,[t("button",{onClick:e[0]||(e[0]=s=>x.value=!0),class:"inline-flex items-center justify-center gap-2 rounded-2xl bg-white dark:bg-slate-900 px-5 py-2.5 text-sm font-bold text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-800 shadow-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-all hover:-translate-y-0.5"},[o(a(q),{class:"h-5 w-5"}),e[10]||(e[10]=h(" Import Fingerprint ",-1))]),e[11]||(e[11]=t("div",{class:"glass-card rounded-2xl px-4 py-2.5 flex items-center gap-3 shadow-sm border border-white/10"},[t("div",{class:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),t("span",{class:"text-xs font-bold text-slate-600 dark:text-slate-300 uppercase tracking-widest font-mono"},"Live Monitoring")],-1))])]),t("div",nt,[t("div",ct,[t("div",pt,[o(a(C),{class:"h-32 w-32 text-indigo-400 dark:text-indigo-400"})]),t("div",xt,[e[16]||(e[16]=t("h3",{class:"text-xl font-bold text-slate-900 dark:text-white mb-2"},"Daily Timekeeping",-1)),e[17]||(e[17]=t("p",{class:"text-sm text-indigo-700/70 dark:text-indigo-200/70 max-w-md leading-relaxed mb-8"},"Record your daily presence. Ensure point of entry and exit are captured accurately for payroll processing.",-1)),t("div",mt,[t("div",ut,[e[14]||(e[14]=t("label",{class:"text-[10px] font-bold text-indigo-600 dark:text-indigo-300 uppercase tracking-widest ml-1"},"Select Employee (Self-Service Mock)",-1)),v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a(r).employee_id=s),class:"w-full bg-white dark:bg-slate-950/50 border border-indigo-200 dark:border-indigo-500/30 rounded-2xl py-3 px-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500/50 transition-all"},[...e[13]||(e[13]=[t("option",{value:""},"Choose profile...",-1),t("option",{value:"1"},"Ahmad Subkont (Sample)",-1)])],512),[[T,a(r).employee_id]])]),t("button",{onClick:e[2]||(e[2]=s=>L(a(r).employee_id)),disabled:!a(r).employee_id||a(r).processing,class:"w-full sm:w-auto inline-flex items-center justify-center gap-2 rounded-2xl bg-indigo-600 px-8 py-3.5 text-sm font-bold text-white shadow-xl shadow-indigo-600/20 dark:shadow-indigo-900/40 hover:bg-indigo-500 disabled:opacity-50 transition-all hover:-translate-y-1"},[o(a(K),{class:"h-5 w-5"}),e[15]||(e[15]=h(" Record Clock-In ",-1))],8,bt)])])]),t("div",ft,[t("div",gt,[e[18]||(e[18]=t("h4",{class:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-widest"},"Today's Summary",-1)),o(a(J),{class:"h-5 w-5 text-slate-500"})]),t("div",kt,[t("div",ht,[t("div",vt,[t("div",wt,[o(a(Q),{class:"h-5 w-5"})]),e[19]||(e[19]=t("span",{class:"text-sm font-bold text-slate-700 dark:text-slate-300"},"Present",-1))]),e[20]||(e[20]=t("span",{class:"text-xl font-bold text-slate-900 dark:text-white font-mono"},"--",-1))]),t("div",yt,[t("div",_t,[t("div",Ct,[o(a(W),{class:"h-5 w-5"})]),e[21]||(e[21]=t("span",{class:"text-sm font-bold text-slate-700 dark:text-slate-300"},"Late",-1))]),e[22]||(e[22]=t("span",{class:"text-xl font-bold text-slate-900 dark:text-white font-mono"},"--",-1))]),e[23]||(e[23]=t("div",{class:"pt-4 border-t border-slate-200 dark:border-slate-800 flex justify-between items-center"},[t("span",{class:"text-xs text-slate-500 font-bold uppercase tracking-wider"},"Total Headcount"),t("span",{class:"text-sm font-bold text-slate-500 dark:text-slate-400"},"--")],-1))])])]),t("div",St,[t("div",It,[t("div",jt,[o(a(U),{class:"h-5 w-5 text-indigo-400"}),e[24]||(e[24]=t("span",{class:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-widest"},"Management Logs",-1))]),t("div",$t,[t("div",Tt,[o(a(X),{class:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),v(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>b.value=s),type:"text",placeholder:"Search employee...",class:"w-full bg-white dark:bg-slate-950 border-0 rounded-xl py-2.5 pl-10 text-xs text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500/50"},null,512),[[V,b.value]])]),v(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>f.value=s),type:"date",class:"bg-white dark:bg-slate-950 border-0 rounded-xl py-2.5 text-xs text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500/50"},null,512),[[V,f.value]]),v(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>g.value=s),class:"bg-white dark:bg-slate-950 border-0 rounded-xl py-2.5 text-xs text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500/50"},[...e[25]||(e[25]=[t("option",{value:""},"All Status",-1),t("option",{value:"present"},"Present",-1),t("option",{value:"late"},"Late",-1),t("option",{value:"absent"},"Absent",-1),t("option",{value:"leave"},"On Leave",-1)])],512),[[T,g.value]])])]),t("div",Vt,[t("table",At,[e[27]||(e[27]=t("thead",null,[t("tr",{class:"bg-slate-50 dark:bg-slate-950/30"},[t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-8 py-4 text-[10px] font-bold text-slate-900 dark:text-slate-400 uppercase tracking-widest border-b border-slate-200 dark:border-slate-800"},"Employee"),t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-8 py-4 text-[10px] font-bold text-slate-900 dark:text-slate-400 uppercase tracking-widest border-b border-slate-200 dark:border-slate-800"},"Department"),t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-8 py-4 text-[10px] font-bold text-slate-900 dark:text-slate-400 uppercase tracking-widest border-b border-slate-200 dark:border-slate-800"},"Clock In"),t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-8 py-4 text-[10px] font-bold text-slate-900 dark:text-slate-400 uppercase tracking-widest border-b border-slate-200 dark:border-slate-800"},"Clock Out"),t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-8 py-4 text-[10px] font-bold text-slate-900 dark:text-slate-400 uppercase tracking-widest border-b border-slate-200 dark:border-slate-800"},"Status"),t("th",{class:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-950 shadow-sm px-8 py-4 text-[10px] font-bold text-slate-900 dark:text-slate-400 uppercase tracking-widest border-b border-slate-200 dark:border-slate-800 text-right"},"Actions")])],-1)),t("tbody",Dt,[(d(!0),n(w,null,A(m.attendances.data,s=>(d(),n("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30 transition-colors group"},[t("td",Lt,[t("div",Mt,[t("div",zt,i(s.employee.full_name.charAt(0)),1),t("div",null,[t("div",Ft,i(s.employee.full_name),1),t("div",Ot,i(s.employee.nik),1)])])]),t("td",Nt,[t("span",Bt,i(s.employee.department?.name),1)]),t("td",Et,[t("div",Ht,[o(a(C),{class:"h-4 w-4 text-emerald-500/50"}),t("span",Pt,i(S(s.clock_in)),1)])]),t("td",Ut,[t("div",{class:y(["flex items-center gap-2",s.clock_out?"":"opacity-30"])},[o(a(C),{class:"h-4 w-4 text-blue-500/50"}),t("span",Rt,i(S(s.clock_out)),1)],2)]),t("td",Gt,[t("span",{class:y(["px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider border shadow-sm",O(s.status)])},i(s.status),3)]),t("td",Yt,[s.clock_out?_("",!0):(d(),n("button",{key:0,onClick:I=>M(s.id),class:"p-2 text-slate-500 dark:text-slate-400 hover:text-blue-400 bg-slate-50 dark:bg-slate-800 hover:bg-blue-400/10 rounded-xl transition-all border border-slate-200 dark:border-slate-700 hover:border-blue-500/30",title:"Force Clock Out"},[o(a(rt),{class:"h-5 w-5"})],8,qt))])]))),128)),m.attendances.data.length?_("",!0):(d(),n("tr",Kt,[...e[26]||(e[26]=[t("td",{colspan:"6",class:"px-8 py-16 text-center"},[t("div",{class:"text-slate-500 text-sm italic"},"No attendance records found for selected criteria.")],-1)])]))])])]),t("div",Jt,[t("nav",Qt,[(d(!0),n(w,null,A(m.attendances.links,(s,I)=>(d(),E(a(H),{key:I,href:s.url||"#",class:y(["px-4 py-2 rounded-xl text-sm font-bold transition-all",[s.active?"bg-indigo-600 text-slate-900 dark:text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 hover:text-slate-900 dark:text-white",s.url?"":"opacity-50 cursor-not-allowed"]]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])])]),o(a(Z),{as:"template",show:x.value},{default:p(()=>[o(a(tt),{as:"div",class:"relative z-[100]",onClose:e[9]||(e[9]=s=>x.value=!1)},{default:p(()=>[o(a(D),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[...e[28]||(e[28]=[t("div",{class:"fixed inset-0 bg-white dark:bg-slate-950/80 backdrop-blur-sm transition-opacity"},null,-1)])]),_:1}),t("div",Wt,[t("div",Xt,[o(a(D),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:p(()=>[o(a(et),{class:"relative transform overflow-hidden rounded-[2rem] glass-card text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-md"},{default:p(()=>[t("form",{onSubmit:P(z,["prevent"])},[t("div",Zt,[o(a(st),{as:"h3",class:"text-xl font-bold text-slate-900 dark:text-white"},{default:p(()=>[...e[29]||(e[29]=[h(" Import Fingerprint Data ",-1)])]),_:1}),t("button",{onClick:e[6]||(e[6]=s=>x.value=!1),type:"button",class:"text-slate-500 hover:text-slate-900 dark:text-white transition-colors"},[o(a(at),{class:"h-7 w-7"})])]),t("div",te,[t("div",ee,[t("h4",se,[o(a(ot),{class:"h-4 w-4"}),e[30]||(e[30]=h(" Instructions ",-1))]),e[31]||(e[31]=t("p",{class:"text-xs text-slate-500 leading-relaxed italic"}," Please list NIK, Date, Clock In, and Clock Out in your Excel file. The system will automatically detect late status (> 08:30). ",-1)),t("button",{type:"button",onClick:F,class:"text-xs font-bold text-indigo-500 hover:text-indigo-400 underline underline-offset-4"}," Download Fingerprint Template ")]),t("div",ae,[e[32]||(e[32]=t("label",{class:"text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Select Attendance File",-1)),t("input",{type:"file",onInput:e[7]||(e[7]=s=>a(c).file=s.target.files[0]),class:"block w-full text-xs text-slate-500 file:mr-4 file:py-2.5 file:px-4 file:rounded-xl file:border-0 file:text-xs file:font-black file:bg-indigo-600 file:text-white hover:file:bg-indigo-500 transition-all cursor-pointer",accept:".xlsx, .xls, .csv"},null,32),a(c).errors.file?(d(),n("p",oe,i(a(c).errors.file),1)):_("",!0)])]),t("div",re,[t("button",{onClick:e[8]||(e[8]=s=>x.value=!1),type:"button",class:"px-6 py-2.5 text-sm font-medium text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white transition-colors"},"Cancel"),t("button",{type:"submit",disabled:a(c).processing||!a(c).file,class:"inline-flex items-center justify-center gap-2 rounded-xl bg-indigo-600 px-8 py-2.5 text-sm font-bold text-white shadow-lg shadow-indigo-900/20 hover:bg-indigo-500 disabled:opacity-50 transition-all"}," Start Import ",8,le)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]),_:1})],64))}},Me=Y(de,[["__scopeId","data-v-48af29a4"]]);export{Me as default};
