import{f as P,c as u,a as i,u as a,h as R,w as x,b as e,l as v,d as g,i as D,o as p,e as I,j as n,v as m,F as f,g as h,t as y,k as $,B as q}from"./app-BDCSmORV.js";import{_ as j}from"./AppLayout-D-MN9Clt.js";import{_ as N}from"./SearchableSelect-LOxpOthx.js";import{r as F}from"./ArrowLeftIcon-CzCPH4NR.js";import{r as M}from"./PlusIcon-CkLfrpeP.js";import{r as B}from"./TrashIcon-DxPlyXN8.js";/* empty css            */import"./XMarkIcon-CqC2ginv.js";import"./SunIcon-DIO3ajW4.js";import"./WrenchScrewdriverIcon-Bcgjqimb.js";import"./DocumentPlusIcon-CeAHff71.js";import"./TruckIcon-KSIW3uKV.js";import"./DocumentTextIcon-D13MK6Zf.js";import"./ShoppingCartIcon-C570p5_n.js";import"./MapPinIcon-Bn_n6hkH.js";import"./SparklesIcon-CPtneXCC.js";import"./CubeIcon-D4nQSbpl.js";import"./ClockIcon-BiKs3xgx.js";import"./CheckCircleIcon-pchilZdj.js";import"./ShieldCheckIcon-BLDjUQQt.js";import"./transition-_fwserXi.js";const O={class:"max-w-full px-4 sm:px-6 lg:px-8 mx-auto"},A={class:"grid grid-cols-1 xl:grid-cols-12 gap-6"},T={class:"xl:col-span-4 glass-card rounded-2xl p-6 space-y-4"},E={key:0},L=["value"],Q=["value"],G={class:"xl:col-span-8 glass-card rounded-2xl p-6"},z={class:"flex items-center justify-between mb-4"},H={class:"space-y-3 max-h-[600px] overflow-y-auto custom-scrollbar pr-2 relative"},J={class:"col-span-12 sm:col-span-5"},K={class:"col-span-4 sm:col-span-2"},W=["onUpdate:modelValue"],Y={class:"col-span-4 sm:col-span-4"},X=["onUpdate:modelValue"],Z={class:"col-span-4 sm:col-span-1 flex justify-end"},ee=["onClick"],te={class:"glass-card rounded-2xl p-6"},se={class:"flex justify-end gap-3"},le=["disabled"],Ve={__name:"Form",props:{products:Array,user:Object,request:Object,prefill:Object},setup(k){const r=k,w=q(()=>r.products.map(o=>({id:o.id,label:`[${o.code||o.sku||"-"}] ${o.name}`,...o}))),c=q(()=>!!r.request),s=P({request_date:r.request?.request_date||new Date().toISOString().split("T")[0],department:r.request?.department||"",requester:r.request?.requester||r.user?.name||"",notes:r.request?.notes||"",items:r.request?.items?.map(o=>({product_id:o.product_id,qty:parseFloat(o.qty),description:o.description}))||r.prefill?.items||[{product_id:"",qty:1,description:""}]}),_=["Production","Logistics","General Affair","Marketing","Finance","HR & GA","IT","Maintenance","QC","PPIC"],V=()=>{s.items.push({product_id:"",qty:1,description:""})},C=o=>{s.items.splice(o,1)},S=(o,t)=>{t?(s.items[o].product_id=t.id,s.items[o].description=t.description||t.notes||`SKU: ${t.sku}`):(s.items[o].product_id="",s.items[o].description="")},U=()=>{c.value?s.put(route("purchasing.requests.update",r.request.id)):s.post(route("purchasing.requests.store"))};return(o,t)=>(p(),u(f,null,[i(a(R),{title:c.value?"Edit Purchase Request":"Create Purchase Request"},null,8,["title"]),i(j,{title:"Purchase Requests"},{default:x(()=>[e("div",O,[i(a(v),{href:"/purchasing/requests",class:"inline-flex items-center gap-2 mb-4 text-sm text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white"},{default:x(()=>[i(a(F),{class:"h-4 w-4"}),t[4]||(t[4]=g(" Back to List ",-1))]),_:1}),e("form",{onSubmit:D(U,["prevent"]),class:"space-y-6"},[e("div",A,[e("div",T,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white mb-4"},"Request Info",-1)),c.value?(p(),u("div",E,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"PR Number",-1)),e("input",{type:"text",value:k.request.pr_number,class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 py-2.5 text-slate-500 dark:text-slate-400 cursor-not-allowed",disabled:""},null,8,L)])):I("",!0),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"Date",-1)),n(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=l=>a(s).request_date=l),class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",required:""},null,512),[[m,a(s).request_date]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"Department",-1)),n(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>a(s).department=l),class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",required:""},[t[7]||(t[7]=e("option",{value:""},"Select Department",-1)),(p(),u(f,null,h(_,l=>e("option",{key:l,value:l},y(l),9,Q)),64))],512),[[$,a(s).department]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"Requester",-1)),n(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>a(s).requester=l),class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",placeholder:"Your Name",required:""},null,512),[[m,a(s).requester]])])]),e("div",G,[e("div",z,[t[12]||(t[12]=e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white"},"Items Requested",-1)),e("button",{type:"button",onClick:V,class:"text-sm font-medium text-blue-400 hover:text-blue-300 flex items-center gap-1"},[i(a(M),{class:"h-4 w-4"}),t[11]||(t[11]=g(" Add Item ",-1))])]),e("div",H,[t[16]||(t[16]=e("div",{class:"grid grid-cols-12 gap-3 px-3 py-2 mb-2 hidden sm:grid sticky top-0 z-10 bg-white dark:bg-slate-900 border-b border-slate-100 dark:border-slate-800"},[e("div",{class:"col-span-12 sm:col-span-5"},[e("span",{class:"text-[10px] font-bold text-slate-500 uppercase"},"Product / Material")]),e("div",{class:"col-span-4 sm:col-span-2 text-right pr-2"},[e("span",{class:"text-[10px] font-bold text-slate-500 uppercase"},"Qty")]),e("div",{class:"col-span-4 sm:col-span-4 pl-2"},[e("span",{class:"text-[10px] font-bold text-slate-500 uppercase"},"Description / Specs")]),e("div",{class:"col-span-4 sm:col-span-1"})],-1)),(p(!0),u(f,null,h(a(s).items,(l,b)=>(p(),u("div",{key:b,class:"grid grid-cols-12 gap-3 items-end bg-slate-50 dark:bg-slate-800/30 p-3 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-900 dark:bg-slate-800/50 transition-colors"},[e("div",J,[t[13]||(t[13]=e("label",{class:"block text-[10px] font-bold text-slate-500 uppercase mb-1 sm:hidden"},"Product",-1)),i(N,{modelValue:l.product_id,"onUpdate:modelValue":d=>l.product_id=d,options:w.value,onChange:d=>S(b,d),placeholder:"Search Product..."},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),e("div",K,[t[14]||(t[14]=e("label",{class:"block text-[10px] font-bold text-slate-500 uppercase mb-1 sm:hidden"},"Qty",-1)),n(e("input",{type:"number","onUpdate:modelValue":d=>l.qty=d,min:"1",step:"any",class:"w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-xs text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500 text-right",required:""},null,8,W),[[m,l.qty]])]),e("div",Y,[t[15]||(t[15]=e("label",{class:"block text-[10px] font-bold text-slate-500 uppercase mb-1 sm:hidden"},"Specs",-1)),n(e("input",{type:"text","onUpdate:modelValue":d=>l.description=d,class:"w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-xs text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500",placeholder:"Details..."},null,8,X),[[m,l.description]])]),e("div",Z,[e("button",{type:"button",onClick:d=>C(b),class:"p-2 text-slate-500 hover:text-red-400 rounded-lg hover:bg-slate-700/50 transition-colors"},[i(a(B),{class:"h-4 w-4"})],8,ee)])]))),128))])])]),e("div",te,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2"},"Notes / Justification",-1)),n(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=l=>a(s).notes=l),rows:"3",class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",placeholder:"Why is this purchase needed?"},null,512),[[m,a(s).notes]])]),e("div",se,[i(a(v),{href:"/purchasing/requests",class:"px-6 py-2.5 rounded-xl bg-slate-50 dark:bg-slate-800 text-sm font-semibold text-slate-600 dark:text-slate-300 hover:bg-slate-700"},{default:x(()=>[...t[18]||(t[18]=[g("Cancel",-1)])]),_:1}),e("button",{type:"submit",class:"px-6 py-2.5 rounded-xl bg-blue-600 text-sm font-semibold text-white dark:text-white hover:bg-blue-500 shadow-lg shadow-blue-900/20",disabled:a(s).processing},y(a(s).processing?"Saving...":c.value?"Update Request":"Submit Request"),9,le)])],32)])]),_:1})],64))}};export{Ve as default};
