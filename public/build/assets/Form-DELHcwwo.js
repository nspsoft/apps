import{p as P,c as u,b as i,u as o,h as A,d as f,e as t,l as y,j as k,y as D,f as n,v as p,o as c,F as x,g as h,t as b,i as w,D as _}from"./app-D_UiwwGY.js";import{_ as F}from"./AppLayout-j_bqvUdd.js";import{_ as $}from"./SearchableSelect-Cb5Fhhr1.js";import{a as N}from"./helpers-BjqMQcOq.js";import{r as j}from"./ArrowLeftIcon-BRVbvGYF.js";import{r as I}from"./PlusIcon-CNffxIAs.js";import{r as M}from"./TrashIcon-nbCuN65P.js";/* empty css            */import"./XMarkIcon-Bk2VDfUN.js";import"./SunIcon-DsBk-RNV.js";import"./WrenchScrewdriverIcon-D2iFWpWW.js";import"./CheckBadgeIcon-CXai5z2u.js";import"./ShoppingCartIcon-Ch4xf8_E.js";import"./CubeIcon-DvVPDFE0.js";import"./TruckIcon-yq9WF2-2.js";import"./transition-CXyrXrzI.js";const B={class:"max-w-full px-4 sm:px-6 lg:px-8 mx-auto"},E={class:"grid grid-cols-1 xl:grid-cols-12 gap-6"},T={class:"xl:col-span-4 glass-card rounded-2xl p-6 space-y-4"},L=["value"],Q=["value"],W={class:"xl:col-span-8 glass-card rounded-2xl p-6"},z={class:"flex items-center justify-between mb-4"},G={class:"space-y-3 max-h-[600px] overflow-y-auto custom-scrollbar pr-2 relative"},H={class:"col-span-12 sm:col-span-4"},J={class:"col-span-4 sm:col-span-2"},K=["onUpdate:modelValue"],R={class:"col-span-4 sm:col-span-3"},X=["onUpdate:modelValue","onChange"],Y={class:"col-span-4 sm:col-span-2"},Z=["onUpdate:modelValue"],ee={class:"col-span-4 sm:col-span-1 flex justify-end"},te=["onClick"],se={class:"mt-6 pt-6 border-t border-slate-200 dark:border-slate-800"},le={class:"flex justify-between items-center"},re={class:"text-xl font-bold text-slate-900 dark:text-white"},oe={class:"glass-card rounded-2xl p-6"},ae={class:"flex justify-end gap-3"},de=["disabled"],Oe={__name:"Form",props:{purchaseOrder:Object,poNumber:String,suppliers:Array,warehouses:Array,products:Array,units:Array},setup(g){const a=g,O=_(()=>!a.products||!Array.isArray(a.products)?[]:a.products.map(r=>({id:r.id,label:`[${r.code||r.sku||"-"}] ${r.name}`,...r}))),v=_(()=>!!a.purchaseOrder?.id),l=P({po_number:a.poNumber||a.purchaseOrder?.po_number,supplier_id:a.purchaseOrder?.supplier_id||"",warehouse_id:a.purchaseOrder?.warehouse_id||"",order_date:a.purchaseOrder?.order_date||new Date().toISOString().split("T")[0],expected_date:a.purchaseOrder?.expected_date||"",notes:a.purchaseOrder?.notes||"",items:a.purchaseOrder?.items?.map(r=>({id:r.id,product_id:r.product_id,qty:parseFloat(r.qty),unit_price:Math.round(parseFloat(r.unit_price||0)),discount_percent:parseFloat(r.discount_percent||0),unit_id:r.unit_id,description:r.description||""}))||[{product_id:"",qty:1,unit_price:0,discount_percent:0,unit_id:null,description:""}]}),V=()=>{l.items.push({product_id:"",qty:1,unit_price:0,discount_percent:0,unit_id:null,description:""})},U=r=>{l.items.splice(r,1)},S=(r,e)=>{e&&(l.items[r].product_id=e.id,l.items[r].unit_price=Math.round(parseFloat(e.cost_price||0)),l.items[r].unit_id=e.unit_id,l.items[r].description||(l.items[r].description=e.description||e.name||""))},q=_(()=>l.items.reduce((r,e)=>{const s=(e.qty||0)*(e.unit_price||0),m=s*((e.discount_percent||0)/100);return r+(s-m)},0)),C=()=>{v.value?l.put(route("purchasing.orders.update",a.purchaseOrder.id)):l.post(route("purchasing.orders.store"))};return(r,e)=>(c(),u(x,null,[i(o(A),{title:v.value?"Edit Purchase Order":"Create Purchase Order"},null,8,["title"]),i(F,{title:"Purchase Orders"},{default:f(()=>[t("div",B,[i(o(y),{href:"/purchasing/orders",class:"inline-flex items-center gap-2 mb-4 text-sm text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white"},{default:f(()=>[i(o(j),{class:"h-4 w-4"}),e[6]||(e[6]=k(" Back to List ",-1))]),_:1}),t("form",{onSubmit:D(C,["prevent"]),class:"space-y-6"},[t("div",E,[t("div",T,[e[14]||(e[14]=t("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white mb-4"},"Order Info",-1)),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"PO Number",-1)),n(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>o(l).po_number=s),class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 py-2.5 text-slate-500 dark:text-slate-400 cursor-not-allowed",disabled:""},null,512),[[p,o(l).po_number]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"Supplier",-1)),n(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o(l).supplier_id=s),class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",required:""},[e[8]||(e[8]=t("option",{value:""},"Select Supplier",-1)),(c(!0),u(x,null,h(g.suppliers,s=>(c(),u("option",{key:s.id,value:s.id},b(s.name),9,L))),128))],512),[[w,o(l).supplier_id]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"Warehouse",-1)),n(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).warehouse_id=s),class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",required:""},[e[10]||(e[10]=t("option",{value:""},"Select Warehouse",-1)),(c(!0),u(x,null,h(g.warehouses,s=>(c(),u("option",{key:s.id,value:s.id},b(s.name),9,Q))),128))],512),[[w,o(l).warehouse_id]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"Order Date",-1)),n(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>o(l).order_date=s),class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",required:""},null,512),[[p,o(l).order_date]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1"},"Expected Date",-1)),n(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=s=>o(l).expected_date=s),class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50"},null,512),[[p,o(l).expected_date]])])]),t("div",W,[t("div",z,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white"},"Items",-1)),t("button",{type:"button",onClick:V,class:"text-sm font-medium text-blue-400 hover:text-blue-300 flex items-center gap-1"},[i(o(I),{class:"h-4 w-4"}),e[15]||(e[15]=k(" Add Item ",-1))])]),t("div",G,[e[21]||(e[21]=t("div",{class:"grid grid-cols-12 gap-3 px-3 py-2 mb-2 hidden sm:grid sticky top-0 z-10 bg-white dark:bg-slate-900 border-b border-slate-100 dark:border-slate-800"},[t("div",{class:"col-span-12 sm:col-span-4"},[t("span",{class:"text-[10px] font-bold text-slate-500 uppercase"},"Product")]),t("div",{class:"col-span-4 sm:col-span-2 text-right pr-2"},[t("span",{class:"text-[10px] font-bold text-slate-500 uppercase"},"Qty")]),t("div",{class:"col-span-4 sm:col-span-3 text-right pr-2"},[t("span",{class:"text-[10px] font-bold text-slate-500 uppercase"},"Price")]),t("div",{class:"col-span-4 sm:col-span-2 text-right pr-2"},[t("span",{class:"text-[10px] font-bold text-slate-500 uppercase"},"Disc %")]),t("div",{class:"col-span-4 sm:col-span-1"})],-1)),(c(!0),u(x,null,h(o(l).items,(s,m)=>(c(),u("div",{key:m,class:"grid grid-cols-12 gap-3 items-end bg-slate-50 dark:bg-slate-800/30 p-3 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-900 dark:bg-slate-800/50 transition-colors"},[t("div",H,[e[17]||(e[17]=t("label",{class:"block text-[10px] font-bold text-slate-500 uppercase mb-1 sm:hidden"},"Product",-1)),i($,{modelValue:s.product_id,"onUpdate:modelValue":d=>s.product_id=d,options:O.value,onChange:d=>S(m,d),placeholder:"Search Product..."},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),t("div",J,[e[18]||(e[18]=t("label",{class:"block text-[10px] font-bold text-slate-500 uppercase mb-1 sm:hidden"},"Qty",-1)),n(t("input",{type:"number","onUpdate:modelValue":d=>s.qty=d,min:"0.0001",step:"any",class:"w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-xs text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500 text-right",required:""},null,8,K),[[p,s.qty]])]),t("div",R,[e[19]||(e[19]=t("label",{class:"block text-[10px] font-bold text-slate-500 uppercase mb-1 sm:hidden"},"Price",-1)),n(t("input",{type:"number","onUpdate:modelValue":d=>s.unit_price=d,onChange:d=>s.unit_price=Math.round(s.unit_price),step:"any",class:"w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-xs text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500 text-right",required:""},null,40,X),[[p,s.unit_price]])]),t("div",Y,[e[20]||(e[20]=t("label",{class:"block text-[10px] font-bold text-slate-500 uppercase mb-1 sm:hidden"},"Disc %",-1)),n(t("input",{type:"number","onUpdate:modelValue":d=>s.discount_percent=d,min:"0",max:"100",step:"any",class:"w-full rounded-lg border-0 bg-slate-50 dark:bg-slate-800 py-2.5 text-xs text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500 text-right"},null,8,Z),[[p,s.discount_percent]])]),t("div",ee,[t("button",{type:"button",onClick:d=>U(m),class:"p-2 text-slate-500 hover:text-red-400 rounded-lg hover:bg-slate-700/50 transition-colors"},[i(o(M),{class:"h-4 w-4"})],8,te)])]))),128))]),t("div",se,[t("div",le,[e[22]||(e[22]=t("span",{class:"text-slate-500 dark:text-slate-400 font-medium"},"Grand Total",-1)),t("span",re,b(o(N)(q.value)),1)])])])]),t("div",oe,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2"},"Notes",-1)),n(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=s=>o(l).notes=s),rows:"3",class:"w-full rounded-xl border-0 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500/50",placeholder:"Optional notes..."},null,512),[[p,o(l).notes]])]),t("div",ae,[i(o(y),{href:"/purchasing/orders",class:"px-6 py-2.5 rounded-xl bg-slate-50 dark:bg-slate-800 text-sm font-semibold text-slate-600 dark:text-slate-300 hover:bg-slate-700"},{default:f(()=>[...e[24]||(e[24]=[k("Cancel",-1)])]),_:1}),t("button",{type:"submit",class:"px-6 py-2.5 rounded-xl bg-blue-600 text-sm font-semibold text-white dark:text-white hover:bg-blue-500 shadow-lg shadow-blue-900/20",disabled:o(l).processing},b(o(l).processing?"Saving...":"Save Purchase Order"),9,de)])],32)])]),_:1})],64))}};export{Oe as default};
