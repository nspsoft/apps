import{f as k,C as w,x as q,w as g,b as e,i as U,t as o,a as l,u as i,o as n,c,F as f,g as v,e as I,n as j,d as S}from"./app-CKQzvzyf.js";import{_ as D}from"./AppLayout-CK2fh2JM.js";import{_ as $}from"./PrimaryButton-DVqk2Myl.js";import{_ as p}from"./TextInput-gJnXKMNh.js";import{_ as u}from"./InputLabel-CbfajqIu.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./XMarkIcon-B2KJaphs.js";import"./SunIcon-dsrw8a58.js";import"./WrenchScrewdriverIcon-Dr4pPQtT.js";import"./DocumentPlusIcon-CNFF2MCw.js";import"./TruckIcon-BqdSAK_u.js";import"./DocumentTextIcon-Dex0qltP.js";import"./ShoppingCartIcon-B7yQfjtQ.js";import"./MapPinIcon-jVm1FI58.js";import"./SparklesIcon-DHNBQV1A.js";import"./CubeIcon-DADqMiG3.js";import"./ClockIcon-WdBsPvPQ.js";import"./CheckCircleIcon-BObHF1cH.js";import"./ShieldCheckIcon-D39uRVh3.js";const C={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},N={class:"py-12"},R={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},B={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg p-6 mb-6"},F={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Q={class:"text-lg font-semibold text-gray-900 dark:text-white"},A={class:"text-lg font-semibold text-gray-900 dark:text-white"},M={class:"border-b border-gray-200 dark:border-gray-700 pb-4 mb-4"},O={class:"text-lg font-bold text-gray-900 dark:text-white"},P={class:"flex gap-4 mt-2"},E={class:"text-sm text-gray-500"},z={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},G={key:0,class:"text-red-500 text-xs mt-1"},L={key:0},T={class:"overflow-x-auto"},H={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},J={class:"divide-y divide-gray-200 dark:divide-gray-700"},K={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},W={class:"px-4 py-2 text-sm text-gray-500"},X={class:"px-4 py-2"},Y={class:"px-4 py-2"},Z={key:1,class:"text-sm text-gray-500 italic"},ee={class:"flex justify-end p-6"},be={__name:"Show",props:{receipt:Object},setup(m){const _=m,d=k({inspector_id:_.receipt.received_by,inspection_date:new Date().toISOString().slice(0,10),items:[]}),h=()=>{d.items=_.receipt.items.map(r=>{const t={};return r.product.qc_master_points&&r.product.qc_master_points.forEach(s=>{t[s.id]={actual_value:"",remark:""}}),{id:r.id,qty_received:r.qty_received,qty_rejected:0,qty_accepted:r.qty_received,inspection_data:t,product_name:r.product.name,product_code:r.product.code,master_points:r.product.qc_master_points||[],unit:r.unit?.name}})};w(()=>{h()});const b=r=>{const t=d.items[r];t.qty_accepted=Math.max(0,t.qty_received-t.qty_rejected)},V=()=>{d.post(route("qc.incoming.store",_.receipt.id))};return(r,t)=>(n(),q(D,{title:"Perform Inspection"},{header:g(()=>[e("h2",C," Inspect GRN: "+o(m.receipt.grn_number),1)]),default:g(()=>[e("div",N,[e("div",R,[e("form",{onSubmit:U(V,["prevent"])},[e("div",B,[e("div",F,[e("div",null,[t[2]||(t[2]=e("h3",{class:"text-sm font-medium text-gray-500"},"Supplier",-1)),e("p",Q,o(m.receipt.supplier?.name),1)]),e("div",null,[t[3]||(t[3]=e("h3",{class:"text-sm font-medium text-gray-500"},"Receipt Date",-1)),e("p",A,o(m.receipt.receipt_date),1)]),e("div",null,[l(u,{value:"Inspection Date"}),l(p,{type:"date",modelValue:i(d).inspection_date,"onUpdate:modelValue":t[0]||(t[0]=s=>i(d).inspection_date=s),class:"w-full mt-1",required:""},null,8,["modelValue"])]),e("div",null,[l(u,{value:"Inspector ID"}),l(p,{type:"number",modelValue:i(d).inspector_id,"onUpdate:modelValue":t[1]||(t[1]=s=>i(d).inspector_id=s),class:"w-full mt-1",required:"",placeholder:"User ID"},null,8,["modelValue"])])])]),(n(!0),c(f,null,v(i(d).items,(s,y)=>(n(),c("div",{key:s.id,class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg p-6 mb-6"},[e("div",M,[e("h3",O,o(s.product_code)+" - "+o(s.product_name),1),e("div",P,[e("span",E,"Received: "+o(s.qty_received)+" "+o(s.unit),1)])]),e("div",z,[e("div",null,[l(u,{value:"Qty Rejected"}),l(p,{type:"number",step:"any",modelValue:s.qty_rejected,"onUpdate:modelValue":a=>s.qty_rejected=a,onInput:a=>b(y),class:"w-full mt-1 bg-red-50 text-red-900 border-red-300 focus:border-red-500 focus:ring-red-500"},null,8,["modelValue","onUpdate:modelValue","onInput"]),i(d).errors[`items.${y}.qty_rejected`]?(n(),c("div",G,o(i(d).errors[`items.${y}.qty_rejected`]),1)):I("",!0)]),e("div",null,[l(u,{value:"Qty Accepted"}),l(p,{type:"number",step:"any",modelValue:s.qty_accepted,"onUpdate:modelValue":a=>s.qty_accepted=a,class:"w-full mt-1 bg-green-50 text-green-900 border-green-300",readonly:""},null,8,["modelValue","onUpdate:modelValue"])])]),s.master_points.length>0?(n(),c("div",L,[t[5]||(t[5]=e("h4",{class:"font-medium text-gray-900 dark:text-gray-200 mb-3"},"QC Parameters",-1)),e("div",T,[e("table",H,[t[4]||(t[4]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Parameter"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Standard"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Actual Value"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Remark")])],-1)),e("tbody",J,[(n(!0),c(f,null,v(s.master_points,a=>(n(),c("tr",{key:a.id},[e("td",K,o(a.parameter_name),1),e("td",W,o(a.standard_min)+" - "+o(a.standard_max)+" "+o(a.unit),1),e("td",X,[l(p,{type:"number",step:"0.01",modelValue:s.inspection_data[a.id].actual_value,"onUpdate:modelValue":x=>s.inspection_data[a.id].actual_value=x,class:"w-32",required:""},null,8,["modelValue","onUpdate:modelValue"])]),e("td",Y,[l(p,{type:"text",modelValue:s.inspection_data[a.id].remark,"onUpdate:modelValue":x=>s.inspection_data[a.id].remark=x,class:"w-full",placeholder:"Optional"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])])])])):(n(),c("div",Z," No QC Standards defined for this product. "))]))),128)),e("div",ee,[l($,{class:j({"opacity-25":i(d).processing}),disabled:i(d).processing},{default:g(()=>[...t[6]||(t[6]=[S(" Submit Inspection ",-1)])]),_:1},8,["class","disabled"])])],32)])])]),_:1}))}};export{be as default};
