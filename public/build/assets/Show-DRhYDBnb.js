import{f as F,c as n,a as i,u as r,h as K,w as R,b as t,l as $,t as o,n as S,d as x,o as d,e as p,x as X,F as m,g as v,p as Y,i as C,j as y,v as w,s as Z,B as j,m as T}from"./app-B5d77gTM.js";import{t as O,_ as tt}from"./AppLayout-nZpgYKm8.js";import{a as c}from"./helpers-DnzC1tLX.js";import{r as et}from"./ArrowLeftIcon-Dt-aboG2.js";import{r as M}from"./PrinterIcon-CKxv6AL_.js";import{r as D}from"./SunIcon-DFlRWVtv.js";import{r as P}from"./ArrowUpTrayIcon-O8u5VReB.js";import{r as U}from"./ArrowDownTrayIcon-DE-QrbDy.js";import{r as st}from"./TruckIcon-Y5UkbuZE.js";import{r as rt}from"./UserIcon-DP5hpKIn.js";import{r as ot}from"./CubeIcon-bW47XCQi.js";import{r as V}from"./XMarkIcon-B4bnmJPQ.js";import{a as at}from"./WrenchScrewdriverIcon-Bif_JhEv.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DocumentPlusIcon-Duv4rRoN.js";import"./DocumentTextIcon-CCBG1npv.js";import"./ShoppingCartIcon-CqxvSC7y.js";import"./MapPinIcon-BP8TN_x7.js";import"./SparklesIcon-BtdQdt1N.js";import"./ClockIcon-BLS6XEV-.js";import"./CheckCircleIcon-j_tksVyl.js";import"./ShieldCheckIcon-DyWnPcXH.js";const lt={class:"max-w-full px-4 sm:px-6 lg:px-8 mx-auto"},dt={class:"flex items-center justify-between mb-8"},nt={class:"flex items-center gap-4"},it={class:"flex items-center gap-3"},ct={class:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight"},xt={class:"flex items-center gap-3"},ut=["href"],pt=["href"],bt={class:"grid grid-cols-1 xl:grid-cols-12 gap-8"},mt={class:"xl:col-span-8 space-y-8"},ft={class:"glass-card rounded-3xl p-6 shadow-sm overflow-hidden relative"},ht={class:"absolute top-0 right-0 p-8 opacity-5"},gt={class:"relative grid grid-cols-1 sm:grid-cols-2 gap-8"},kt={class:"flex gap-4"},vt={class:"h-12 w-12 rounded-2xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-blue-400"},yt={class:"text-lg font-bold text-slate-900 dark:text-white"},wt={class:"text-xs text-slate-500 dark:text-slate-400"},_t={class:"flex gap-4"},qt={class:"h-12 w-12 rounded-2xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-amber-400"},St={class:"text-lg font-bold text-slate-900 dark:text-white"},Mt={class:"text-xs text-slate-500 dark:text-slate-400 font-mono"},Ft={class:"glass-card rounded-3xl overflow-hidden shadow-sm"},Rt={class:"p-6 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between"},Ct={class:"text-[10px] items-center gap-1.5 text-slate-500 font-mono flex uppercase font-bold px-3 py-1 bg-slate-50 dark:bg-slate-800 rounded-lg"},Tt={class:"overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar relative"},Dt={class:"min-w-full divide-y divide-slate-100 dark:divide-slate-800 text-sm"},Nt={class:"divide-y divide-slate-100 dark:divide-slate-800"},$t={class:"px-6 py-4"},jt={class:"text-slate-900 dark:text-white font-medium"},Ot={class:"text-[10px] text-slate-500 font-mono mt-0.5"},Pt={class:"px-6 py-4 text-right text-slate-600 dark:text-slate-300 font-mono"},Ut={class:"px-6 py-4 text-right text-emerald-400 font-mono"},Vt={class:"px-6 py-4 text-center"},It={class:"glass-card rounded-3xl overflow-hidden shadow-sm"},At={class:"overflow-x-auto max-h-[400px] overflow-y-auto custom-scrollbar relative"},Et={class:"min-w-full divide-y divide-slate-100 dark:divide-slate-800 text-sm"},Bt={class:"divide-y divide-slate-100 dark:divide-slate-800"},zt={class:"px-6 py-4"},Lt={class:"text-slate-900 dark:text-white"},Jt={class:"text-[10px] text-slate-500 font-mono mt-0.5"},Gt={class:"px-6 py-4"},Qt={class:"text-xs font-bold text-slate-600 dark:text-slate-300"},Wt={class:"px-6 py-4"},Ht={class:"text-slate-600 dark:text-slate-300 font-medium text-xs"},Kt={class:"text-[10px] text-slate-500 font-mono"},Xt={class:"px-6 py-4 text-center"},Yt={class:"px-6 py-4 text-center"},Zt=["href"],te=["href"],ee={key:0},se={class:"glass-card rounded-3xl overflow-hidden shadow-sm"},re={class:"p-6 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between"},oe={class:"overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar relative"},ae={class:"min-w-full divide-y divide-slate-100 dark:divide-slate-800 text-sm"},le={class:"divide-y divide-slate-100 dark:divide-slate-800"},de={class:"px-6 py-4"},ne={class:"text-slate-900 dark:text-white font-medium"},ie={class:"text-[10px] text-slate-500 font-mono mt-0.5"},ce={class:"px-6 py-4 text-right text-emerald-400 font-mono"},xe={class:"px-6 py-4 text-right text-slate-600 dark:text-slate-300 font-mono"},ue={class:"px-6 py-4 text-right text-purple-400 font-bold font-mono"},pe={class:"xl:col-span-4 space-y-8"},be={class:"glass-card rounded-3xl p-6 shadow-sm"},me={class:"flex items-end justify-between mb-4"},fe={class:"text-3xl font-bold text-slate-900 dark:text-white font-mono"},he={class:"text-right"},ge={class:"text-lg font-bold text-slate-500 dark:text-slate-400 font-mono"},ke={class:"h-2 bg-slate-50 dark:bg-slate-800 rounded-full overflow-hidden"},ve={class:"glass-card rounded-3xl p-6 shadow-sm"},ye={class:"space-y-4"},we={class:"flex items-center gap-3"},_e={class:"text-xs text-slate-900 dark:text-white"},qe={key:0,class:"glass-card rounded-3xl p-6 shadow-sm"},Se={class:"text-xs text-slate-500 dark:text-slate-400 italic"},Me={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-white dark:bg-slate-950/80 backdrop-blur-sm"},Fe={class:"glass-card rounded-3xl w-full max-w-2xl p-6 shadow-2xl"},Re={class:"flex items-center justify-between mb-6"},Ce={class:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-3"},Te={class:"max-h-[40vh] overflow-y-auto space-y-4 pr-2"},De={class:"flex-1"},Ne={class:"text-sm font-bold text-slate-900 dark:text-white"},$e={class:"text-[10px] text-slate-500 font-mono"},je={class:"mt-1 flex gap-3 text-[10px] font-bold uppercase tracking-wider"},Oe={class:"text-slate-500"},Pe={class:"text-emerald-500"},Ue={class:"w-32"},Ve=["onUpdate:modelValue"],Ie={class:"pt-4 flex gap-3"},Ae=["disabled"],Ee={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-white dark:bg-slate-950/80 backdrop-blur-sm"},Be={class:"glass-card rounded-3xl w-full max-w-4xl p-6 shadow-2xl"},ze={class:"flex items-center justify-between mb-6"},Le={class:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-3"},Je={class:"bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},Ge={class:"p-4 grid grid-cols-12 gap-4 items-center"},Qe={class:"col-span-4"},We={class:"font-bold text-slate-900 dark:text-white text-sm"},He={class:"text-[10px] text-slate-500 font-mono"},Ke={class:"col-span-2 text-right text-slate-500 dark:text-slate-400 font-mono"},Xe={class:"col-span-2 text-right text-emerald-500 font-mono"},Ye={class:"col-span-2 text-right text-amber-500 font-mono"},Ze={class:"col-span-2"},ts={class:"pt-4 flex gap-3"},es=["disabled"],ss={key:2,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-white dark:bg-slate-950/80 backdrop-blur-sm"},rs={class:"glass-card rounded-3xl w-full max-w-3xl p-6 shadow-2xl"},os={class:"flex items-center justify-between mb-6"},as={class:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-3"},ls={class:"max-h-[40vh] overflow-y-auto space-y-4 pr-2"},ds={class:"flex-1"},ns={class:"text-sm font-bold text-slate-900 dark:text-white"},is={class:"text-[10px] text-slate-500 font-mono"},cs={class:"mt-1 flex gap-3 text-[10px] font-bold uppercase tracking-wider"},xs={class:"text-slate-500"},us={class:"text-emerald-500"},ps={class:"text-purple-500"},bs={class:"w-32"},ms=["onUpdate:modelValue"],fs={class:"pt-4 flex gap-3"},hs=["disabled"],Es={__name:"Show",props:{order:Object,stockMovements:Array},setup(l){const u=l,f=T(!1),_=F({items:u.order.work_order?.components.map(a=>({id:a.id,name:a.product?.name,sku:a.product?.sku,qty_required:parseFloat(a.qty_required),qty_consumed:parseFloat(a.qty_consumed),qty:Math.max(0,parseFloat(a.qty_required)-parseFloat(a.qty_consumed))}))||[]}),h=T(!1),q=F({items:[]}),I=()=>{q.items=u.order.work_order?.components.map(a=>{const s=parseFloat(a.qty_required)/parseFloat(u.order.work_order?.qty_planned||1)*parseFloat(u.order.work_order?.qty_produced||0),k=Math.max(0,parseFloat(a.qty_consumed)-s);return{id:a.id,name:a.product?.name,sku:a.product?.sku,qty_consumed:parseFloat(a.qty_consumed),theoretical_used:s,estimated_balance:k,qty:0}})||[],h.value=!0},A=()=>{q.post(route("manufacturing.subcontract-orders.return-materials",u.order.id),{onSuccess:()=>{h.value=!1}})},E=()=>{_.items=u.order.work_order?.components.map(a=>({id:a.id,name:a.product?.name,sku:a.product?.sku,qty_required:parseFloat(a.qty_required),qty_consumed:parseFloat(a.qty_consumed),qty:Math.max(0,parseFloat(a.qty_required)-parseFloat(a.qty_consumed))})),f.value=!0},B=()=>{_.post(route("manufacturing.subcontract-orders.dispatch",u.order.id),{onSuccess:()=>{f.value=!1}})},g=T(!1),b=F({qty_received:u.order.work_order?.qty_planned-u.order.work_order?.qty_produced,sj_number:"",notes:""}),z=()=>{b.post(route("manufacturing.subcontract-orders.receive",u.order.id),{onSuccess:()=>{g.value=!1,b.reset()}})},L=a=>({draft:"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",sent:"bg-blue-500/20 text-blue-400 border-blue-500/30 font-bold",received:"bg-amber-500/20 text-amber-400 border-amber-500/30 font-bold",completed:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30 font-bold",cancelled:"bg-red-500/20 text-red-400 border-red-500/30 font-bold"})[a]||"bg-slate-500/20 text-slate-500 dark:text-slate-400 border-slate-500/30",J=a=>a?new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"-",G=a=>a.type==="transfer"?a.qty>0?"MAT_RECV (By Subcont)":"MAT_SENT (To Subcont)":a.type==="production_in"?"FG_IN (Receipt)":a.type==="production_out"?"MAT_USE (Backflush)":a.qty>0?"IN":"OUT",Q=a=>a.type==="transfer"?"bg-blue-500/10 text-blue-400":a.qty>0?"bg-emerald-500/10 text-emerald-500":"bg-red-500/10 text-red-500",W=()=>{confirm("Create a Purchase Order Draft for this subcontract service?")&&Z.post(route("manufacturing.subcontract-orders.generate-po",u.order.id))},H=j(()=>!["completed","cancelled"].includes(u.order.status)),N=j(()=>["sent","received"].includes(u.order.status));return(a,e)=>(d(),n(m,null,[i(r(K),{title:`Subcontract Order ${l.order.order_number}`},null,8,["title"]),i(tt,{title:"Subcontract Orders"},{default:R(()=>[t("div",lt,[t("div",dt,[t("div",nt,[i(r($),{href:a.route("manufacturing.subcontract-orders.index"),class:"p-2.5 rounded-xl glass-card text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:text-white hover:border-slate-200 dark:border-slate-700 transition-all"},{default:R(()=>[i(r(et),{class:"h-5 w-5"})]),_:1},8,["href"]),t("div",null,[t("div",it,[t("h2",ct,o(l.order.order_number),1),t("span",{class:S(["inline-flex items-center rounded-full border px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider",L(l.order.status)])},o(l.order.status),3)]),e[10]||(e[10]=t("p",{class:"text-xs text-slate-500 mt-1 uppercase tracking-widest font-bold"},"Subcontract Tracking Detail",-1))])]),t("div",xt,[t("a",{href:a.route("manufacturing.subcontract-orders.print",l.order.id),target:"_blank",class:"flex items-center gap-2 rounded-xl bg-white dark:bg-slate-950 px-4 py-2.5 text-sm font-semibold text-red-500 hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800 transition-all border border-red-500/30"},[i(r(M),{class:"h-5 w-5"}),e[11]||(e[11]=x(" Print Order ",-1))],8,ut),!l.order.purchase_order_id&&l.order.status!=="cancelled"?(d(),n("button",{key:0,onClick:W,class:"flex items-center gap-2 rounded-xl bg-slate-900 dark:bg-white px-4 py-2.5 text-sm font-semibold text-white dark:text-slate-900 hover:opacity-90 transition-all shadow-lg"},[i(r(D),{class:"h-5 w-5"}),e[12]||(e[12]=x(" Generate Service PO ",-1))])):p("",!0),l.order.purchase_order_id?(d(),X(r($),{key:1,href:a.route("purchasing.orders.show",l.order.purchase_order_id),class:"flex items-center gap-2 rounded-xl bg-blue-500/10 px-4 py-2.5 text-sm font-semibold text-blue-500 border border-blue-500/20 hover:bg-blue-500 hover:text-white transition-all"},{default:R(()=>[i(r(D),{class:"h-5 w-5"}),x(" View PO: "+o(l.order.purchase_order?.po_number),1)]),_:1},8,["href"])):p("",!0),["sent","received","completed"].includes(l.order.status)?(d(),n("a",{key:2,href:a.route("manufacturing.subcontract-orders.print-delivery-note",l.order.id),target:"_blank",class:"flex items-center gap-2 rounded-xl bg-slate-50 dark:bg-slate-800 px-4 py-2.5 text-sm font-semibold text-slate-600 dark:text-slate-300 hover:bg-slate-700 transition-all border border-slate-200 dark:border-slate-700"},[i(r(M),{class:"h-5 w-5"}),e[13]||(e[13]=x(" Print Surat Jalan ",-1))],8,pt)):p("",!0),H.value?(d(),n("button",{key:3,onClick:E,class:"flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2.5 text-sm font-semibold text-white dark:text-white hover:bg-blue-500 transition-all shadow-lg shadow-blue-500/20"},[i(r(P),{class:"h-5 w-5"}),e[14]||(e[14]=x(" Dispatch Materials (OUT) ",-1))])):p("",!0),N.value?(d(),n("button",{key:4,onClick:e[0]||(e[0]=s=>g.value=!0),class:"flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2.5 text-sm font-semibold text-slate-900 dark:text-white hover:bg-emerald-500 transition-all shadow-lg shadow-emerald-500/20"},[i(r(U),{class:"h-5 w-5"}),e[15]||(e[15]=x(" Receive Product (IN) ",-1))])):p("",!0)])]),t("div",bt,[t("div",mt,[t("div",ft,[t("div",ht,[i(r(st),{class:"h-32 w-32 text-slate-500 dark:text-slate-400"})]),t("div",gt,[t("div",kt,[t("div",vt,[i(r(rt),{class:"h-6 w-6"})]),t("div",null,[e[16]||(e[16]=t("div",{class:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1"},"Subcontractor",-1)),t("div",yt,o(l.order.supplier?.name),1),t("div",wt,o(l.order.supplier?.phone||"No phone"),1)])]),t("div",_t,[t("div",qt,[i(r(ot),{class:"h-6 w-6"})]),t("div",null,[e[17]||(e[17]=t("div",{class:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1"},"Finished Good",-1)),t("div",St,o(l.order.work_order?.product?.name),1),t("div",Mt,o(l.order.work_order?.product?.sku),1)])])])]),t("div",Ft,[t("div",Rt,[e[18]||(e[18]=t("h3",{class:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2 font-mono"},[t("div",{class:"h-6 w-1 bg-blue-500 rounded-full"}),x(" MATERIALS_DISPATCH_PLAN ")],-1)),t("span",Ct," WO Ref: "+o(l.order.work_order?.wo_number),1)]),t("div",Tt,[t("table",Dt,[e[19]||(e[19]=t("thead",{class:"sticky top-0 z-10 bg-slate-50 dark:bg-slate-900 shadow-sm"},[t("tr",{class:"bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 text-left"},[t("th",{class:"px-6 py-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Material"),t("th",{class:"px-6 py-4 text-right text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Required"),t("th",{class:"px-6 py-4 text-right text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Dispatched"),t("th",{class:"px-6 py-4 text-center text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Status")])],-1)),t("tbody",Nt,[(d(!0),n(m,null,v(l.order.work_order?.components,s=>(d(),n("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30 transition-colors"},[t("td",$t,[t("div",jt,o(s.product?.name),1),t("div",Ot,o(s.product?.sku),1)]),t("td",Pt,o(r(c)(s.qty_required)),1),t("td",Ut,o(r(c)(s.qty_consumed)),1),t("td",Vt,[t("span",{class:S(["px-2 py-0.5 rounded-full text-[10px] font-bold uppercase",s.qty_consumed>=s.qty_required?"bg-emerald-500/10 text-emerald-500":"bg-slate-50 dark:bg-slate-800 text-slate-500"])},o(s.qty_consumed>=s.qty_required?"Sent":"Pending"),3)])]))),128))])])])]),t("div",It,[e[25]||(e[25]=t("div",{class:"p-6 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between"},[t("h3",{class:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2 font-mono"},[t("div",{class:"h-6 w-1 bg-amber-500 rounded-full"}),x(" STOCK_MOVEMENT_LOGS ")])],-1)),t("div",At,[t("table",Et,[e[24]||(e[24]=t("thead",{class:"sticky top-0 z-10 bg-slate-50 dark:bg-slate-900 shadow-sm"},[t("tr",{class:"bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 text-left"},[t("th",{class:"px-6 py-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Date / Ref"),t("th",{class:"px-6 py-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Ref / SJ"),t("th",{class:"px-6 py-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Item"),t("th",{class:"px-6 py-4 text-center text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Type"),t("th",{class:"px-6 py-4 text-right text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Qty"),t("th",{class:"px-6 py-4 text-center text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Action")])],-1)),t("tbody",Bt,[(d(!0),n(m,null,v(l.stockMovements,s=>(d(),n("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30 transition-colors"},[t("td",zt,[t("div",Lt,o(J(s.created_at)),1),t("div",Jt,"MOV-"+o(s.id),1)]),t("td",Gt,[t("div",Qt,o(s.external_reference||"-"),1),e[20]||(e[20]=t("div",{class:"text-[10px] text-slate-500 uppercase font-bold"},"Subcont SJ",-1))]),t("td",Wt,[t("div",Ht,o(s.product?.name),1),t("div",Kt,o(s.product?.sku),1)]),t("td",Xt,[t("span",{class:S(["px-2 py-0.5 rounded-full text-[10px] font-bold uppercase",Q(s)])},o(G(s)),3)]),t("td",{class:S(["px-6 py-4 text-right font-mono font-bold",s.qty>0?"text-emerald-400":"text-red-400"])},o(s.qty>0?"+":"")+o(r(c)(s.qty)),3),t("td",Yt,[s.qty>0&&s.type==="production_in"?(d(),n("a",{key:0,href:a.route("manufacturing.subcontract-orders.print-grn",s.id),target:"_blank",class:"inline-flex items-center gap-1 text-[10px] font-bold text-emerald-500 hover:text-emerald-400 uppercase tracking-tighter"},[i(r(M),{class:"h-3 w-3"}),e[21]||(e[21]=x(" Print GRN ",-1))],8,Zt)):p("",!0),s.qty<0&&s.type==="transfer"?(d(),n("a",{key:1,href:a.route("manufacturing.subcontract-orders.print-delivery-note",l.order.id),target:"_blank",class:"inline-flex items-center gap-1 text-[10px] font-bold text-blue-500 hover:text-blue-400 uppercase tracking-tighter"},[i(r(M),{class:"h-3 w-3"}),e[22]||(e[22]=x(" Print SJ ",-1))],8,te)):p("",!0)])]))),128)),l.stockMovements.length===0?(d(),n("tr",ee,[...e[23]||(e[23]=[t("td",{colspan:"4",class:"px-6 py-12 text-center text-slate-600 italic"},"No movements recorded for this order.",-1)])])):p("",!0)])])])]),t("div",se,[t("div",re,[e[27]||(e[27]=t("h3",{class:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2 font-mono"},[t("div",{class:"h-6 w-1 bg-purple-500 rounded-full"}),x(" MATERIAL_RECONCILIATION ")],-1)),N.value?(d(),n("button",{key:0,onClick:I,class:"text-[10px] flex items-center gap-1.5 font-bold uppercase px-3 py-1.5 bg-purple-500/10 text-purple-400 hover:bg-purple-500 hover:text-slate-900 dark:text-white rounded-lg transition-all border border-purple-500/20"},[i(r(O),{class:"h-3.5 w-3.5"}),e[26]||(e[26]=x(" Return Material ",-1))])):p("",!0)]),t("div",oe,[t("table",ae,[e[28]||(e[28]=t("thead",{class:"sticky top-0 z-10 bg-slate-50 dark:bg-slate-900 shadow-sm"},[t("tr",{class:"bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 text-left"},[t("th",{class:"px-6 py-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Material"),t("th",{class:"px-6 py-4 text-right text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Total Sent"),t("th",{class:"px-6 py-4 text-right text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Theo. Usage"),t("th",{class:"px-6 py-4 text-right text-[10px] font-bold text-slate-500 uppercase tracking-widest"},"Data Est. Bal")])],-1)),t("tbody",le,[(d(!0),n(m,null,v(l.order.work_order?.components,s=>(d(),n("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 dark:bg-slate-800/30 transition-colors"},[t("td",de,[t("div",ne,o(s.product?.name),1),t("div",ie,o(s.product?.sku),1)]),t("td",ce,o(r(c)(s.qty_consumed)),1),t("td",xe,o(r(c)(parseFloat(s.qty_required)/parseFloat(l.order.work_order?.qty_planned||1)*parseFloat(l.order.work_order?.qty_produced||0))),1),t("td",ue,o(r(c)(Math.max(0,parseFloat(s.qty_consumed)-parseFloat(s.qty_required)/parseFloat(l.order.work_order?.qty_planned||1)*parseFloat(l.order.work_order?.qty_produced||0)))),1)]))),128))])])])])]),t("div",pe,[t("div",be,[e[31]||(e[31]=t("h3",{class:"text-sm font-bold text-slate-500 uppercase tracking-widest mb-6 border-b border-slate-200 dark:border-slate-800 pb-4"},"Job Progress",-1)),t("div",me,[t("div",null,[t("div",fe,o(r(c)(l.order.work_order?.qty_produced)),1),e[29]||(e[29]=t("div",{class:"text-[10px] text-slate-500 uppercase font-bold mt-1"},"Total Received",-1))]),t("div",he,[t("div",ge,"/ "+o(r(c)(l.order.work_order?.qty_planned)),1),e[30]||(e[30]=t("div",{class:"text-[10px] text-slate-500 uppercase font-bold mt-1"},"Target",-1))])]),t("div",ke,[t("div",{class:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 transition-all duration-500",style:Y({width:`${l.order.work_order?.qty_produced/l.order.work_order?.qty_planned*100}%`})},null,4)])]),t("div",ve,[e[33]||(e[33]=t("h3",{class:"text-sm font-bold text-slate-500 uppercase tracking-widest mb-6 border-b border-slate-200 dark:border-slate-800 pb-4"},"Warehouse Details",-1)),t("div",ye,[t("div",we,[i(r(D),{class:"h-5 w-5 text-slate-500 dark:text-slate-400"}),t("div",null,[e[32]||(e[32]=t("div",{class:"text-[10px] text-slate-500 uppercase font-bold"},"Main Inventory",-1)),t("div",_e,o(l.order.work_order?.warehouse?.name),1)])])])]),l.order.notes?(d(),n("div",qe,[e[34]||(e[34]=t("h3",{class:"text-sm font-bold text-slate-500 uppercase tracking-widest mb-4 border-b border-slate-200 dark:border-slate-800 pb-4"},"Order Notes",-1)),t("p",Se,'"'+o(l.order.notes)+'"',1)])):p("",!0)])])]),f.value?(d(),n("div",Me,[t("div",Fe,[t("div",Re,[t("h3",Ce,[i(r(P),{class:"h-6 w-6 text-blue-400"}),e[35]||(e[35]=x(" Dispatch Materials ",-1))]),t("button",{onClick:e[1]||(e[1]=s=>f.value=!1),class:"p-2 text-slate-500 hover:text-slate-900 dark:text-white"},[i(r(V),{class:"h-6 w-6"})])]),e[37]||(e[37]=t("div",{class:"bg-blue-500/5 border border-blue-500/10 rounded-2xl p-4 mb-6"},[t("p",{class:"text-xs text-blue-400 font-medium"}," Enter the quantity of each material you are currently sending to the subcontractor. Stock will be reduced for the specified quantities. ")],-1)),t("form",{onSubmit:C(B,["prevent"]),class:"space-y-6"},[t("div",Te,[(d(!0),n(m,null,v(r(_).items,s=>(d(),n("div",{key:s.id,class:"p-4 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-800 flex flex-col sm:flex-row sm:items-center gap-4"},[t("div",De,[t("div",Ne,o(s.name),1),t("div",$e,o(s.sku),1),t("div",je,[t("span",Oe,"Required: "+o(r(c)(s.qty_required)),1),t("span",Pe,"Sent: "+o(r(c)(s.qty_consumed)),1)])]),t("div",Ue,[e[36]||(e[36]=t("label",{class:"block text-[10px] font-bold text-slate-500 uppercase mb-1"},"Qty to send",-1)),y(t("input",{"onUpdate:modelValue":k=>s.qty=k,type:"number",step:"0.01",class:"w-full bg-white dark:bg-slate-950 border-slate-200 dark:border-slate-700 rounded-xl py-2 px-3 text-blue-400 font-mono font-bold focus:ring-blue-500",placeholder:"0"},null,8,Ve),[[w,s.qty]])])]))),128))]),t("div",Ie,[t("button",{type:"button",onClick:e[2]||(e[2]=s=>f.value=!1),class:"flex-1 py-3 font-bold text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800 rounded-xl hover:bg-slate-700"}," Cancel "),t("button",{type:"submit",disabled:r(_).processing,class:"flex-1 py-3 font-bold text-slate-900 dark:text-white bg-blue-600 rounded-xl hover:bg-blue-500 shadow-lg shadow-blue-500/20 disabled:opacity-50"}," Confirm Dispatch ",8,Ae)])],32)])])):p("",!0),g.value?(d(),n("div",Ee,[t("div",Be,[t("div",ze,[t("h3",Le,[i(r(U),{class:"h-6 w-6 text-emerald-400"}),e[38]||(e[38]=x(" Receive Products ",-1))]),t("button",{onClick:e[3]||(e[3]=s=>g.value=!1),class:"p-2 text-slate-500 hover:text-slate-900 dark:text-white"},[i(r(at),{class:"h-5 w-5"})])]),t("form",{onSubmit:C(z,["prevent"]),class:"space-y-6"},[t("div",Je,[e[39]||(e[39]=t("div",{class:"grid grid-cols-12 gap-4 p-4 bg-slate-50 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest"},[t("div",{class:"col-span-4"},"Item Details"),t("div",{class:"col-span-2 text-right"},"Target"),t("div",{class:"col-span-2 text-right"},"In (Recv)"),t("div",{class:"col-span-2 text-right"},"Remaining"),t("div",{class:"col-span-2 text-right"},"Receive Now")],-1)),t("div",Ge,[t("div",Qe,[t("div",We,o(l.order.work_order?.product?.name),1),t("div",He,o(l.order.work_order?.product?.sku),1)]),t("div",Ke,o(r(c)(l.order.work_order?.qty_planned)),1),t("div",Xe,o(r(c)(l.order.work_order?.qty_produced)),1),t("div",Ye,o(r(c)(Math.max(0,l.order.work_order?.qty_planned-l.order.work_order?.qty_produced))),1),t("div",Ze,[y(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>r(b).qty_received=s),type:"number",step:"0.01",class:"w-full bg-white dark:bg-slate-950 border-slate-200 dark:border-slate-700 rounded-xl py-2 px-3 text-emerald-400 font-mono font-bold text-right focus:ring-emerald-500",required:""},null,512),[[w,r(b).qty_received]])])])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-xs font-bold text-slate-500 uppercase mb-2"},"Nomor SJ Subcont",-1)),y(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>r(b).sj_number=s),type:"text",class:"w-full bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 rounded-xl py-3 px-4 text-slate-900 dark:text-white text-sm focus:ring-blue-500",placeholder:"e.g. SJ/2026/001"},null,512),[[w,r(b).sj_number]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-xs font-bold text-slate-500 uppercase mb-2"},"Notes",-1)),y(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=s=>r(b).notes=s),class:"w-full bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 rounded-xl py-3 px-4 text-slate-900 dark:text-white text-sm focus:ring-blue-500",rows:"3",placeholder:"Add receipt notes..."},null,512),[[w,r(b).notes]])]),t("div",ts,[t("button",{type:"button",onClick:e[7]||(e[7]=s=>g.value=!1),class:"flex-1 py-3 font-bold text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800 rounded-xl hover:bg-slate-700"}," Cancel "),t("button",{type:"submit",disabled:r(b).processing,class:"flex-1 py-3 font-bold text-slate-900 dark:text-white bg-emerald-600 rounded-xl hover:bg-emerald-500 shadow-lg shadow-emerald-500/20 disabled:opacity-50"}," Confirm Receipt ",8,es)])],32)])])):p("",!0),h.value?(d(),n("div",ss,[t("div",rs,[t("div",os,[t("h3",as,[i(r(O),{class:"h-6 w-6 text-purple-400"}),e[42]||(e[42]=x(" Return Unused Material ",-1))]),t("button",{onClick:e[8]||(e[8]=s=>h.value=!1),class:"p-2 text-slate-500 hover:text-slate-900 dark:text-white"},[i(r(V),{class:"h-6 w-6"})])]),e[44]||(e[44]=t("div",{class:"bg-purple-500/5 border border-purple-500/10 rounded-2xl p-4 mb-6"},[t("p",{class:"text-xs text-purple-400 font-medium"},' Enter the quantity of material to return from the subcontractor to the main inventory. This will reduce the "Consumed/Sent" quantity and increase your stock. ')],-1)),t("form",{onSubmit:C(A,["prevent"]),class:"space-y-6"},[t("div",ls,[(d(!0),n(m,null,v(r(q).items,s=>(d(),n("div",{key:s.id,class:"p-4 bg-slate-50 dark:bg-slate-900 dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-800 flex flex-col sm:flex-row sm:items-center gap-4"},[t("div",ds,[t("div",ns,o(s.name),1),t("div",is,o(s.sku),1),t("div",cs,[t("span",xs,"Sent: "+o(r(c)(s.qty_consumed)),1),t("span",us,"Theo. Used: "+o(r(c)(s.theoretical_used)),1),t("span",ps,"Est. Bal: "+o(r(c)(s.estimated_balance)),1)])]),t("div",bs,[e[43]||(e[43]=t("label",{class:"block text-[10px] font-bold text-slate-500 uppercase mb-1"},"Qty to Return",-1)),y(t("input",{"onUpdate:modelValue":k=>s.qty=k,type:"number",step:"0.01",class:"w-full bg-white dark:bg-slate-950 border-slate-200 dark:border-slate-700 rounded-xl py-2 px-3 text-purple-400 font-mono font-bold focus:ring-purple-500",placeholder:"0"},null,8,ms),[[w,s.qty]])])]))),128))]),t("div",fs,[t("button",{type:"button",onClick:e[9]||(e[9]=s=>h.value=!1),class:"flex-1 py-3 font-bold text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800 rounded-xl hover:bg-slate-700"}," Cancel "),t("button",{type:"submit",disabled:r(q).processing,class:"flex-1 py-3 font-bold text-slate-900 dark:text-white bg-purple-600 rounded-xl hover:bg-purple-500 shadow-lg shadow-purple-500/20 disabled:opacity-50"}," Confirm Return ",8,hs)])],32)])])):p("",!0)]),_:1})],64))}};export{Es as default};
