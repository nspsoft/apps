import{c as o,a as c,u,h as O,w as X,b as e,o as l,F as m,g as h,x as w,y as I,t as i,n as x,d as _,e as y,i as E,m as v,s as z}from"./app-Pt64G8qA.js";import{q as L,a as P,_ as q}from"./AppLayout-Cnn_MFyd.js";import{r as A}from"./DocumentArrowDownIcon-q-KIPMDJ.js";import{r as H}from"./TruckIcon-Glyxz6t8.js";import{r as M}from"./CubeIcon-Bx41BQ3s.js";import{r as S}from"./ArrowDownTrayIcon-BnpONi0S.js";import{r as F}from"./ArrowUpTrayIcon-86azp2nT.js";import{r as K}from"./DocumentTextIcon-dqr5IMiK.js";import{r as j}from"./CheckCircleIcon-DFMPmvz4.js";import{r as G}from"./ExclamationCircleIcon-CjODnoTy.js";/* empty css            */import"./XMarkIcon-DWAqZtbg.js";import"./SunIcon-HunFC8Xf.js";import"./WrenchScrewdriverIcon-D_tWyJnF.js";import"./DocumentPlusIcon-D30f2qj-.js";import"./ShoppingCartIcon-C5mv0T-T.js";import"./MapPinIcon-DN4-E308.js";import"./SparklesIcon-D2YLum-1.js";import"./ClockIcon-BKh-WId8.js";import"./ShieldCheckIcon-Dg2c2PfR.js";const J={class:"p-6 space-y-6"},Q={class:"flex items-center gap-3"},U={class:"p-2 bg-gradient-to-br from-emerald-600 to-teal-600 rounded-xl shadow-lg"},W={class:"grid grid-cols-4 gap-4"},Y={class:"flex items-center gap-3"},Z={class:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg"},ee={class:"text-2xl font-bold text-slate-900 dark:text-white"},te={class:"text-sm text-slate-500"},se={class:"flex gap-2 border-b border-slate-200 dark:border-slate-700"},le={key:0,class:"space-y-4"},ae={class:"flex items-center gap-4"},oe={class:"p-3 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-xl"},re={class:"font-bold text-slate-900 dark:text-white"},ne={class:"text-sm text-slate-500"},ie={class:"text-xs text-slate-400 mt-1"},de={class:"flex gap-2"},ue=["onClick"],ce=["onClick"],pe={key:1,class:"space-y-6"},me={class:"glass-card rounded-xl p-4"},xe={class:"grid grid-cols-4 gap-3"},ve=["onClick"],fe={class:"glass-card rounded-xl p-6"},ge={key:0,class:"mt-4"},be={class:"flex items-center gap-2"},he={key:0,class:"glass-card rounded-xl overflow-hidden"},ke={class:"p-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between"},we={class:"text-sm text-slate-500"},_e={class:"flex gap-2"},ye=["disabled"],Ce={class:"overflow-x-auto"},$e={class:"w-full text-sm"},De={class:"bg-slate-50 dark:bg-slate-800"},Ie={class:"divide-y divide-slate-200 dark:divide-slate-700"},Je={__name:"ImportExport",props:{dataTypes:Object,stats:Object},setup(C){const f=v("export"),g=v("products"),b=v(!1),p=v(null),$=v([]),a=v(null),k=v(null),D={cube:M,users:P,truck:H,calculator:L},R=d=>{window.location.href=route("settings.io.template",d)},V=d=>{window.location.href=route("settings.io.export",d)},T=async d=>{const t=d.target.files[0];if(!t)return;b.value=!0,p.value=null,a.value=null;const s=new FormData;s.append("file",t);try{const n=await(await fetch(route("settings.io.preview",g.value),{method:"POST",body:s,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();n.error?a.value={success:!1,message:n.error}:($.value=n.headers,p.value=n.data,a.value={preview:!0,totalRows:n.totalRows,file:t})}catch{a.value={success:!1,message:"Failed to read file"}}b.value=!1},B=()=>{if(!a.value?.file)return;b.value=!0;const d=new FormData;d.append("file",a.value.file),z.post(route("settings.io.import",g.value),d,{onSuccess:()=>{a.value={success:!0,message:"Import completed successfully!"},p.value=null,k.value&&(k.value.value="")},onError:t=>{a.value={success:!1,message:Object.values(t)[0]}},onFinish:()=>{b.value=!1}})},N=()=>{p.value=null,a.value=null,k.value&&(k.value.value="")};return(d,t)=>(l(),o(m,null,[c(u(O),{title:"Import & Export"}),c(q,{title:"Import & Export"},{default:X(()=>[e("div",J,[e("div",Q,[e("div",U,[c(u(A),{class:"h-6 w-6 text-white"})]),t[5]||(t[5]=e("div",null,[e("h2",{class:"text-xl font-bold text-slate-900 dark:text-white"},"Import & Export"),e("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Import and export data to/from Excel files")],-1))]),e("div",W,[(l(!0),o(m,null,h(C.dataTypes,(s,r)=>(l(),o("div",{key:r,class:"glass-card rounded-xl p-4"},[e("div",Y,[e("div",Z,[(l(),w(I(D[s.icon]),{class:"h-5 w-5 text-blue-600"}))]),e("div",null,[e("p",ee,i(C.stats[r]||0),1),e("p",te,i(s.name),1)])])]))),128))]),e("div",se,[e("button",{onClick:t[0]||(t[0]=s=>f.value="export"),class:x(["px-4 py-2 font-medium rounded-t-lg transition-colors flex items-center gap-2",f.value==="export"?"bg-blue-600 text-white":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800"])},[c(u(S),{class:"h-5 w-5"}),t[6]||(t[6]=_(" Export Data ",-1))],2),e("button",{onClick:t[1]||(t[1]=s=>f.value="import"),class:x(["px-4 py-2 font-medium rounded-t-lg transition-colors flex items-center gap-2",f.value==="import"?"bg-blue-600 text-white":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800"])},[c(u(F),{class:"h-5 w-5"}),t[7]||(t[7]=_(" Import Data ",-1))],2)]),f.value==="export"?(l(),o("div",le,[(l(!0),o(m,null,h(C.dataTypes,(s,r)=>(l(),o("div",{key:r,class:"glass-card rounded-xl p-4 flex items-center justify-between"},[e("div",ae,[e("div",oe,[(l(),w(I(D[s.icon]),{class:"h-6 w-6 text-white"}))]),e("div",null,[e("h3",re,i(s.name),1),e("p",ne,i(s.description),1),e("p",ie,"Columns: "+i(s.columns.join(", ")),1)])]),e("div",de,[e("button",{onClick:n=>R(r),class:"px-4 py-2 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-lg font-medium transition-colors flex items-center gap-2"},[c(u(K),{class:"h-5 w-5"}),t[8]||(t[8]=_(" Template ",-1))],8,ue),e("button",{onClick:n=>V(r),class:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2"},[c(u(S),{class:"h-5 w-5"}),t[9]||(t[9]=_(" Export ",-1))],8,ce)])]))),128))])):y("",!0),f.value==="import"?(l(),o("div",pe,[e("div",me,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3"},"Select Data Type to Import",-1)),e("div",xe,[(l(!0),o(m,null,h(C.dataTypes,(s,r)=>(l(),o("button",{key:r,onClick:n=>{g.value=r,p.value=null,a.value=null},class:x(["p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2",g.value===r?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700 hover:border-slate-300"])},[(l(),w(I(D[s.icon]),{class:x(["h-6 w-6",g.value===r?"text-blue-600":"text-slate-500"])},null,8,["class"])),e("span",{class:x(["font-medium",g.value===r?"text-blue-600":"text-slate-700 dark:text-slate-300"])},i(s.name),3)],10,ve))),128))])]),e("div",fe,[e("div",{class:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-8 text-center hover:border-blue-400 transition-colors cursor-pointer",onClick:t[2]||(t[2]=s=>d.$refs.fileInput.click()),onDragover:t[3]||(t[3]=E(()=>{},["prevent"])),onDrop:t[4]||(t[4]=E(s=>T({target:{files:s.dataTransfer.files}}),["prevent"]))},[c(u(F),{class:"h-12 w-12 text-slate-400 mx-auto mb-4"}),t[11]||(t[11]=e("p",{class:"text-lg font-medium text-slate-700 dark:text-slate-300"},"Drop your Excel file here",-1)),t[12]||(t[12]=e("p",{class:"text-sm text-slate-500 mt-1"},"or click to browse (XLSX, XLS, CSV)",-1)),e("input",{ref_key:"fileInput",ref:k,type:"file",accept:".xlsx,.xls,.csv",class:"hidden",onChange:T},null,544)],32),b.value?(l(),o("div",ge,[...t[13]||(t[13]=[e("div",{class:"flex items-center gap-2 text-blue-600"},[e("svg",{class:"animate-spin h-5 w-5",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"font-medium"},"Processing file...")],-1)])])):y("",!0),a.value&&!a.value.preview?(l(),o("div",{key:1,class:x(["mt-4 p-4 rounded-lg",a.value.success?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"])},[e("div",be,[a.value.success?(l(),w(u(j),{key:0,class:"h-5 w-5 text-green-600"})):(l(),w(u(G),{key:1,class:"h-5 w-5 text-red-600"})),e("span",{class:x([a.value.success?"text-green-700":"text-red-700","font-medium"])},i(a.value.message),3)])],2)):y("",!0)]),p.value&&p.value.length>0?(l(),o("div",he,[e("div",ke,[e("div",null,[t[14]||(t[14]=e("h3",{class:"font-bold text-slate-900 dark:text-white"},"Preview Data",-1)),e("p",we,"Showing first 10 rows of "+i(a.value?.totalRows)+" total",1)]),e("div",_e,[e("button",{onClick:N,class:"px-4 py-2 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-medium"}," Cancel "),e("button",{onClick:B,disabled:b.value,class:"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg font-medium disabled:opacity-50 flex items-center gap-2"},[c(u(j),{class:"h-5 w-5"}),_(" Confirm Import ("+i(a.value?.totalRows)+" rows) ",1)],8,ye)])]),e("div",Ce,[e("table",$e,[e("thead",De,[e("tr",null,[(l(!0),o(m,null,h($.value,s=>(l(),o("th",{key:s,class:"px-4 py-3 text-left font-medium text-slate-600 dark:text-slate-400 uppercase"},i(s),1))),128))])]),e("tbody",Ie,[(l(!0),o(m,null,h(p.value,(s,r)=>(l(),o("tr",{key:r,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50"},[(l(!0),o(m,null,h($.value,n=>(l(),o("td",{key:n,class:"px-4 py-3 text-slate-700 dark:text-slate-300"},i(s[n]||"-"),1))),128))]))),128))])])])])):y("",!0)])):y("",!0)])]),_:1})],64))}};export{Je as default};
